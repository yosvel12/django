function showLoading(){return!(parseInt($(".loading").length)>0)&&($("body").append("<div class='loading no-select' onclick='$(this).remove();'><img src='/images/logo-icon-100.png' class='spin' style='width:32px;height:32px;' align='absmiddle' />&nbsp;Loading...</div>"),void $("div.loading").css({display:"block"}))}function hideLoading(){$(".loading").remove()}function fileTree(e,t,n){$(e).html("<ul class='tree' data-type='"+n+"'></ul>"),this.root=$(e).find(".tree"),this.folderIcon='<i class="glyphicon glyphicon-folder-close"></i>',this.fileIcon='<i class="glyphicon glyphicon-file"></i>',this.folderOpenIcon='<i class="glyphicon glyphicon-folder-open"></i>',this.loadingIcon='<i class="glyphicon glyphicon-refresh"></i>',this.data={},this.count=0,this.ajax=t,this.target=n}function fileBrowser(e,t,n,o){this.folderIcon='<i class="glyphicon glyphicon-folder-close"></i>',this.fileIcon='<i class="glyphicon glyphicon-file"></i>',this.loadingIcon='<li class="tree-loading"><img src="/images/logo-icon-100.png" class="spin loading-icon" /><br>Loading...</li>',this.extensions=o||[],this.currentDir="/",this.count=0,this.identity=t,this.target=n,this.data=[],this.data["/"]={id:"/",folder:!0,title:"root",parent:null,path:"/",icon:this.folderIcon,traversed:!0,children:[]},$(e).html('<div class="path-info tip" title="Click to go up a directory"><button type="button" class="btn btn-default btn-sm up-icon"><i class="glyphicon glyphicon-chevron-up"></i></button> Path: <span class="dirpath"> / </span></div><ul class="tree" data-type="'+n+'" data-current="'+this.currentDir+'"></ul>'),this.root=$(e).find(".tree"),this.dirIndicator=$(e).find(".dirpath");var i=this;$(e).find(".path-info").click(function(){i.goUp()})}function cardAdded(e){Stormboard.App.NFC.dataWasRead(e)}function cardRemoved(e){}function setKeyboardType(e,t){$(".keyboard-container").each(function(){var t=$(this).parent(),n=t.data("dialog_id");n==e&&t.find(".keyboard-switcher").trigger("switch-keyboard")})}function textAppended(){var e;(e=Stormboard.Keyboard).inkTextAppended.apply(e,arguments)}function textDeleted(){var e;(e=Stormboard.Keyboard).inkTextDeleted.apply(e,arguments)}function textChanged(){if(console.log("textChanged",arguments),arguments.length>0&&Stormboard.Windows.sketchDialogIds.indexOf(parseInt(arguments[0]))>=0){var e;(e=Stormboard.Windows).updateRecognizedText.apply(e,arguments)}else{var t;(t=Stormboard.Keyboard).inkTextChanged.apply(t,arguments)}}function sketchFinished(){Stormboard.Windows.sketchFinished(arguments)}function oauthcallback(){Stormboard.Idea.Dialog.Auth.oauthcallback()}function init(){console.log("INIT'D")}function win10init(e){console.log("WIN10INIT'D",e)}function loadStormFromToast(e){function t(){Stormboard.Utils.Toast.info("Loading "+n),window.location="/storm/"+e}var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1];console.log("Storm From Toast:",e);try{parseInt(Stormboard.Wall.config().TopFlowID)!=parseInt(e)&&t()}catch(o){t()}}!function(e){"use strict";var t={};t.App={},t.Idea={Dialog:{Auth:{},Picker:{}}},t.Keyboard={},t.Panel={},t.Socket={},t.Storm={Help:{},User:{}},t.Utils={Avatar:{},Helpers:{}},t.Viewfinder={},t.Wall={},t.Windows={},e.Stormboard=t}(window),function(e){"use strict";function t(){var t="",n=s.src||"??";t=n.length<=2?"<div class='char'>"+n+"</div>":"<img src='"+n+'\' alt="" />',r.html('<div class="avatar">'+t+'<span>&#9662;</span><ul id="avatarmenu" class="dropdown-menu" role="menu"></ul></div>');var o=$("#avatarmenu");$.inArray("home",s.removemenu)==-1&&(o.append("<li class='avatarmenu-link'><a href='/?_t="+(new Date).getTime()+"'><span class='glyphicon glyphicon-home'></span> Home</a></li>"),o.append("<li class='divider'></li>"),o.append("<li class='avatarmenu-link'><a href='/storms/setup'><span class='glyphicon glyphicon-plus'></span> Create a Storm</a></li>"),o.append("<li class='divider'></li>")),$.inArray("change",s.removemenu)==-1&&s.has===!1&&(o.append("<li class='avatarmenu-link changeAvatar'><a href='javascript:;'><span class='glyphicon glyphicon-picture'></span> Change Profile Picture</a></li>"),o.append("<li class='divider'></li>")),$.inArray("account",s.removemenu)==-1&&(o.append("<li class='avatarmenu-link'><a href='/users/account'><span class='glyphicon glyphicon-user'></span> My Account</a></li>"),$.inArray("pricing",s.removemenu)==-1&&o.append("<li class='avatarmenu-link'><a href='/main/pricing'><span class='glyphicon glyphicon-shopping-cart'></span> Plans & Pricing</a></li>"),o.append("<li class='divider'></li>")),$.inArray("logout",s.removemenu)==-1&&o.append("<li class='avatarmenu-link'><a href='/users/logout'><span class='glyphicon glyphicon-off'></span> Logout</a></li>"),$(".app-avatar, .app-button.help").on("click pointerdown",function(){$(".dropdown-menu",this).fadeIn("fast")}),$("#avatarmenu li a, .app-button.help ul li a").css({"pointer-events":"all"}).on("click pointerup",function(t){$(this).parent().hasClass("changeAvatar")?(t.preventDefault(),t.stopPropagation(),a.update()):$(this).parent().hasClass("quickhelp")?(e.Storm.Help.quick(),t.preventDefault(),t.stopPropagation()):"javascript:;"!=this.href&&"_blank"!=this.target&&(window.location=this.href),$(this).parents(".dropdown-menu").fadeOut("fast")})}var n=e.Utils,o=n.Helpers,i=e.Wall,a={};a.html=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];e=$.extend({id:0,type:0},e);var n=e.type,o=e.id||e.user_id||0,i=e.av||e.avatar||void 0,a=void 0;return 0==o?a="<div class='icon tint'><span class='icon-envelope'></span></div>":1==n||"hubicon"==i?a="<div class='icon tint'><span class='icon-surfacehub'></span></div>":"undefined"==typeof i?a="<div class='char'><span class='icon-user'></span></div>":i.length>0&&i.length<=2?a="<div class='char'>"+i+"</div>":i.length>2&&(a="<img src='"+i+"' />"),t&&(a='<div class="avatar" user_id="'+o+'">'+a+"</div>"),a};var s={},r=!1;a.initMenu=function(e){var n=arguments.length<=1||void 0===arguments[1]?".app-avatar":arguments[1];s=$.extend({buildmenu:!0,src:!1,removemenu:[],size:125,storm:0,user_id:0,name:"Me",has:!1},e),r=$(n),s.buildmenu&&t(s)},a.update=function(){$("#boundary").length>0&&o.hideBubbles(),$("#dg_changeav form").attr("submitting",0),$(".qq-upload-success","#changeav-list").remove();var t=$("#dg_changeav");if(0==t.length){var n=s.src.replace("size=24","size=125").replace("size=50","size=125").replace("size=30","size=125");"/24"==n.substring(n.length-3)&&(n=n.substring(0,n.length-3)+"/125"),"/50"==n.substring(n.length-3)&&(n=n.substring(0,n.length-3)+"/125"),t=$("<div id='dg_changeav'></div>").appendTo($("body")),t.html('<div id="avatarerror" class="error" style="width:98%;display:none;"></div><div class="row clearfix"><div class="col-xs-6" id="changeav"><div class="avatar avatar-125">'+(2==n.length?'<div class="char">'+n+"</div>":'<img src="'+n+'" id="changeav-avatar" />')+'</div></div><div class="col-xs-6" id="selectav"><div id="avatarUploader"></div></div></div>');var a=new qq.FileUploader({element:document.getElementById("avatarUploader"),sizeLimit:1024e3,multiple:!1,action:"/users/setavatar",template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span></span></div><div class="qq-upload-button"><p>Click to Select an Image</p><p>or</p><p>Drop an Image Here</p></div><ul class="qq-upload-list changeav-list"></ul></div>',onSubmit:function r(e,t,n,o){$(".qq-upload-success, .qq-upload-fail","#changeav-list").remove()},onProgress:function l(e,t,n,o){$(".qq-upload-button").fadeOut("fast",function(){$(".qq-upload-list").fadeIn("fast")})},onComplete:function c(t,n,o){if($(".qq-upload-list").fadeOut("fast",function(){$(".qq-upload-button").fadeIn("fast"),$(".qq-upload-list").html("")}),o.success&&1==o.success){$(".char","#changeav").replaceWith('<img src="'+o.avatar125+'">'),$(".char",".app-avatar, .imgavatar").replaceWith('<img src="'+o.avatar+'">'),$(".imgavatar").attr("src",o.avatar),$(".app-avatar img").attr("src",o.avatar),$("#changeav-avatar").attr("src",o.avatar125),$("#dg_changeav .qq-upload-failed-text").remove();try{var a=i.config();a.user&&($(".char",".participant[user_id='"+a.user.id+"']").replaceWith('<img src="'+o.avatar+'">'),$("img",".participant[user_id='"+a.user.id+"']").attr("src",o.avatar)),0!=a.storm&&e.Socket.emit("UpdateAvatar",{user_id:a.user.id,avatarsrc:o.avatar})}catch(s){console.log(s)}}}})}t.dialog({title:"Change Profile Picture",width:450,minHeight:240,modal:!0})},e.Utils.Avatar=a}(Stormboard),function(e){e.Utils||(e.Utils={}),e.Utils.debounce=function t(e,n,o){var i;return function(){var t=this,a=arguments,s=function(){i=null,o||e.apply(t,a)},r=o&&!i;clearTimeout(i),i=setTimeout(s,n),r&&e.apply(t,a)}}}(window.Stormboard),function(e){e.Utils.disabled=function(e){var t=$("#boundary").data("wall");return"object"==typeof t.disabled&&$.inArray(e,t.disabled)>=0}}(Stormboard),function(e){e.fn.hoverIntent=function(t,n){var o={sensitivity:7,interval:100,timeout:0};o=e.extend(o,n?{over:t,out:n}:t);var i,a,s,r,l=function(e){i=e.pageX,a=e.pageY},c=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(s-i)+Math.abs(r-a)<o.sensitivity?(e(n).unbind("mousemove",l),n.hoverIntent_s=1,o.over.apply(n,[t])):(s=i,r=a,n.hoverIntent_t=setTimeout(function(){c(t,n)},o.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,o.out.apply(t,[e])},u=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"==t.type?(s=n.pageX,r=n.pageY,e(i).bind("mousemove",l),1!=i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){c(n,i)},o.interval))):(e(i).unbind("mousemove",l),1==i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){d(n,i)},o.timeout)))};return this.bind("mouseenter",u).bind("mouseleave",u)}}(jQuery),function(e){e.cssHooks.backgroundColor={get:function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}if(e.currentStyle)var n=e.currentStyle.backgroundColor;else if(window.getComputedStyle)var n=document.defaultView.getComputedStyle(e,null).getPropertyValue("background-color");return n.search("rgb")==-1?n:(n=n.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+t(n[1])+t(n[2])+t(n[3]))}}}(jQuery),$(function(){$(document).ajaxStop(function(){$(this).find(".loading").remove()})}),function(e){e.nl2br=function(e){return(e+"").replace(/([^>])\n/g,"$1<br />\n")}}(jQuery),jQuery.fn.log=function(e){return console&&console.log("%s: %o",e,this),this},function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(o)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n=e.ui.mouse.prototype,o=n._mouseInit,i;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),o.call(t)}}}(jQuery),function(e){var t=/iphone|ipad/i.test(navigator.userAgent);e.fn.nodoubletapzoom=function(){t&&e(this).bind("touchstart",function n(t){var n=t.timeStamp,o=e(this).data("lastTouch")||n,i=n-o,a=t.originalEvent.touches.length;e(this).data("lastTouch",n),!i||i>500||a>1||(t.preventDefault(),e(this).trigger("click").trigger("click"))})}}(jQuery),function(e){e.fn.vAlign=function(){return this.each(function(t){var n=e(this).height(),o=e(this).parent().height(),i=(o-n)/2;e(this).css("margin-top",i)})}}(jQuery),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,o){e(window).scrollTo(t,n,o)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var o=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==o.compatMode?o.body:o.documentElement})},e.fn.scrollTo=function(o,i,a){return"object"==typeof i&&(a=i,i=0),"function"==typeof a&&(a={onAfter:a}),"max"==o&&(o=9e9),a=e.extend({},n.defaults,a),i=i||a.duration,a.queue=a.queue&&a.axis.length>1,a.queue&&(i/=2),a.offset=t(a.offset),a.over=t(a.over),this._scrollable().each(function(){function s(e){l.animate(u,i,a.easing,e&&function(){e.call(this,o,a)})}if(null!=o){var r=this,l=e(r),c=o,d,u={},p=l.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}if(c=e(c,this),!c.length)return;case"object":(c.is||c.style)&&(d=(c=e(c)).offset())}e.each(a.axis.split(""),function(e,t){var o="x"==t?"Left":"Top",i=o.toLowerCase(),h="scroll"+o,f=r[h],m=n.max(r,t);if(d)u[h]=d[i]+(p?0:f-l.offset()[i]),a.margin&&(u[h]-=parseInt(c.css("margin"+o))||0,u[h]-=parseInt(c.css("border"+o+"Width"))||0),u[h]+=a.offset[i]||0,a.over[i]&&(u[h]+=c["x"==t?"width":"height"]()*a.over[i]);else{var v=c[i];u[h]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*m:v}a.limit&&/^\d+$/.test(u[h])&&(u[h]=u[h]<=0?0:Math.min(u[h],m)),!e&&a.queue&&(f!=u[h]&&s(a.onAfterFirst),delete u[h])}),s(a.onAfter)}}).end()},n.max=function(t,n){var o="x"==n?"Width":"Height",i="scroll"+o;if(!e(t).is("html,body"))return t[i]-e(t)[o.toLowerCase()]();var a="client"+o,s=t.ownerDocument.documentElement,r=t.ownerDocument.body;return Math.max(s[i],r[i])-Math.min(s[a],r[a])}}(jQuery),eval(function(e,t,n,o,i,a){if(i=function(e){return(e<t?"":i(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;n--;)a[i(n)]=o[n]||i(n);o=[function(e){return a[e]}],i=function(){return"\\w+"},n=1}for(;n--;)o[n]&&(e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),o[n]));return e}('(7($){$.H($.2L,{17:7(d){l(!6.F){d&&d.2q&&2T.1z&&1z.52("3y 3p, 4L\'t 17, 64 3y");8}p c=$.19(6[0],\'v\');l(c){8 c}c=2w $.v(d,6[0]);$.19(6[0],\'v\',c);l(c.q.3x){6.3s("1w, 3i").1o(".4E").3e(7(){c.3b=w});l(c.q.35){6.3s("1w, 3i").1o(":2s").3e(7(){c.1Z=6})}6.2s(7(b){l(c.q.2q)b.5J();7 1T(){l(c.q.35){l(c.1Z){p a=$("<1w 1V=\'5r\'/>").1s("u",c.1Z.u).33(c.1Z.Z).51(c.U)}c.q.35.V(c,c.U);l(c.1Z){a.3D()}8 N}8 w}l(c.3b){c.3b=N;8 1T()}l(c.L()){l(c.1b){c.1l=w;8 N}8 1T()}12{c.2l();8 N}})}8 c},J:7(){l($(6[0]).2W(\'L\')){8 6.17().L()}12{p b=w;p a=$(6[0].L).17();6.P(7(){b&=a.I(6)});8 b}},4D:7(c){p d={},$I=6;$.P(c.1I(/\\s/),7(a,b){d[b]=$I.1s(b);$I.6d(b)});8 d},1i:7(h,k){p f=6[0];l(h){p i=$.19(f.L,\'v\').q;p d=i.1i;p c=$.v.36(f);23(h){1e"1d":$.H(c,$.v.1X(k));d[f.u]=c;l(k.G)i.G[f.u]=$.H(i.G[f.u],k.G);31;1e"3D":l(!k){T d[f.u];8 c}p e={};$.P(k.1I(/\\s/),7(a,b){e[b]=c[b];T c[b]});8 e}}p g=$.v.41($.H({},$.v.3Y(f),$.v.3V(f),$.v.3T(f),$.v.36(f)),f);l(g.15){p j=g.15;T g.15;g=$.H({15:j},g)}8 g}});$.H($.5p[":"],{5n:7(a){8!$.1p(""+a.Z)},5g:7(a){8!!$.1p(""+a.Z)},5f:7(a){8!a.4h}});$.v=7(b,a){6.q=$.H(w,{},$.v.3d,b);6.U=a;6.3I()};$.v.W=7(c,b){l(R.F==1)8 7(){p a=$.3F(R);a.4V(c);8 $.v.W.1Q(6,a)};l(R.F>2&&b.2c!=3B){b=$.3F(R).4Q(1)}l(b.2c!=3B){b=[b]}$.P(b,7(i,n){c=c.1u(2w 3t("\\\\{"+i+"\\\\}","g"),n)});8 c};$.H($.v,{3d:{G:{},2a:{},1i:{},1c:"3r",28:"J",2F:"4P",2l:w,3o:$([]),2D:$([]),3x:w,3l:[],3k:N,4O:7(a){6.3U=a;l(6.q.4K&&!6.4J){6.q.1K&&6.q.1K.V(6,a,6.q.1c,6.q.28);6.1M(a).2A()}},4C:7(a){l(!6.1E(a)&&(a.u 11 6.1a||!6.K(a))){6.I(a)}},6c:7(a){l(a.u 11 6.1a||a==6.4A){6.I(a)}},68:7(a){l(a.u 11 6.1a)6.I(a);12 l(a.4x.u 11 6.1a)6.I(a.4x)},39:7(a,c,b){$(a).22(c).2v(b)},1K:7(a,c,b){$(a).2v(c).22(b)}},63:7(a){$.H($.v.3d,a)},G:{15:"61 4r 2W 15.",1q:"M 2O 6 4r.",1J:"M O a J 1J 5X.",1B:"M O a J 5W.",1A:"M O a J 1A.",2j:"M O a J 1A (5Q).",1G:"M O a J 1G.",1P:"M O 5O 1P.",2f:"M O a J 5L 5I 1G.",2o:"M O 47 5F Z 5B.",43:"M O a Z 5z a J 5x.",18:$.v.W("M O 3K 5v 2X {0} 2V."),1y:$.v.W("M O 5t 5s {0} 2V."),2i:$.v.W("M O a Z 3W {0} 3O {1} 2V 5o."),2r:$.v.W("M O a Z 3W {0} 3O {1}."),1C:$.v.W("M O a Z 5j 2X 46 3M 3L {0}."),1t:$.v.W("M O a Z 5d 2X 46 3M 3L {0}.")},3J:N,5a:{3I:7(){6.24=$(6.q.2D);6.4t=6.24.F&&6.24||$(6.U);6.2x=$(6.q.3o).1d(6.q.2D);6.1a={};6.54={};6.1b=0;6.1h={};6.1f={};6.21();p f=(6.2a={});$.P(6.q.2a,7(d,c){$.P(c.1I(/\\s/),7(a,b){f[b]=d})});p e=6.q.1i;$.P(e,7(b,a){e[b]=$.v.1X(a)});7 2N(a){p b=$.19(6[0].L,"v"),3c="4W"+a.1V.1u(/^17/,"");b.q[3c]&&b.q[3c].V(b,6[0])}$(6.U).2K(":3E, :4U, :4T, 2e, 4S","2d 2J 4R",2N).2K(":3C, :3A, 2e, 3z","3e",2N);l(6.q.3w)$(6.U).2I("1f-L.17",6.q.3w)},L:7(){6.3v();$.H(6.1a,6.1v);6.1f=$.H({},6.1v);l(!6.J())$(6.U).3u("1f-L",[6]);6.1m();8 6.J()},3v:7(){6.2H();Q(p i=0,14=(6.2b=6.14());14[i];i++){6.29(14[i])}8 6.J()},I:7(a){a=6.2G(a);6.4A=a;6.2P(a);6.2b=$(a);p b=6.29(a);l(b){T 6.1f[a.u]}12{6.1f[a.u]=w}l(!6.3q()){6.13=6.13.1d(6.2x)}6.1m();8 b},1m:7(b){l(b){$.H(6.1v,b);6.S=[];Q(p c 11 b){6.S.27({1j:b[c],I:6.26(c)[0]})}6.1n=$.3n(6.1n,7(a){8!(a.u 11 b)})}6.q.1m?6.q.1m.V(6,6.1v,6.S):6.3m()},2S:7(){l($.2L.2S)$(6.U).2S();6.1a={};6.2H();6.2Q();6.14().2v(6.q.1c)},3q:7(){8 6.2k(6.1f)},2k:7(a){p b=0;Q(p i 11 a)b++;8 b},2Q:7(){6.2C(6.13).2A()},J:7(){8 6.3j()==0},3j:7(){8 6.S.F},2l:7(){l(6.q.2l){3Q{$(6.3h()||6.S.F&&6.S[0].I||[]).1o(":4N").3g().4M("2d")}3f(e){}}},3h:7(){p a=6.3U;8 a&&$.3n(6.S,7(n){8 n.I.u==a.u}).F==1&&a},14:7(){p a=6,2B={};8 $([]).1d(6.U.14).1o(":1w").1L(":2s, :21, :4I, [4H]").1L(6.q.3l).1o(7(){!6.u&&a.q.2q&&2T.1z&&1z.3r("%o 4G 3K u 4F",6);l(6.u 11 2B||!a.2k($(6).1i()))8 N;2B[6.u]=w;8 w})},2G:7(a){8 $(a)[0]},2z:7(){8 $(6.q.2F+"."+6.q.1c,6.4t)},21:7(){6.1n=[];6.S=[];6.1v={};6.1k=$([]);6.13=$([]);6.2b=$([])},2H:7(){6.21();6.13=6.2z().1d(6.2x)},2P:7(a){6.21();6.13=6.1M(a)},29:7(d){d=6.2G(d);l(6.1E(d)){d=6.26(d.u)[0]}p a=$(d).1i();p c=N;Q(Y 11 a){p b={Y:Y,2n:a[Y]};3Q{p f=$.v.1N[Y].V(6,d.Z.1u(/\\r/g,""),d,b.2n);l(f=="1S-1Y"){c=w;6g}c=N;l(f=="1h"){6.13=6.13.1L(6.1M(d));8}l(!f){6.4B(d,b);8 N}}3f(e){6.q.2q&&2T.1z&&1z.6f("6e 6b 6a 69 I "+d.4z+", 29 47 \'"+b.Y+"\' Y",e);67 e;}}l(c)8;l(6.2k(a))6.1n.27(d);8 w},4y:7(a,b){l(!$.1H)8;p c=6.q.3a?$(a).1H()[6.q.3a]:$(a).1H();8 c&&c.G&&c.G[b]},4w:7(a,b){p m=6.q.G[a];8 m&&(m.2c==4v?m:m[b])},4u:7(){Q(p i=0;i<R.F;i++){l(R[i]!==20)8 R[i]}8 20},2u:7(a,b){8 6.4u(6.4w(a.u,b),6.4y(a,b),!6.q.3k&&a.62||20,$.v.G[b],"<4s>60: 5Z 1j 5Y Q "+a.u+"</4s>")},4B:7(b,a){p c=6.2u(b,a.Y),37=/\\$?\\{(\\d+)\\}/g;l(1g c=="7"){c=c.V(6,a.2n,b)}12 l(37.16(c)){c=1F.W(c.1u(37,\'{$1}\'),a.2n)}6.S.27({1j:c,I:b});6.1v[b.u]=c;6.1a[b.u]=c},2C:7(a){l(6.q.2t)a=a.1d(a.4q(6.q.2t));8 a},3m:7(){Q(p i=0;6.S[i];i++){p a=6.S[i];6.q.39&&6.q.39.V(6,a.I,6.q.1c,6.q.28);6.2E(a.I,a.1j)}l(6.S.F){6.1k=6.1k.1d(6.2x)}l(6.q.1x){Q(p i=0;6.1n[i];i++){6.2E(6.1n[i])}}l(6.q.1K){Q(p i=0,14=6.4p();14[i];i++){6.q.1K.V(6,14[i],6.q.1c,6.q.28)}}6.13=6.13.1L(6.1k);6.2Q();6.2C(6.1k).4o()},4p:7(){8 6.2b.1L(6.4n())},4n:7(){8 $(6.S).4m(7(){8 6.I})},2E:7(a,c){p b=6.1M(a);l(b.F){b.2v().22(6.q.1c);b.1s("4l")&&b.4k(c)}12{b=$("<"+6.q.2F+"/>").1s({"Q":6.34(a),4l:w}).22(6.q.1c).4k(c||"");l(6.q.2t){b=b.2A().4o().5V("<"+6.q.2t+"/>").4q()}l(!6.24.5S(b).F)6.q.4j?6.q.4j(b,$(a)):b.5R(a)}l(!c&&6.q.1x){b.3E("");1g 6.q.1x=="1D"?b.22(6.q.1x):6.q.1x(b)}6.1k=6.1k.1d(b)},1M:7(a){p b=6.34(a);8 6.2z().1o(7(){8 $(6).1s(\'Q\')==b})},34:7(a){8 6.2a[a.u]||(6.1E(a)?a.u:a.4z||a.u)},1E:7(a){8/3C|3A/i.16(a.1V)},26:7(d){p c=6.U;8 $(4i.5P(d)).4m(7(a,b){8 b.L==c&&b.u==d&&b||4g})},1O:7(a,b){23(b.4f.4e()){1e\'2e\':8 $("3z:3p",b).F;1e\'1w\':l(6.1E(b))8 6.26(b.u).1o(\':4h\').F}8 a.F},4d:7(b,a){8 6.32[1g b]?6.32[1g b](b,a):w},32:{"5N":7(b,a){8 b},"1D":7(b,a){8!!$(b,a.L).F},"7":7(b,a){8 b(a)}},K:7(a){8!$.v.1N.15.V(6,$.1p(a.Z),a)&&"1S-1Y"},4c:7(a){l(!6.1h[a.u]){6.1b++;6.1h[a.u]=w}},4b:7(a,b){6.1b--;l(6.1b<0)6.1b=0;T 6.1h[a.u];l(b&&6.1b==0&&6.1l&&6.L()){$(6.U).2s();6.1l=N}12 l(!b&&6.1b==0&&6.1l){$(6.U).3u("1f-L",[6]);6.1l=N}},2h:7(a){8 $.19(a,"2h")||$.19(a,"2h",{2M:4g,J:w,1j:6.2u(a,"1q")})}},1R:{15:{15:w},1J:{1J:w},1B:{1B:w},1A:{1A:w},2j:{2j:w},4a:{4a:w},1G:{1G:w},49:{49:w},1P:{1P:w},2f:{2f:w}},48:7(a,b){a.2c==4v?6.1R[a]=b:$.H(6.1R,a)},3V:7(b){p a={};p c=$(b).1s(\'5H\');c&&$.P(c.1I(\' \'),7(){l(6 11 $.v.1R){$.H(a,$.v.1R[6])}});8 a},3T:7(c){p a={};p d=$(c);Q(Y 11 $.v.1N){p b=d.1s(Y);l(b){a[Y]=b}}l(a.18&&/-1|5G|5C/.16(a.18)){T a.18}8 a},3Y:7(a){l(!$.1H)8{};p b=$.19(a.L,\'v\').q.3a;8 b?$(a).1H()[b]:$(a).1H()},36:7(b){p a={};p c=$.19(b.L,\'v\');l(c.q.1i){a=$.v.1X(c.q.1i[b.u])||{}}8 a},41:7(d,e){$.P(d,7(c,b){l(b===N){T d[c];8}l(b.2R||b.2p){p a=w;23(1g b.2p){1e"1D":a=!!$(b.2p,e.L).F;31;1e"7":a=b.2p.V(e,e);31}l(a){d[c]=b.2R!==20?b.2R:w}12{T d[c]}}});$.P(d,7(a,b){d[a]=$.44(b)?b(e):b});$.P([\'1y\',\'18\',\'1t\',\'1C\'],7(){l(d[6]){d[6]=2Z(d[6])}});$.P([\'2i\',\'2r\'],7(){l(d[6]){d[6]=[2Z(d[6][0]),2Z(d[6][1])]}});l($.v.3J){l(d.1t&&d.1C){d.2r=[d.1t,d.1C];T d.1t;T d.1C}l(d.1y&&d.18){d.2i=[d.1y,d.18];T d.1y;T d.18}}l(d.G){T d.G}8 d},1X:7(a){l(1g a=="1D"){p b={};$.P(a.1I(/\\s/),7(){b[6]=w});a=b}8 a},5A:7(c,a,b){$.v.1N[c]=a;$.v.G[c]=b!=20?b:$.v.G[c];l(a.F<3){$.v.48(c,$.v.1X(c))}},1N:{15:7(c,d,a){l(!6.4d(a,d))8"1S-1Y";23(d.4f.4e()){1e\'2e\':p b=$(d).33();8 b&&b.F>0;1e\'1w\':l(6.1E(d))8 6.1O(c,d)>0;5y:8 $.1p(c).F>0}},1q:7(f,h,j){l(6.K(h))8"1S-1Y";p g=6.2h(h);l(!6.q.G[h.u])6.q.G[h.u]={};g.40=6.q.G[h.u].1q;6.q.G[h.u].1q=g.1j;j=1g j=="1D"&&{1B:j}||j;l(g.2M!==f){g.2M=f;p k=6;6.4c(h);p i={};i[h.u]=f;$.2U($.H(w,{1B:j,3Z:"2Y",3X:"17"+h.u,5w:"5u",19:i,1x:7(d){k.q.G[h.u].1q=g.40;p b=d===w;l(b){p e=k.1l;k.2P(h);k.1l=e;k.1n.27(h);k.1m()}12{p a={};p c=(g.1j=d||k.2u(h,"1q"));a[h.u]=$.44(c)?c(f):c;k.1m(a)}g.J=b;k.4b(h,b)}},j));8"1h"}12 l(6.1h[h.u]){8"1h"}8 g.J},1y:7(b,c,a){8 6.K(c)||6.1O($.1p(b),c)>=a},18:7(b,c,a){8 6.K(c)||6.1O($.1p(b),c)<=a},2i:7(b,d,a){p c=6.1O($.1p(b),d);8 6.K(d)||(c>=a[0]&&c<=a[1])},1t:7(b,c,a){8 6.K(c)||b>=a},1C:7(b,c,a){8 6.K(c)||b<=a},2r:7(b,c,a){8 6.K(c)||(b>=a[0]&&b<=a[1])},1J:7(a,b){8 6.K(b)||/^((([a-z]|\\d|[!#\\$%&\'\\*\\+\\-\\/=\\?\\^X`{\\|}~]|[\\E-\\B\\C-\\x\\A-\\y])+(\\.([a-z]|\\d|[!#\\$%&\'\\*\\+\\-\\/=\\?\\^X`{\\|}~]|[\\E-\\B\\C-\\x\\A-\\y])+)*)|((\\3S)((((\\2m|\\1W)*(\\30\\3R))?(\\2m|\\1W)+)?(([\\3P-\\5q\\45\\42\\5D-\\5E\\3N]|\\5m|[\\5l-\\5k]|[\\5i-\\5K]|[\\E-\\B\\C-\\x\\A-\\y])|(\\\\([\\3P-\\1W\\45\\42\\30-\\3N]|[\\E-\\B\\C-\\x\\A-\\y]))))*(((\\2m|\\1W)*(\\30\\3R))?(\\2m|\\1W)+)?(\\3S)))@((([a-z]|\\d|[\\E-\\B\\C-\\x\\A-\\y])|(([a-z]|\\d|[\\E-\\B\\C-\\x\\A-\\y])([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])*([a-z]|\\d|[\\E-\\B\\C-\\x\\A-\\y])))\\.)+(([a-z]|[\\E-\\B\\C-\\x\\A-\\y])|(([a-z]|[\\E-\\B\\C-\\x\\A-\\y])([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])*([a-z]|[\\E-\\B\\C-\\x\\A-\\y])))\\.?$/i.16(a)},1B:7(a,b){8 6.K(b)||/^(5h?|5M):\\/\\/(((([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])|(%[\\1U-f]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\E-\\B\\C-\\x\\A-\\y])|(([a-z]|\\d|[\\E-\\B\\C-\\x\\A-\\y])([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])*([a-z]|\\d|[\\E-\\B\\C-\\x\\A-\\y])))\\.)+(([a-z]|[\\E-\\B\\C-\\x\\A-\\y])|(([a-z]|[\\E-\\B\\C-\\x\\A-\\y])([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])*([a-z]|[\\E-\\B\\C-\\x\\A-\\y])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])|(%[\\1U-f]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])|(%[\\1U-f]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])|(%[\\1U-f]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)|[\\5e-\\5T]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|X|~|[\\E-\\B\\C-\\x\\A-\\y])|(%[\\1U-f]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.16(a)},1A:7(a,b){8 6.K(b)||!/5U|5c/.16(2w 5b(a))},2j:7(a,b){8 6.K(b)||/^\\d{4}[\\/-]\\d{1,2}[\\/-]\\d{1,2}$/.16(a)},1G:7(a,b){8 6.K(b)||/^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)(?:\\.\\d+)?$/.16(a)},1P:7(a,b){8 6.K(b)||/^\\d+$/.16(a)},2f:7(b,e){l(6.K(e))8"1S-1Y";l(/[^0-9-]+/.16(b))8 N;p a=0,d=0,2g=N;b=b.1u(/\\D/g,"");Q(p n=b.F-1;n>=0;n--){p c=b.59(n);p d=58(c,10);l(2g){l((d*=2)>9)d-=9}a+=d;2g=!2g}8(a%10)==0},43:7(b,c,a){a=1g a=="1D"?a.1u(/,/g,\'|\'):"57|56?g|55";8 6.K(c)||b.65(2w 3t(".("+a+")$","i"))},2o:7(c,d,a){p b=$(a).66(".17-2o").2I("3H.17-2o",7(){$(d).J()});8 c==b.33()}}});$.W=$.v.W})(1F);(7($){p c=$.2U;p d={};$.2U=7(a){a=$.H(a,$.H({},$.53,a));p b=a.3X;l(a.3Z=="2Y"){l(d[b]){d[b].2Y()}8(d[b]=c.1Q(6,R))}8 c.1Q(6,R)}})(1F);(7($){l(!1F.1r.38.2d&&!1F.1r.38.2J&&4i.3G){$.P({3g:\'2d\',3H:\'2J\'},7(b,a){$.1r.38[a]={50:7(){6.3G(b,2y,w)},4Z:7(){6.4Y(b,2y,w)},2y:7(e){R[0]=$.1r.2O(e);R[0].1V=a;8 $.1r.1T.1Q(6,R)}};7 2y(e){e=$.1r.2O(e);e.1V=a;8 $.1r.1T.V(6,e)}})};$.H($.2L,{2K:7(d,e,c){8 6.2I(e,7(a){p b=$(a.4X);l(b.2W(d)){8 c.1Q(b,R)}})}})})(1F);',62,389,"||||||this|function|return|||||||||||||if||||var|settings||||name|validator|true|uFDCF|uFFEF||uFDF0|uD7FF|uF900||u00A0|length|messages|extend|element|valid|optional|form|Please|false|enter|each|for|arguments|errorList|delete|currentForm|call|format|_|method|value||in|else|toHide|elements|required|test|validate|maxlength|data|submitted|pendingRequest|errorClass|add|case|invalid|typeof|pending|rules|message|toShow|formSubmitted|showErrors|successList|filter|trim|remote|event|attr|min|replace|errorMap|input|success|minlength|console|date|url|max|string|checkable|jQuery|number|metadata|split|email|unhighlight|not|errorsFor|methods|getLength|digits|apply|classRuleSettings|dependency|handle|da|type|x09|normalizeRule|mismatch|submitButton|undefined|reset|addClass|switch|labelContainer||findByName|push|validClass|check|groups|currentElements|constructor|focusin|select|creditcard|bEven|previousValue|rangelength|dateISO|objectLength|focusInvalid|x20|parameters|equalTo|depends|debug|range|submit|wrapper|defaultMessage|removeClass|new|containers|handler|errors|hide|rulesCache|addWrapper|errorLabelContainer|showLabel|errorElement|clean|prepareForm|bind|focusout|validateDelegate|fn|old|delegate|fix|prepareElement|hideErrors|param|resetForm|window|ajax|characters|is|than|abort|Number|x0d|break|dependTypes|val|idOrName|submitHandler|staticRules|theregex|special|highlight|meta|cancelSubmit|eventType|defaults|click|catch|focus|findLastActive|button|size|ignoreTitle|ignore|defaultShowErrors|grep|errorContainer|selected|numberOfInvalids|error|find|RegExp|triggerHandler|checkForm|invalidHandler|onsubmit|nothing|option|checkbox|Array|radio|remove|text|makeArray|addEventListener|blur|init|autoCreateRanges|no|to|equal|x7f|and|x01|try|x0a|x22|attributeRules|lastActive|classRules|between|port|metadataRules|mode|originalMessage|normalizeRules|x0c|accept|isFunction|x0b|or|the|addClassRules|numberDE|dateDE|stopRequest|startRequest|depend|toLowerCase|nodeName|null|checked|document|errorPlacement|html|generated|map|invalidElements|show|validElements|parent|field|strong|errorContext|findDefined|String|customMessage|parentNode|customMetaMessage|id|lastElement|formatAndAdd|onfocusout|removeAttrs|cancel|assigned|has|disabled|image|blockFocusCleanup|focusCleanup|can|trigger|visible|onfocusin|label|slice|keyup|textarea|file|password|unshift|on|target|removeEventListener|teardown|setup|appendTo|warn|ajaxSettings|valueCache|gif|jpe|png|parseInt|charAt|prototype|Date|NaN|greater|uE000|unchecked|filled|https|x5d|less|x5b|x23|x21|blank|long|expr|x08|hidden|least|at|json|more|dataType|extension|default|with|addMethod|again|524288|x0e|x1f|same|2147483647|class|card|preventDefault|x7e|credit|ftp|boolean|only|getElementsByName|ISO|insertAfter|append|uF8FF|Invalid|wrap|URL|address|defined|No|Warning|This|title|setDefaults|returning|match|unbind|throw|onclick|checking|when|occured|onkeyup|removeAttr|exception|log|continue".split("|"),0,{})),function(e){e.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(t,n,o){null==n&&(n="Alert"),e.alerts._show(n,t,null,"alert",function(e){o&&o(e)})},confirm:function(t,n,o){null==n&&(n="Confirm"),e.alerts._show(n,t,null,"confirm",function(e){o&&o(e)})},prompt:function(t,n,o,i){null==o&&(o="Prompt"),e.alerts._show(o,t,n,"prompt",function(e){i&&i(e)})},_show:function(t,n,o,i,a){e.alerts._hide(),e.alerts._overlay("show"),e("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>'),e.alerts.dialogClass&&e("#popup_container").addClass(e.alerts.dialogClass);var s=e.browser.msie&&parseInt(e.browser.version)<=6?"absolute":"fixed";switch(e("#popup_container").css({position:s,zIndex:99999,padding:0,margin:0}),e("#popup_title").text(t),e("#popup_content").addClass(i),e("#popup_message").text(n),e("#popup_message").html(e("#popup_message").text().replace(/\n/g,"<br />")),e("#popup_container").css({minWidth:e("#popup_container").outerWidth(),maxWidth:e("#popup_container").outerWidth()}),e.alerts._reposition(),e.alerts._maintainPosition(!0),i){case"alert":e("#popup_message").after('<div id="popup_panel"><button type="button" id="popup_ok" class="btn btn-primary">'+e.alerts.okButton+"</button></div>"),e("#popup_ok").click(function(){e.alerts._hide(),a(!0)}),e("#popup_ok").focus().keypress(function(t){13!=t.keyCode&&27!=t.keyCode||e("#popup_ok").trigger("click")});break;case"confirm":e("#popup_message").after('<div id="popup_panel"><div id="popup_panel"><button type="button" id="popup_ok" class="btn btn-primary">'+e.alerts.okButton+'</button> <button type="button" id="popup_cancel" class="btn">'+e.alerts.cancelButton+"</button></div>"),e("#popup_ok").click(function(){e.alerts._hide(),a&&a(!0)}),e("#popup_cancel").click(function(){e.alerts._hide(),a&&a(!1)}),e("#popup_ok").focus(),e("#popup_ok, #popup_cancel").keypress(function(t){13==t.keyCode&&e("#popup_ok").trigger("click"),27==t.keyCode&&e("#popup_cancel").trigger("click")});break;case"prompt":e("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><button type="button" id="popup_ok" class="btn btn-primary">'+e.alerts.okButton+'</button> <button type="button" id="popup_cancel" class="btn">'+e.alerts.cancelButton+"</button></div>"),e("#popup_prompt").width(e("#popup_message").width()),e("#popup_ok").click(function(){var t=e("#popup_prompt").val();e.alerts._hide(),a&&a(t)}),e("#popup_cancel").click(function(){e.alerts._hide(),a&&a(null)}),e("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(t){13==t.keyCode&&e("#popup_ok").trigger("click"),27==t.keyCode&&e("#popup_cancel").trigger("click")}),o&&e("#popup_prompt").val(o),e("#popup_prompt").focus().select()}if(e.alerts.draggable)try{e("#popup_container").draggable({handle:e("#popup_title")}),e("#popup_title").css({cursor:"move"})}catch(r){}},_hide:function(){e("#popup_container").remove(),e.alerts._overlay("hide"),e.alerts._maintainPosition(!1)},_overlay:function(t){switch(t){case"show":e.alerts._overlay("hide"),e("BODY").append('<div id="popup_overlay"></div>');break;case"hide":e("#popup_overlay").remove()}},_reposition:function(){var t=e(window).height()/2-e("#popup_container").outerHeight()/2+e.alerts.verticalOffset,n=e(window).width()/2-e("#popup_container").outerWidth()/2+e.alerts.horizontalOffset;t<0&&(t=0),n<0&&(n=0),e.browser.msie&&parseInt(e.browser.version)<=6&&(t+=e(window).scrollTop()),e("#popup_container").css({top:t+"px",left:n+"px"}),e("#popup_overlay").height(e(document).height())},_maintainPosition:function(t){if(e.alerts.repositionOnResize)switch(t){case!0:e(window).bind("resize",e.alerts._reposition);break;case!1:e(window).unbind("resize",e.alerts._reposition)}}}}(jQuery),jAlert=function(e,t,n){$.alerts.alert(e,t,n)},jConfirm=function(e,t,n){$.alerts.confirm(e,t,n)},jPrompt=function(e,t,n,o){$.alerts.prompt(e,t,n,o)},jQuery.fn.colorize=function(e){function t(e,t){for(var n=[],o=0;o<e.length;o++)e[o].cellIndex==t&&n.push(e[o]);return n}function n(e,n,o){
var i=t(e,n);jQuery.each(i,function(e,t){o.call(t)})}function o(e,t,o){n(e,t.cellIndex,o)}function i(e){var t=this.onfire?c.stopHighlight:c.highlight;o(e,this,t)}function a(e){row=jQuery(this).parent().get(0),row.onfire?c.stopHighlight.call(row):c.highlight.call(row)}function s(e){o(e,this,c.highlight),e.clicked>-1&&n(e,e.clicked,c.stopHighlight),e.clicked=this.cellIndex}function r(e){row=jQuery(this).parent().get(0),c.highlight.call(row),e.clicked&&c.stopHighlight.call(jQuery(e.clicked).parent().get(0)),e.clicked=this}function l(){return jQuery.inArray(this.cellIndex,options.banColumns)!=-1}options={altColor:"#FCFCFC",bgColor:"#F6F6F6",hoverColor:"#F0F8FB",hiliteColor:"none",oneClick:!1,columns:!1,banColumns:[]},jQuery.extend(options,e);var c={checkHover:function(){this.onfire||(this.origColor=this.style.backgroundColor,this.style.backgroundColor=options.hoverColor)},checkHoverOut:function(){this.onfire||(this.style.backgroundColor=this.origColor)},highlight:function(){"none"!=options.hiliteColor&&(this.style.backgroundColor=options.hiliteColor,this.onfire=!0)},stopHighlight:function(){this.onfire=!1,this.style.backgroundColor=this.origColor}};return jQuery(this).each(function(){jQuery(this).find("tbody tr:odd").css("background",options.bgColor),jQuery(this).find("tbody tr:even").css("background",options.altColor);var e=jQuery(this).find("td,th");e.clicked=null,options.columns?jQuery.each(e,function(t,n){n.onmouseover=function(){o(e,this,c.checkHover)},n.onmouseout=function(){o(e,this,c.checkHoverOut)},n.onclick=function(){l.call(this)||(options.oneClick?s.call(this,e):i.call(this,e))}}):jQuery.each(e,function(t,n){row=jQuery(n).parent().get(0),"thead"!=this.parentNode.parentNode.tagName.toLowerCase()&&(row.onmouseover=c.checkHover),row.onmouseout=c.checkHoverOut,n.onclick=function(){l.call(this)||(options.oneClick?r.call(this,e):a.call(this,e))}})})},function(e){var t={};t.setKinetic=function(e){kinetic=e},t.deadSession=function(t){var n=e.Wall.config();e.Socket.destroy(),e.Utils.QuickReg.dialog(n.MainFlowID,0,1,t||"Your session has expired. Please login again.")},t.exitStorm=function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],n=e.Wall.config();if(e.Windows.isApp("uwp-surfacehub")&&!t&&n.claimable)return e.Windows.claimStormDialog(!0),!0;var o=$("body");o.hasClass("bigscreen")?(o.addClass("page-exiting"),setTimeout(function(){window.location=e.Windows.isApp("uwp-surfacehub")?"/win/app":"/"},250)):window.location="/"},t.newStorm=function(){window.location="/storms/setup"},t.componentToHex=function(e){var t=e.toString(16);return console.log(e,t),1==t.length?"0"+t:t},t.log=function(e){var t=$("#boundary").wall("config");window.console&&t.debug&&console.log(e)},t.debug=function(e){var t=$("#boundary").wall("config");window.console&&t.debug&&console.debug(e)},t.error=function(){},t.hideBubbles=function(){$(".dg-vote").remove(),$(".dropdown-menu, .bubble").hide().trigger("hiding-menu"),$(".boundary.active").parent().css({overflow:"auto"}),$("#imgPreviewContainer").trigger("mouseout"),$("input.photo-title").length>0&&$("input.photo-title").each(function(){e.Idea.Image.cancelEditTitle.call($(this).parents(".idea:first"))}),$("li.indexcardcreator").filter(function(){return""==$(this).find("input:first").val()}).remove(),$(".boundarynode").filter(":data(draggable)").draggable("enable"),e.Storm.doSelectedLinks()},t.countwordchar=function(e){var t=e.split(" "),n=0;return $.each(t,function(e,t){t.length>18&&n++}),n},t.nl2br=function(e){return(e+"").replace(/([^>])\n/g,"$1<br />\n")},t.replaceURLWithHTMLLinks=function(e,t){return e&&(t=parseInt(t||24),e=e.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(e){var n=e;return n.match("^https?://")||(n="http://"+n),e.length>t&&(e=e.substr(0,t-3)+"..."),'<a rel="no-follow" target="_blank" class="urltip" title="'+n+'" href="'+n+'">'+e+"</a>"})),e},t.topz=function(){var e=0;return $(".boundarynode",".boundary.active").each(function(){if($(this).hasClass("search-match"))return 0;var t;t=isNaN(t=parseInt($(this).css("z-index"),10))?0:t,t>e&&(e=t)}),e},t.nextz=function(){var e=t.topz();return++e},t.stripTags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(o,"").replace(n,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})},t.getHostName=function(e){var t=/^https?:\/\//i,n=/^www\./i,o=/^[^\/]+/;e=e.replace(t,""),e=e.replace(n,""),"/"===e.charAt(0)&&(e=window.location.hostname+e);var i=e.match(o);return i?i[0]:null},t.getYoutubeID=function(e){var t="";return e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(t=e[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=e,t},e.Utils.Helpers=t}(Stormboard),function(e){var t={};t.scale=!0,t.speedMultiplier=15;var n=!1,o=5,i="easeOutQuad",a={};t.allow=function(e){return!1},t.start=function(e,t,n,o,i){if(!this.allow(e))return!1},t.move=function(e,t,n,o,i){if(!this.allow(e))return!1},t.stop=function(e,t,n,o,i){if(!this.allow(e))return!1},e.Utils.Inertia=t}(Stormboard),function(e,t){var n={};n.dialog=function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],n=$("#dg_general"),o=t;if(!t){var i=e.Wall.config();o=i.FlowID,e.Utils.Helpers.hideBubbles()}return n.html("<div style='width:100%;text-align:center;margin-top:150px;'>Loading<br /><img align='absmiddle' src='/images/loading-wide.gif' /></div>").load("/users/invite?StormID="+o).css("display","").dialog({title:"Share this storm by link or email",modal:!0,width:780,minHeight:550,open:function a(){setTimeout(function(){$("#stormkeyhash").select()},800),$(".ui-widget-overlay:last").addClass("ontop")},create:function s(e,t){n.parent().addClass("ontop dg-fixed-center dg-responsive").css({top:50}),n.addClass("dialog-share")},beforeClose:function r(){$(".ui-widget-overlay").removeClass("ontop")},close:function l(){$(".ui-widget-overlay").removeClass("ontop"),n.removeClass("dialog-share").html("").parent().removeClass("ontop dg-fixed-center dg-responsive"),$(this).dialog("destroy"),$(".autocomplete-users").remove()}}),!1},t.Invite=n}(Stormboard,Stormboard.Utils),function(e,t){var n={};n.dialog=function(t,n,o,i){o=o||!1,doactivity=!1,i=i||!1,$.ajax({type:"GET",url:"/index.php",data:"option=main&task=quickreg&embed="+n+"&stormid="+t,success:function a(t){0==$("#dg_quickreg").length&&$("body").append("<div id='dg_quickreg'></div>"),$("#dg_quickreg").html(t).css("display","").dialog({title:"Register / Login",modal:!0,width:600,create:function n(e,t){$("#dg_quickreg").parent().addClass("ontop dg-fixed-center dg-responsive")},open:function a(){o&&$("#dg_quickreg").parent().find(".ui-dialog-titlebar-close").hide(),i&&($("#dg_quickreg").parent().addClass("ontop"),$(".ui-widget-overlay").addClass("ontop"),$("#dg_quickreg").prepend("<div class='label label-danger' style='display:block;width:98%;margin:0px auto 10px;font-size:100%;padding:5px;'>"+i+"</div>"));var t=e.Utils.Store.get("app-user",!1);t&&($("#uname").val(t.uname||""),$("#upw").val(t.upw||""));var n=e.Utils.Store.get("app-type",!1);n&&$("#frmQuickRegLogin").prepend('<input type="hidden" name="app-type" value="'+n+'">')},beforeClose:function s(){if(o)return!1},close:function r(){$(this).dialog("destroy")}}),hideLoading()},dataType:"html"})},t.QuickReg=n}(Stormboard,Stormboard.Utils),function(e,t){var n=!1,o={},i=function s(){return!!window.localStorage&&(n||(n=JSON.parse(localStorage.sbStore||"{}")),n)},a=function r(){var e=JSON.stringify(n);localStorage.sbStore=e};o.get=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=i();return n&&n.hasOwnProperty(e)?n[e]:t},o.set=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=i();n&&(n[e]=t,a())},t.Store=o}(Stormboard,Stormboard.Utils),function(e){e.Utils.testSocket=function(){if(!e.Socket.isConnected()){var t="window.location='/main/help#help79'";e.Windows.isApp()&&(t="window.open('/main/help#help79', 'sockethelp');"),$("#app-container").append("<div class='socket-failed'><div><div>Unable to connect to realtime server...<br>What does this mean? <button type='button' class='btn btn-success' onclick=\""+t+"\">Find Out Here</button></div><button type='button' class='btn btn-default' wall-route='exit' aria-haspopup='true'>Exit Storm</button></div></div>"),$(".socket-failed").fadeIn(300)}}}(Stormboard),function(e){"use strict";function t(e){var t=$.extend({closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},e);for(var n in t)toastr.options[n]=t[n]}var n={};n.success=function(e,n){t(n),toastr.success(e)},n.info=function(e,n){t(n),toastr.info(e)},n.warning=function(e,n){t(n),toastr.warning(e)},n.error=function(e,n){t(n),toastr.error(e||"An unexpected error has occurred")},e.Utils.Toast=n}(window.Stormboard),function(e){e.Utils.v3upgrade=function(t){return t.user&&t.user.a?void $.ajax({url:"/storms/v3upgrade?StormID="+t.FlowID,dataType:"json",success:function(n){1==n.success?($(".participant[user_id!='"+t.user.id+"']",".users-active").each(function(){e.Socket.emit("ReloadMe",{user_id:$(this).attr("user_id")})}),e.Utils.Toast.info("Reconfiguring Storm...<br>This storm will reload momentarily.",{timeOut:1e5}),setTimeout(function(){window.location="/storms/sort/"+t.FlowID},1e3)):jAlert(n.msg||"An unknown error has occurred.")}}):(jAlert("You must be a storm administrator to upgrade this storm."),!1)},e.Utils.confirmV3Upgrade=function(t){jConfirm("<p>Stormboard has been upgraded with many exciting features that this storm doesn't take advantage of.</p><p>Read more about it in this <a href='http://blog.stormboard.com/2014/03/stormboard-20-feature-upgrade.html' target='_blank'>blog post</a>.</p><p><b>WARNING:</b> Sticky notes are bigger in the new version. You'll need to adjust the position of your ideas as they will be overlapping due to the new size.</p><p>Upgrade now?</p>","Upgrade This Storm",function(n){n&&e.Utils.v3upgrade(t)})}}(Stormboard),function(e){e.Utils.validate=function(){var e,t,n,o;return e=$("#boundary").data("wall"),t=e.permissions||{},1==arguments.length?t[arguments[0]]||!1:2==arguments.length&&"apps"==arguments[0]?(n=t.apps,!("object"!=typeof n||n.length<=0)&&$.inArray(arguments[1],n)>=0):2==arguments.length&&"ideatypes"==arguments[0]?(o=t.ideatypes,!("object"!=typeof o||o.length<=0)&&(o[arguments[1]]||!1)):void 0}}(Stormboard);var qq=qq||{};qq.extend=function(e,t){for(var n in t)e[n]=t[n]},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var o=e.length;for(n<0&&(n+=o);n<o;n++)if(n in e&&e[n]===t)return n;return-1},qq.getUniqueId=function(){var e=0;return function(){return e++}}(),qq.attach=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},qq.detach=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n)},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)},qq.remove=function(e){e.parentNode.removeChild(e)},qq.contains=function(e,t){return e==t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)))},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.css=function(e,t){null!=t.opacity&&"string"!=typeof e.style.opacity&&"undefined"!=typeof e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t)},qq.hasClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)},qq.addClass=function(e,t){qq.hasClass(e,t)||(e.className+=" "+t)},qq.removeClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(e,t){e.innerText=t,e.textContent=t},qq.children=function(e){for(var t=[],n=e.firstChild;n;)1==n.nodeType&&t.push(n),n=n.nextSibling;return t},qq.getByClass=function(e,t){if(e.querySelectorAll)return e.querySelectorAll("."+t);for(var n=[],o=e.getElementsByTagName("*"),i=o.length,a=0;a<i;a++)qq.hasClass(o[a],t)&&n.push(o[a]);return n},qq.obj2url=function(e,t,n){var o=[],i="&",a=function(e,n){var i=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!=i&&"undefined"!=n&&o.push("object"==typeof e?qq.obj2url(e,i,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(i)+"="+encodeURIComponent(e()):encodeURIComponent(i)+"="+encodeURIComponent(e))};if(!n&&t)i=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",o.push(t),o.push(qq.obj2url(e));else if("[object Array]"===Object.prototype.toString.call(e)&&"undefined"!=typeof e)for(var s=0,r=e.length;s<r;++s)a(e[s],s);else if("undefined"!=typeof e&&null!==e&&"object"==typeof e)for(var s in e)a(e[s],s);else o.push(encodeURIComponent(t)+"="+encodeURIComponent(e));return o.join(i).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(e){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(e,t){},onProgress:function(e,t,n,o){},onComplete:function(e,t,n){},onCancel:function(e,t){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(e){alert(e)}},qq.extend(this._options,e),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(e){this._options.params=e},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(e){var t=this;return new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(e){t._onInputChange(e)}})},_createUploadHandler:function(){var e=this,t;t=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm";var n=new qq[t]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(t,n,o,i){e._onProgress(t,n,o,i),e._options.onProgress(t,n,o,i)},onComplete:function(t,n,o){e._onComplete(t,n,o),e._options.onComplete(t,n,o)},onCancel:function(t,n){e._onCancel(t,n),e._options.onCancel(t,n)}});return n},_preventLeaveInProgress:function(){var e=this;qq.attach(window,"beforeunload",function(t){if(e._filesInProgress){var t=t||window.event;return t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave}})},_onSubmit:function(e,t){this._filesInProgress++},_onProgress:function(e,t,n,o){},_onComplete:function(e,t,n){this._filesInProgress--,n.error&&this._options.showMessage(n.error)},_onCancel:function(e,t){this._filesInProgress--},_onInputChange:function(e){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(e.files):this._validateFile(e)&&this._uploadFile(e),this._button.reset()},_uploadFileList:function(e){for(var t=0;t<e.length;t++)if(!this._validateFile(e[t]))return;for(var t=0;t<e.length;t++)this._uploadFile(e[t])},_uploadFile:function(e){var t=this._handler.add(e),n=this._handler.getName(t);this._options.onSubmit(t,n)!==!1&&(this._onSubmit(t,n),this._handler.upload(t,this._options.params))},_validateFile:function(e){var t,n;return e.value?t=e.value.replace(/.*(\/|\\)/,""):(t=null!=e.fileName?e.fileName:e.name,n=null!=e.fileSize?e.fileSize:e.size),this._isAllowedExtension(t)?0===n?(this._error("emptyError",t),!1):n&&this._options.sizeLimit&&n>this._options.sizeLimit?(this._error("sizeError",t),!1):!(n&&n<this._options.minSizeLimit)||(this._error("minSizeError",t),!1):(this._error("typeError",t),!1)},_error:function(e,t){function n(e,t){o=o.replace(e,t)}var o=this._options.messages[e];n("{file}",this._formatFileName(t)),n("{extensions}",this._options.allowedExtensions.join(", ")),n("{sizeLimit}",this._formatSize(this._options.sizeLimit)),n("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),this._options.showMessage(o)},_formatFileName:function(e){return e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-13)),e},_isAllowedExtension:function(e){var t=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"",n=this._options.allowedExtensions;if(!n.length)return!0;for(var o=0;o<n.length;o++)if(n[o].toLowerCase()==t)return!0;return!1},_formatSize:function(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}},qq.FileUploader=function(e){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span></span></div><div class="qq-upload-button"><button type="button" style="padding:3px 4px;">Select a Photo</button></div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><div class="qq-upload-spinner"><img src="/images/loading-squares.gif" /></div> <div class="qq-upload-file"></div><br /><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}}),qq.extend(this._options,e),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),this._bindCancelEvent()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(e,t){var n=qq.getByClass(e,this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_setupDragDrop:function(){var e=this,t=this._find(this._element,"drop"),n=new qq.UploadDropZone({element:t,onEnter:function(n){qq.addClass(t,e._classes.dropActive),n.stopPropagation()},onLeave:function(e){e.stopPropagation()},onLeaveNotDescendants:function(n){qq.removeClass(t,e._classes.dropActive)},onDrop:function(n){t.style.display="none",qq.removeClass(t,e._classes.dropActive),e._uploadFileList(n.dataTransfer.files)}});t.style.display="none",qq.attach(document,"dragenter",function(e){n._isValidFileDrag(e)&&(t.style.display="block")}),qq.attach(document,"dragleave",function(e){if(n._isValidFileDrag(e)){var o=document.elementFromPoint(e.clientX,e.clientY);o&&"HTML"!=o.nodeName||(t.style.display="none")}})},_onSubmit:function(e,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,o){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var i=this._getItemByFileId(e),a=this._find(i,"size");a.style.display="inline";var s;s=n!=o?Math.round(n/o*100)+"% from "+this._formatSize(o):this._formatSize(o)},_onComplete:function(e,t,n){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var o=this._getItemByFileId(e);qq.remove(this._find(o,"cancel")),qq.remove(this._find(o,"spinner")),n.success?qq.addClass(o,this._classes.success):qq.addClass(o,this._classes.fail)},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);n.qqFileId=e;var o=this._find(n,"file");this._find(n,"size").style.display="none",this._listElement.appendChild(n)},_getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},_bindCancelEvent:function(){var e=this,t=this._listElement;qq.attach(t,"click",function(t){t=t||window.event;var n=t.target||t.srcElement;if(qq.hasClass(n,e._classes.cancel)){qq.preventDefault(t);var o=n.parentNode;e._handler.cancel(o.qqFileId),qq.remove(o)}})}}),qq.UploadDropZone=function(e){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(this._options,e),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(e){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var e=this;qq.attach(e._element,"dragover",function(t){if(e._isValidFileDrag(t)){var n=t.dataTransfer.effectAllowed;"move"==n||"linkMove"==n?t.dataTransfer.dropEffect="move":t.dataTransfer.dropEffect="copy",t.stopPropagation(),t.preventDefault()}}),qq.attach(e._element,"dragenter",function(t){e._isValidFileDrag(t)&&e._options.onEnter(t)}),qq.attach(e._element,"dragleave",function(t){if(e._isValidFileDrag(t)){e._options.onLeave(t);var n=document.elementFromPoint(t.clientX,t.clientY);qq.contains(this,n)||e._options.onLeaveNotDescendants(t)}}),qq.attach(e._element,"drop",function(t){e._isValidFileDrag(t)&&(t.preventDefault(),e._options.onDrop(t))})},_isValidFileDrag:function(e){var t=e.dataTransfer,n=navigator.userAgent.indexOf("AppleWebKit")>-1;return t&&"none"!=t.effectAllowed&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}},qq.UploadButton=function(e){this._options={element:null,multiple:!1,name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,e),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");this._options.multiple&&e.setAttribute("multiple","multiple"),e.setAttribute("type","file"),e.setAttribute("name",this._options.name);var t=$("input[type=file]:first",this._element);t.length>0&&t.attr("accept")&&e.setAttribute("accept",t.attr("accept")),qq.css(e,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(e);var n=this;return qq.attach(e,"change",function(){n._options.onChange(e)}),qq.attach(e,"mouseover",function(){qq.addClass(n._element,n._options.hoverClass)}),qq.attach(e,"mouseout",function(){qq.removeClass(n._element,n._options.hoverClass)}),qq.attach(e,"focus",function(){qq.addClass(n._element,n._options.focusClass)}),qq.attach(e,"blur",function(){qq.removeClass(n._element,n._options.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}},qq.UploadHandlerAbstract=function(e){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(e,t,n,o){},onComplete:function(e,t,n){},onCancel:function(e,t){}},qq.extend(this._options,e),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={log:function(e){this._options.debug&&window.console&&console.log("[uploader] "+e)},add:function(e){},upload:function(e,t){var n=this._queue.push(e),o={};qq.extend(o,t),this._params[e]=o,n<=this._options.maxConnections&&this._upload(e,this._params[e])},cancel:function(e){this._cancel(e),this._dequeue(e)},cancelAll:function(){for(var e=0;e<this._queue.length;e++)this._cancel(this._queue[e]);this._queue=[]},getName:function(e){},getSize:function(e){},getQueue:function(){return this._queue},_upload:function(e){},_cancel:function(e){},_dequeue:function(e){var t=qq.indexOf(this._queue,e);this._queue.splice(t,1);var n=this._options.maxConnections;if(this._queue.length>=n){var o=this._queue[n-1];this._upload(o,this._params[o])}}},qq.UploadHandlerForm=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(e){e.setAttribute("name","qqfile");var t="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[t]=e,e.parentNode&&qq.remove(e),t},getName:function(e){return this._inputs[e].value.replace(/.*(\/|\\)/,"")},_cancel:function(e){this._options.onCancel(e,this.getName(e)),delete this._inputs[e];var t=document.getElementById(e);t&&(t.setAttribute("src","javascript:false;"),qq.remove(t))},_upload:function(e,t){console.log(t);var n=this._inputs[e];if(!n)throw new Error("file with passed id was not added, or already uploaded or cancelled");var o=this.getName(e),i=this._createIframe(e),a=this._createForm(i,t);a.appendChild(n);var s=this;return this._attachLoadEvent(i,function(){s.log("iframe loaded");var t=s._getIframeContentJSON(i);s._options.onComplete(e,o,t),s._dequeue(e),delete s._inputs[e],setTimeout(function(){qq.remove(i)},1)}),a.submit(),qq.remove(a),e},_attachLoadEvent:function(e,t){qq.attach(e,"load",function(){e.parentNode&&(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML||t())})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(err){response={}}return response},_createIframe:function(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e,t){var n=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),o=this._options.action;if(t.action){var o=t.action;delete t.action}var i=qq.obj2url(t,o);return n.setAttribute("action",i),n.setAttribute("target",e.name),n.style.display="none",document.body.appendChild(n),n}}),qq.UploadHandlerXhr=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var e=document.createElement("input");return e.type="file","multiple"in e&&"undefined"!=typeof File&&"undefined"!=typeof(new XMLHttpRequest).upload},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(e){if(!(e instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(e)-1},getName:function(e){var t=this._files[e];return null!=t.fileName?t.fileName:t.name},getSize:function(e){var t=this._files[e];return null!=t.fileSize?t.fileSize:t.size},getLoaded:function(e){return this._loaded[e]||0},_upload:function(e,t){function n(t,n){$.ajax({type:"POST",url:t,data:n,dataType:"json",success:function(t,n,o){s._onComplete(e,o)},error:function(t,n,o){s._onComplete(e,t)}})}var o=this._files[e],i=this.getName(e),a=this.getSize(e);this._loaded[e]=0;var s=this;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&t.encrypted){var r=new FileReader,l=$("#boundary"),c=i.split("."),d="/index.php?option=nodes&task=dropupload&StormID="+t.StormID;t.name=l.wall("encrypt",i),t.ext=c[c.length-1],delete t.qqfile,r.onload=function(e){return function(e){var i=4,a=this.result,s=a.split(",")[0].split(":")[1].split(";")[0];a.match(/^data:image\/(jpeg|png|gif)/)&&(i=0);var r=t;if(r.file=e.target.result,r.encrypted=1,r.meta={filesize:o.size,imagesize:{}},r.aes=1,0===i){var l,c,u,p,h,f=new Image;f.onload=function(){c=document.createElement("canvas"),c.width=f.width,c.height=f.height,p=c.getContext("2d"),p.drawImage(f,0,0),r.file=$("#boundary").wall("encrypt",c.toDataURL()),h=c.getContext("2d");var e=1;f.width>200?e=200/f.width:f.height>200&&(e=200/f.height),c.width=f.width*e,c.height=f.height*e,h.drawImage(f,0,0,f.width,f.height,0,0,c.width,c.height),r.thumb=$("#boundary").wall("encrypt",c.toDataURL()),r.meta.imagesize[0]=this.width,r.meta.imagesize[1]=this.height,r.meta.imagesize.mime=s,n(d,r)},f.src=r.file}else r.file=$("#boundary").wall("encrypt",r.file),n(d,r)}}(o),r.readAsDataURL(o)}else{var u=this._xhrs[e]=new XMLHttpRequest;u.upload.onprogress=function(t){t.lengthComputable&&(s._loaded[e]=t.loaded,s._options.onProgress(e,i,t.loaded,t.total))},u.onreadystatechange=function(){4==u.readyState&&s._onComplete(e,u)},t=t||{},t.qqfile=i;var d=this._options.action;if(t.action){var d=t.action;delete t.action}var p=qq.obj2url(t,d);u.open("POST",p,!0),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("X-File-Name",encodeURIComponent(i)),u.setRequestHeader("Content-Type","application/octet-stream"),u.send(o)}},_onComplete:function(id,xhr){if(this._files[id]){var name=this.getName(id),size=this.getSize(id);if(this._options.onProgress(id,name,size,size),200==xhr.status){this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)}},_cancel:function(e){this._options.onCancel(e,this.getName(e)),this._files[e]=null,this._xhrs[e]&&(this._xhrs[e].abort(),this._xhrs[e]=null)}}),jQuery.fn.pagination=function(e,t){return t=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"<<",next_text:">>",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{}),this.each(function(){function n(){return Math.ceil(e/t.items_per_page)}function o(){var e=Math.ceil(t.num_display_entries/2),o=n(),i=o-t.num_display_entries,a=s>e?Math.max(Math.min(s-e,i),0):0,r=s>e?Math.min(s+e,o):Math.min(t.num_display_entries,o);return[a,r]}function i(e,n){s=e,a();var o=t.callback(e,r);return o||(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0),o}function a(){r.empty();var e=o(),a=n(),l=function(e){return function(t){return i(e,t)}},c=function(e,n){if(e=e<0?0:e<a?e:a-1,n=jQuery.extend({text:e+1,classes:""},n||{}),e==s)var o=$("<span class='current'>"+n.text+"</span>");else var o=$("<a>"+n.text+"</a>").bind("click",l(e)).attr("href",t.link_to.replace(/__id__/,e));n.classes&&o.addClass(n.classes),r.append(o)};if(t.prev_text&&(s>0||t.prev_show_always)&&c(s-1,{text:t.prev_text,classes:"prev"}),e[0]>0&&t.num_edge_entries>0){for(var d=Math.min(t.num_edge_entries,e[0]),u=0;u<d;u++)c(u);t.num_edge_entries<e[0]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(r)}for(var u=e[0];u<e[1];u++)c(u);if(e[1]<a&&t.num_edge_entries>0){a-t.num_edge_entries>e[1]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(r);for(var p=Math.max(a-t.num_edge_entries,e[1]),u=p;u<a;u++)c(u)}t.next_text&&(s<a-1||t.next_show_always)&&c(s+1,{text:t.next_text,classes:"next"})}var s=t.current_page;e=!e||e<0?1:e,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page;var r=jQuery(this);this.selectPage=function(e){i(e)},this.prevPage=function(){return s>0&&(i(s-1),!0)},this.nextPage=function(){return s<n()-1&&(i(s+1),!0)},a()})},function(e,t,n){"use strict";var o,i;if(e.uaMatch=function(e){e=e.toLowerCase();var t=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(iphone)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/i.exec(e)||[];
return{browser:t[3]||t[1]||"",version:t[2]||"0",platform:n[0]||""}},o=e.uaMatch(t.navigator.userAgent),i={},o.browser&&(i[o.browser]=!0,i.version=o.version,i.versionNumber=parseInt(o.version)),o.platform&&(i[o.platform]=!0),(i.android||i.ipad||i.iphone||i["windows phone"])&&(i.mobile=!0),(i.cros||i.mac||i.linux||i.win)&&(i.desktop=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv){var a="msie";o.browser=a,i[a]=!0}if(i.opr){var s="opera";o.browser=s,i[s]=!0}if(i.safari&&i.android){var r="android";o.browser=r,i[r]=!0}i.name=o.browser,i.platform=o.platform,e.browser=i}(jQuery,window),function(e){"use strict";var t="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()),e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in document});var n=function(t,n){return this.settings=n,this.el=t,this.$el=e(t),this._initElements(),this};n.DATA_KEY="kinetic",n.DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,invert:!1,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},n.prototype.start=function(t){this.settings=e.extend(this.settings,t),this.velocity=t.velocity||this.velocity,this.velocityY=t.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},n.prototype.end=function(){this.settings.decelerate=!0},n.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,e.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},n.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(t).css("cursor","")},n.prototype.attach=function(){this.$el.hasClass(t)||(this._attachListeners(this.$el),this.$el.addClass(t).css("cursor",this.settings.cursor))},n.prototype._initElements=function(){this.$el.addClass(t),e.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,e(document).mouseup(e.proxy(this._resetMouse,this)).click(e.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},n.prototype._initEvents=function(){var t=this;this.settings.events={touchStart:function(e){var n;t._useTarget(e.target,e)&&(n=e.originalEvent.touches[0],t.threshold=t._threshold(e.target,e),t._start(n.clientX,n.clientY),e.stopPropagation())},touchMove:function(e){var n;t.mouseDown&&(n=e.originalEvent.touches[0],t._inputmove(n.clientX,n.clientY),e.preventDefault&&e.preventDefault())},inputDown:function(e){t._useTarget(e.target,e)&&(t.threshold=t._threshold(e.target,e),t._start(e.clientX,e.clientY),t.elementFocused=e.target,"IMG"===e.target.nodeName&&e.preventDefault(),e.stopPropagation())},inputEnd:function(e){t._useTarget(e.target,e)&&(t._end(),t.elementFocused=null,e.preventDefault&&e.preventDefault())},inputMove:function(e){t.mouseDown&&(t._inputmove(e.clientX,e.clientY),e.preventDefault&&e.preventDefault())},scroll:function(n){e.isFunction(t.settings.moved)&&t.settings.moved.call(t,t.settings),n.preventDefault&&n.preventDefault()},inputClick:function(e){if(Math.abs(t.velocity)>0)return e.preventDefault(),!1},dragStart:function(e){if(t._useTarget(e.target,e)&&t.elementFocused)return!1},selectStart:function(n){return e.isFunction(t.settings.selectStart)?t.settings.selectStart.apply(t,arguments):!t._useTarget(n.target,n)&&void 0}},this._attachListeners(this.$el,this.settings)},n.prototype._inputmove=function(t,n){var o=this.$el,i=this.el;if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var a=t-this.xpos,s=n-this.ypos;if(this.settings.invert&&(a*=-1,s*=-1),this.threshold>0){var r=Math.sqrt(a*a+s*s);if(this.threshold>r)return;this.threshold=0}this.elementFocused&&(e(this.elementFocused).blur(),this.elementFocused=null,o.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var l=this.scrollLeft(),c=this.scrollTop();this.scrollLeft(this.settings.x?l-a:l),this.scrollTop(this.settings.y?c-s:c),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=t,this.ypos=n,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),e.isFunction(this.settings.moved)&&this.settings.moved.call(this,this.settings)}},n.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity),this.settings.invert&&(this.velocity*=-1,this.velocityY*=-1)},n.prototype._end=function(){this.xpos&&this.prevXPos&&this.settings.decelerate===!1&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},n.prototype._useTarget=function(t,n){return!e.isFunction(this.settings.filterTarget)||this.settings.filterTarget.call(this,t,n)!==!1},n.prototype._threshold=function(t,n){return e.isFunction(this.settings.threshold)?this.settings.threshold.call(this,t,n):this.settings.threshold},n.prototype._start=function(e,t){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=e,this.ypos=t},n.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},n.prototype._decelerateVelocity=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},n.prototype._capVelocity=function(e,t){var n=e;return e>0?e>t&&(n=t):e<0-t&&(n=0-t),n},n.prototype._setMoveClasses=function(e){var t=this.settings,n=this.$el;n.removeClass(t.movingClass.up).removeClass(t.movingClass.down).removeClass(t.movingClass.left).removeClass(t.movingClass.right).removeClass(t.deceleratingClass.up).removeClass(t.deceleratingClass.down).removeClass(t.deceleratingClass.left).removeClass(t.deceleratingClass.right),this.velocity>0&&n.addClass(e.right),this.velocity<0&&n.addClass(e.left),this.velocityY>0&&n.addClass(e.down),this.velocityY<0&&n.addClass(e.up)},n.prototype._move=function(){var t=this._getScroller(),n=t[0],o=this,i=o.settings;i.x&&n.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=i.decelerate?o._decelerateVelocity(this.velocity,i.slowdown):this.velocity)):this.velocity=0,i.y&&n.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=i.decelerate?o._decelerateVelocity(this.velocityY,i.slowdown):this.velocityY)):this.velocityY=0,o._setMoveClasses(i.deceleratingClass),e.isFunction(i.moved)&&i.moved.call(this,i),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){o.moving=!1,o._move()})):o.stop()},n.prototype._getScroller=function(){var t=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(t=e(window)),t},n.prototype.scrollLeft=function(e){var t=this._getScroller();return"number"!=typeof e?t.scrollLeft():(t.scrollLeft(e),void(this.settings.scrollLeft=e))},n.prototype.scrollTop=function(e){var t=this._getScroller();return"number"!=typeof e?t.scrollTop():(t.scrollTop(e),void(this.settings.scrollTop=e))},n.prototype._attachListeners=function(){var t=this.$el,n=this.settings;e.support.touch&&t.bind("touchstart",n.events.touchStart).bind("touchend",n.events.inputEnd).bind("touchmove",n.events.touchMove),t.mousedown(n.events.inputDown).mouseup(n.events.inputEnd).mousemove(n.events.inputMove),t.click(n.events.inputClick).scroll(n.events.scroll).bind("selectstart",n.events.selectStart).bind("dragstart",n.events.dragStart)},n.prototype._detachListeners=function(){var t=this.$el,n=this.settings;e.support.touch&&t.unbind("touchstart",n.events.touchStart).unbind("touchend",n.events.inputEnd).unbind("touchmove",n.events.touchMove),t.unbind("mousedown",n.events.inputDown).unbind("mouseup",n.events.inputEnd).unbind("mousemove",n.events.inputMove),t.unbind("click",n.events.inputClick).unbind("scroll",n.events.scroll).unbind("selectstart",n.events.selectStart).unbind("dragstart",n.events.dragStart)},e.Kinetic=n,e.fn.kinetic=function(t,o){return this.each(function(){var i=e(this),a=i.data(n.DATA_KEY),s=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);a||i.data(n.DATA_KEY,a=new n(this,s)),"string"==typeof t&&a[t](o)})}}(window.jQuery||window.Zepto),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i=t||window.event,a=s.call(arguments,1),c=0,u=0,p=0,h=0,f=0,m=0;if(t=e.event.fix(i),t.type="mousewheel","detail"in i&&(p=i.detail*-1),"wheelDelta"in i&&(p=i.wheelDelta),"wheelDeltaY"in i&&(p=i.wheelDeltaY),"wheelDeltaX"in i&&(u=i.wheelDeltaX*-1),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(u=p*-1,p=0),c=0===p?u:p,"deltaY"in i&&(p=i.deltaY*-1,c=p),"deltaX"in i&&(u=i.deltaX,0===p&&(c=u*-1)),0!==p||0!==u){if(1===i.deltaMode){var v=e.data(this,"mousewheel-line-height");c*=v,p*=v,u*=v}else if(2===i.deltaMode){var g=e.data(this,"mousewheel-page-height");c*=g,p*=g,u*=g}if(h=Math.max(Math.abs(p),Math.abs(u)),(!l||h<l)&&(l=h,o(i,h)&&(l/=40)),o(i,h)&&(c/=40,u/=40,p/=40),c=Math[c>=1?"floor":"ceil"](c/l),u=Math[u>=1?"floor":"ceil"](u/l),p=Math[p>=1?"floor":"ceil"](p/l),d.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();f=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=u,t.deltaY=p,t.deltaFactor=l,t.offsetX=f,t.offsetY=m,t.deltaMode=0,a.unshift(t,c,u,p),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){l=null}function o(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice,r,l;if(e.event.fixHooks)for(var c=i.length;c;)e.event.fixHooks[i[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),o=n["offsetParent"in e.fn?"offsetParent":"parent"]();return o.length||(o=e("body")),parseInt(o.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){e.extend(e.fn,{pstrength:function(t){var t=e.extend({verdects:["Very weak","Weak","Medium","Strong","Very strong"],colors:["#f00","#c06","#f60","#3c0","#3f0"],scores:[10,15,30,40],common:["password","sex","god","123456","123","liverpool","letmein","qwerty","monkey"],minchar:6},t);return this.each(function(){var n=e(this).attr("id");e(this).after('<div class="pstrength-minchar" id="'+n+'_minchar">Minimum number of characters is '+t.minchar+"</div>"),e(this).after('<div class="pstrength-info" id="'+n+'_text"></div>'),e(this).after('<div class="pstrength-bar" id="'+n+'_bar" style="border: 1px solid white; font-size: 1px; height: 5px; width: 0px;"></div>'),e(this).keyup(function(){e.fn.runPassword(e(this).val(),n,t)})})},runPassword:function(t,n,o){nPerc=e.fn.checkPassword(t,o);var i="#"+n+"_bar",a="#"+n+"_text";nPerc==-200?(strColor="#f00",strText="Unsafe password word!",e(i).css({width:"0%"})):nPerc<0&&nPerc>-199?(strColor="#ccc",strText="Too short",e(i).css({width:"5%"})):nPerc<=o.scores[0]?(strColor=o.colors[0],strText=o.verdects[0],e(i).css({width:"10%"})):nPerc>o.scores[0]&&nPerc<=o.scores[1]?(strColor=o.colors[1],strText=o.verdects[1],e(i).css({width:"25%"})):nPerc>o.scores[1]&&nPerc<=o.scores[2]?(strColor=o.colors[2],strText=o.verdects[2],e(i).css({width:"50%"})):nPerc>o.scores[2]&&nPerc<=o.scores[3]?(strColor=o.colors[3],strText=o.verdects[3],e(i).css({width:"75%"})):(strColor=o.colors[4],strText=o.verdects[4],e(i).css({width:"92%"})),e(i).css({backgroundColor:strColor}),e(a).html("<span style='color: "+strColor+";'>"+strText+"</span>")},checkPassword:function(e,t){var n=0,o=t.verdects[0];e.length<t.minchar?n-=100:e.length>=t.minchar&&e.length<=t.minchar+2?n+=6:e.length>=t.minchar+3&&e.length<=t.minchar+4?n+=12:e.length>=t.minchar+5&&(n+=18),e.match(/[a-z]/)&&(n+=1),e.match(/[A-Z]/)&&(n+=5),e.match(/\d+/)&&(n+=5),e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(n+=7),e.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)&&(n+=5),e.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(n+=7),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(n+=2),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(n+=3),e.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)&&(n+=3);for(var i=0;i<t.common.length;i++)e.toLowerCase()==t.common[i]&&(n=-200);return n}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.fn.jScrollPane=function(t){function n(t,n){function o(n){var a,r,c,d,u,f,m=!1,v=!1;if(H=n,void 0===O)u=t.scrollTop(),f=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),N=t.innerWidth()+ye,R=t.innerHeight(),t.width(N),O=e('<div class="jspPane" />').css("padding",be).append(t.children()),W=e('<div class="jspContainer" />').css({width:N+"px",height:R+"px"}).append(O).appendTo(t);else{if(t.css("width",""),m=H.stickToBottom&&S(),v=H.stickToRight&&q(),d=t.innerWidth()+ye!=N||t.outerHeight()!=R,d&&(N=t.innerWidth()+ye,R=t.innerHeight(),W.css({width:N+"px",height:R+"px"})),!d&&we==Y&&O.outerHeight()==V)return void t.width(N);we=Y,O.css("width",""),t.width(N),W.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}O.css("overflow","auto"),Y=n.contentWidth?n.contentWidth:O[0].scrollWidth,V=O[0].scrollHeight,O.css("overflow",""),X=Y/N,G=V/R,Q=G>1,Z=X>1,Z||Q?(t.addClass("jspScrollable"),a=H.maintainPosition&&(ee||oe),a&&(r=x(),c=C()),i(),s(),l(),a&&(k(v?Y-N:r,!1),_(m?V-R:c,!1)),A(),T(),B(),H.enableKeyboardNavigation&&D(),H.clickOnTrack&&p(),L(),H.hijackInternalLinks&&z()):(t.removeClass("jspScrollable"),O.css({top:0,left:0,width:W.width()-ye}),j(),E(),M(),h()),H.autoReinitialise&&!ge?ge=setInterval(function(){o(H)},H.autoReinitialiseDelay):!H.autoReinitialise&&ge&&clearInterval(ge),u&&t.scrollTop(0)&&_(u,!1),f&&t.scrollLeft(0)&&k(f,!1),t.trigger("jsp-initialised",[Z||Q])}function i(){Q&&(W.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ie=W.find(">.jspVerticalBar"),ae=ie.find(">.jspTrack"),J=ae.find(">.jspDrag"),H.showArrows&&(ce=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",I),de=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",I),H.arrowScrollOnHover&&(ce.bind("mouseover.jsp",d(0,-1,ce)),de.bind("mouseover.jsp",d(0,1,de))),c(ae,H.verticalArrowPositions,ce,de)),re=R,W.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){re-=e(this).outerHeight()}),J.hover(function(){J.addClass("jspHover")},function(){J.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",I),J.addClass("jspActive");var n=t.pageY-J.position().top;return e("html").bind("mousemove.jsp",function(e){m(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",f),!1}),a())}function a(){ae.height(re+"px"),ee=0,se=H.verticalGutter+ae.outerWidth(),O.width(N-se-ye);try{0===ie.position().left&&O.css("margin-left",se+"px")}catch(e){}}function s(){Z&&(W.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ue=W.find(">.jspHorizontalBar"),pe=ue.find(">.jspTrack"),te=pe.find(">.jspDrag"),H.showArrows&&(me=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",I),ve=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",I),H.arrowScrollOnHover&&(me.bind("mouseover.jsp",d(-1,0,me)),ve.bind("mouseover.jsp",d(1,0,ve))),c(pe,H.horizontalArrowPositions,me,ve)),te.hover(function(){te.addClass("jspHover")},function(){te.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",I),te.addClass("jspActive");var n=t.pageX-te.position().left;return e("html").bind("mousemove.jsp",function(e){g(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",f),!1}),he=W.innerWidth(),r())}function r(){W.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){he-=e(this).outerWidth()}),pe.width(he+"px"),oe=0}function l(){if(Z&&Q){var t=pe.outerHeight(),n=ae.outerWidth();re-=t,e(ue).find(">.jspCap:visible,>.jspArrow").each(function(){he+=e(this).outerWidth()}),he-=n,R-=n,N-=t,pe.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),a(),r()}Z&&O.width(W.outerWidth()-ye+"px"),V=O.outerHeight(),G=V/R,Z&&(fe=Math.ceil(1/X*he),fe>H.horizontalDragMaxWidth?fe=H.horizontalDragMaxWidth:fe<H.horizontalDragMinWidth&&(fe=H.horizontalDragMinWidth),te.width(fe+"px"),ne=he-fe,b(oe)),Q&&(le=Math.ceil(1/G*re),le>H.verticalDragMaxHeight?le=H.verticalDragMaxHeight:le<H.verticalDragMinHeight&&(le=H.verticalDragMinHeight),J.height(le+"px"),K=re-le,v(ee))}function c(e,t,n,o){var i="before",a="after",s;"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?a=t:t==a&&(i=t,s=n,n=o,o=s),e[i](n)[a](o)}function d(e,t,n){return function(){return u(e,t,this,n),this.blur(),!1}}function u(t,n,o,i){o=e(o).addClass("jspActive");var a,s,r=!0,l=function(){0!==t&&U.scrollByX(t*H.arrowButtonSpeed),0!==n&&U.scrollByY(n*H.arrowButtonSpeed),s=setTimeout(l,r?H.initialDelay:H.arrowRepeatFreq),r=!1};l(),a=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(a,function(){o.removeClass("jspActive"),s&&clearTimeout(s),s=null,i.unbind(a)})}function p(){h(),Q&&ae.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var n=e(this),o=n.offset(),i=t.pageY-o.top-ee,a,s=!0,r=function(){var e=n.offset(),o=t.pageY-e.top-le/2,c=R*H.scrollPagePercent,d=K*c/(V-R);if(i<0)ee-d>o?U.scrollByY(-c):m(o);else{if(!(i>0))return void l();ee+d<o?U.scrollByY(c):m(o)}a=setTimeout(r,s?H.initialDelay:H.trackClickRepeatFreq),s=!1},l=function(){a&&clearTimeout(a),a=null,e(document).unbind("mouseup.jsp",l)};return r(),e(document).bind("mouseup.jsp",l),!1}}),Z&&pe.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var n=e(this),o=n.offset(),i=t.pageX-o.left-oe,a,s=!0,r=function(){var e=n.offset(),o=t.pageX-e.left-fe/2,c=N*H.scrollPagePercent,d=ne*c/(Y-N);if(i<0)oe-d>o?U.scrollByX(-c):g(o);else{if(!(i>0))return void l();oe+d<o?U.scrollByX(c):g(o)}a=setTimeout(r,s?H.initialDelay:H.trackClickRepeatFreq),s=!1},l=function(){a&&clearTimeout(a),a=null,e(document).unbind("mouseup.jsp",l)};return r(),e(document).bind("mouseup.jsp",l),!1}})}function h(){pe&&pe.unbind("mousedown.jsp"),ae&&ae.unbind("mousedown.jsp")}function f(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),J&&J.removeClass("jspActive"),te&&te.removeClass("jspActive")}function m(n,o){if(Q){n<0?n=0:n>K&&(n=K);var i=new e.Event("jsp-will-scroll-y");if(t.trigger(i,[n]),!i.isDefaultPrevented()){var a=n||0,s=0===a,r=a==K,l=n/K,c=-l*(V-R);void 0===o&&(o=H.animateScroll),o?U.animate(J,"top",n,v,function(){t.trigger("jsp-user-scroll-y",[-c,s,r])}):(J.css("top",n),v(n),t.trigger("jsp-user-scroll-y",[-c,s,r]))}}}function v(e){void 0===e&&(e=J.position().top),W.scrollTop(0),ee=e||0;var n=0===ee,o=ee==K,i=e/K,a=-i*(V-R);_e==n&&$e==o||(_e=n,$e=o,t.trigger("jsp-arrow-change",[_e,$e,ke,xe])),y(n,o),O.css("top",a),t.trigger("jsp-scroll-y",[-a,n,o]).trigger("scroll")}function g(n,o){if(Z){n<0?n=0:n>ne&&(n=ne);var i=new e.Event("jsp-will-scroll-x");if(t.trigger(i,[n]),!i.isDefaultPrevented()){var a=n||0,s=0===a,r=a==ne,l=n/ne,c=-l*(Y-N);void 0===o&&(o=H.animateScroll),o?U.animate(te,"left",n,b,function(){t.trigger("jsp-user-scroll-x",[-c,s,r])}):(te.css("left",n),b(n),t.trigger("jsp-user-scroll-x",[-c,s,r]))}}}function b(e){void 0===e&&(e=te.position().left),W.scrollTop(0),oe=e||0;var n=0===oe,o=oe==ne,i=e/ne,a=-i*(Y-N);ke==n&&xe==o||(ke=n,xe=o,t.trigger("jsp-arrow-change",[_e,$e,ke,xe])),w(n,o),O.css("left",a),t.trigger("jsp-scroll-x",[-a,n,o]).trigger("scroll")}function y(e,t){H.showArrows&&(ce[e?"addClass":"removeClass"]("jspDisabled"),de[t?"addClass":"removeClass"]("jspDisabled"))}function w(e,t){H.showArrows&&(me[e?"addClass":"removeClass"]("jspDisabled"),ve[t?"addClass":"removeClass"]("jspDisabled"))}function _(e,t){var n=e/(V-R);m(n*K,t)}function k(e,t){var n=e/(Y-N);g(n*ne,t)}function $(t,n,o){var i,a,s,r=0,l=0,c,d,u,p,h,f;try{i=e(t)}catch(m){return}for(a=i.outerHeight(),s=i.outerWidth(),W.scrollTop(0),W.scrollLeft(0);!i.is(".jspPane");)if(r+=i.position().top,l+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;c=C(),u=c+R,r<c||n?h=r-H.horizontalGutter:r+a>u&&(h=r-R+a+H.horizontalGutter),isNaN(h)||_(h,o),d=x(),p=d+N,l<d||n?f=l-H.horizontalGutter:l+s>p&&(f=l-N+s+H.horizontalGutter),isNaN(f)||k(f,o)}function x(){return-O.position().left}function C(){return-O.position().top}function S(){var e=V-R;return e>20&&e-C()<10}function q(){var e=Y-N;return e>20&&e-x()<10}function T(){W.unbind(Se).bind(Se,function(e,t,n,o){oe||(oe=0),ee||(ee=0);var i=oe,a=ee,s=e.deltaFactor||H.mouseWheelSpeed;return U.scrollBy(n*s,-o*s,!1),i==oe&&a==ee})}function j(){W.unbind(Se)}function I(){return!1}function A(){O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){$(e.target,!1)})}function E(){O.find(":input,a").unbind("focus.jsp")}function D(){function n(){var e=oe,t=ee;switch(o){case 40:U.scrollByY(H.keyboardSpeed,!1);break;case 38:U.scrollByY(-H.keyboardSpeed,!1);break;case 34:case 32:U.scrollByY(R*H.scrollPagePercent,!1);break;case 33:U.scrollByY(-R*H.scrollPagePercent,!1);break;case 39:U.scrollByX(H.keyboardSpeed,!1);break;case 37:U.scrollByX(-H.keyboardSpeed,!1)}return i=e!=oe||t!=ee}var o,i,a=[];Z&&a.push(ue[0]),Q&&a.push(ie[0]),O.bind("focus.jsp",function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||a.length&&e(t.target).closest(a).length){var s=oe,r=ee;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:o=t.keyCode,n();break;case 35:_(V-R),o=null;break;case 36:_(0),o=null}return i=t.keyCode==o&&s!=oe||r!=ee,!i}}).bind("keypress.jsp",function(t){if(t.keyCode==o&&n(),t.target===this||a.length&&e(t.target).closest(a).length)return!i}),H.hideFocus?(t.css("outline","none"),"hideFocus"in W[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in W[0]&&t.attr("hideFocus",!1))}function M(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),O.unbind(".jsp")}function L(){if(location.hash&&location.hash.length>1){var t,n,o=escape(location.hash.substr(1));try{t=e("#"+o+', a[name="'+o+'"]')}catch(i){return}t.length&&O.find(o)&&(0===W.scrollTop()?n=setInterval(function(){W.scrollTop()>0&&($(t,!0),e(document).scrollTop(W.position().top),clearInterval(n))},50):($(t,!0),e(document).scrollTop(W.position().top)))}}function z(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(t){var n=this.href.substr(0,this.href.indexOf("#")),o=location.href,i,a,s,r,l,c;if(location.href.indexOf("#")!==-1&&(o=location.href.substr(0,location.href.indexOf("#"))),n===o){i=escape(this.href.substr(this.href.indexOf("#")+1));try{a=e("#"+i+', a[name="'+i+'"]')}catch(d){return}a.length&&(s=a.closest(".jspScrollable"),r=s.data("jsp"),r.scrollToElement(a,!0),s[0].scrollIntoView&&(l=e(window).scrollTop(),c=a.offset().top,(c<l||c>l+e(window).height())&&s[0].scrollIntoView()),t.preventDefault())}}))}function F(e){var t=!1;return"pointerdown"===e.originalEvent.type||"pointermove"===e.originalEvent.type?t=e.originalEvent:e.originalEvent.hasOwnProperty("touches")&&(t=e.originalEvent.touches[0]),t}function B(){var e,t,n,o,i,a=!1;W.unbind("touchstart.jsp pointerdown.jsp touchmove.jsp pointermove.jsp touchend.jsp pointerup.jsp click.jsp-touchclick").bind("touchstart.jsp pointerdown.jsp",function(s){var r=F(s);return!!r&&(e=x(),t=C(),n=r.pageX,o=r.pageY,i=!1,void(a=!0))}).bind("touchmove.jsp pointermove.jsp",function(s){var r,l=oe,c=ee;if(a)return!!(r=F(s))&&(U.scrollTo(e+n-r.pageX,t+o-r.pageY),i=i||Math.abs(n-r.pageX)>5||Math.abs(o-r.pageY)>5,l==oe&&c==ee)}).bind("touchend.jsp pointerup.jsp",function(e){a=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function P(){var e=C(),n=x();t.removeClass("jspScrollable").unbind(".jsp"),O.unbind(".jsp"),t.replaceWith(Ce.append(O.children())),Ce.scrollTop(e),Ce.scrollLeft(n),ge&&clearInterval(ge)}var H,U=this,O,N,R,W,Y,V,X,G,Q,Z,J,K,ee,te,ne,oe,ie,ae,se,re,le,ce,de,ue,pe,he,fe,me,ve,ge,be,ye,we,_e=!0,ke=!0,$e=!1,xe=!1,Ce=t.clone(!1,!1).empty(),Se=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===t.css("box-sizing")?(be=0,ye=0):(be=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),ye=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0)),e.extend(U,{reinitialise:function(t){t=e.extend({},H,t),o(t)},scrollToElement:function(e,t,n){$(e,t,n)},scrollTo:function(e,t,n){k(e,n),_(t,n)},scrollToX:function(e,t){k(e,t)},scrollToY:function(e,t){_(e,t)},scrollToPercentX:function(e,t){k(e*(Y-N),t)},scrollToPercentY:function(e,t){_(e*(V-R),t)},scrollBy:function(e,t,n){U.scrollByX(e,n),U.scrollByY(t,n)},scrollByX:function(e,t){var n=x()+Math[e<0?"floor":"ceil"](e),o=n/(Y-N);g(o*ne,t)},scrollByY:function(e,t){var n=C()+Math[e<0?"floor":"ceil"](e),o=n/(V-R);m(o*K,t)},positionDragX:function(e,t){g(e,t)},positionDragY:function(e,t){m(e,t)},animate:function(e,t,n,o,i){var a={};a[t]=n,e.animate(a,{duration:H.animateDuration,easing:H.animateEase,queue:!1,step:o,complete:i})},getContentPositionX:function(){return x()},getContentPositionY:function(){return C()},getContentWidth:function(){return Y},getContentHeight:function(){return V},getPercentScrolledX:function(){return x()/(Y-N)},getPercentScrolledY:function(){return C()/(V-R)},getIsScrollableH:function(){return Z},getIsScrollableV:function(){return Q},getContentPane:function(){return O},scrollToBottom:function(e){m(K,e)},hijackInternalLinks:e.noop,destroy:function(){P()}}),o(n)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var o=e(this),i=o.data("jsp");i?i.reinitialise(t):(e("script",o).filter('[type="text/javascript"],:not([type])').remove(),i=new n(o,t),o.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}),function(e){function t(e,t,n){return Math.abs(e)<n?-e:Math.abs(t)<n?-t:0}function n(e){return e.sort(function(e,t){return e?t?Math.abs(e)-Math.abs(t):-1:1})[0]}function o(e){return parseInt(e.css("margin-left"),10)||0}function i(e){return parseInt(e.css("margin-top"),10)||0}function a(t,n,o){var i=e.ui.resizable.prototype[t];e.ui.resizable.prototype[t]=function(){o&&o.apply(this,arguments),i.apply(this,arguments),n&&n.apply(this,arguments)}}e.extend(e.ui.resizable.prototype.options,{snapTolerance:20,snapMode:"both"}),e.ui.plugin.add("resizable","snap",{start:function(){var t=e(this),n=t.data("ui-resizable"),a=n.options.snap;n.ow=n.helper.outerWidth()-n.size.width,n.oh=n.helper.outerHeight()-n.size.height,n.lm=o(t),n.tm=i(t),n.coords=[],e("string"==typeof a?a:":data(ui-resizable)").each(function(){if(this!=n.element[0]&&this!=n.helper[0]){var t=e(this),a=t.position(),s=a.left+o(t),r=a.top+i(t);n.coords.push({l:s,t:r,r:s+t.outerWidth(),b:r+t.outerHeight()})}})},resize:function(){var o=[],i=[],a=[],s=[],r=e(this).data("ui-resizable"),l=r.axis.split(""),c=r.options.snapTolerance,d=r.options.snapMode,u=r.position.left+r.lm,p=u-c,h=r.position.top+r.tm,f=h-c,m=u+r.size.width+r.ow,v=m+c,g=h+r.size.height+r.oh,b=g+c;if(e.each(r.coords,function(){var n=this,r=Math.min(v,n.r)-Math.max(p,n.l),y=Math.min(b,n.b)-Math.max(f,n.t);r<0||y<0||e.each(l,function(e,l){if("outer"==d)switch(l){case"w":case"e":if(r>2*c)return;break;case"n":case"s":if(y>2*c)return}else if("inner"==d)switch(l){case"w":case"e":if(r<2*c)return;break;case"n":case"s":if(y<2*c)return}switch(l){case"w":o.push(t(u-n.l,u-n.r,c));break;case"n":i.push(t(h-n.t,h-n.b,c));break;case"e":a.push(t(m-n.l,m-n.r,c));break;case"s":s.push(t(g-n.t,g-n.b,c))}})}),s.length&&(r.size.height+=n(s)),a.length&&(r.size.width+=n(a)),o.length){var y=n(o);r.position.left+=y,r.size.width-=y}if(i.length){var y=n(i);r.position.top+=y,r.size.height-=y}}}),a("_mouseStop",null,function(){this._helper&&(this.position={left:parseInt(this.helper.css("left"),10)||.1,top:parseInt(this.helper.css("top"),10)||.1},this.size={width:this.helper.outerWidth(),height:this.helper.outerHeight()})}),a("_mouseStart",function(){this._helper&&(this.size={width:this.size.width-(this.helper.outerWidth()-this.helper.width()),height:this.size.height-(this.helper.outerHeight()-this.helper.height())},this.originalSize={width:this.size.width,height:this.size.height})}),a("_renderProxy",function(){this._helper&&this.helper.css({left:this.elementOffset.left,top:this.elementOffset.top,width:this.element.outerWidth(),height:this.element.outerHeight()})});var s=e.ui.resizable.prototype.plugins.resize;e.each(s,function(e,t){if("ghost"==t[0])return s.splice(e,1),!1}),e.each(e.ui.resizable.prototype.plugins.start,function(t,n){if("ghost"==n[0]){var o=n[1];return n[1]=function(){o.apply(this,arguments),e(this).data("ui-resizable").ghost.css({width:"100%",height:"100%"})},!1}})}(jQuery),function(e){function t(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}function n(e,t){return e[0]>t[0]?-1:e[0]<t[0]?1:0}var a=new Array,s=new Array;e.fn.jqBarGraph=e.fn.jqbargraph=function(s){init=function(t){a[t.id]=e.extend({},e.fn.jqBarGraph.defaults,s),e(t).css({width:a[t.id].width,height:a[t.id].height,position:"relative","text-align":"center"}),doGraph(t)},sum=function(e){total=0;for(val in e)total+=e[val];
return total.toFixed(2)},max=function(e){maxvalue=0;for(var t in e)value=e[t][0],value instanceof Array&&(value=sum(value)),parseFloat(value)>parseFloat(maxvalue)&&(maxvalue=value);return maxvalue},maxMulti=function(e){maxvalue=0,maxvalue2=0;for(var t in e){ar2=e[t][0];for(var n in ar2)ar2[n]>maxvalue2&&(maxvalue2=ar2[n]);maxvalue2>maxvalue&&(maxvalue=maxvalue2)}return maxvalue},doGraph=function(s){if(arr=a[s.id],data=arr.data,void 0==data)return void e(s).html("There is not enought data for graph");"asc"==arr.sort&&data.sort(t),"desc"==arr.sort&&data.sort(n),legend="",prefix=arr.prefix,postfix=arr.postfix,space=arr.barSpace,legendWidth=arr.legend?arr.legendWidth:0,fieldWidth=(e(s).width()-legendWidth)/data.length,totalHeight=e(s).height();var r=new Array;max=max(data),colPosition=0;for(var l in data){if(valueData=data[l][0],valueData instanceof Array?value=sum(valueData):value=valueData,lbl=data[l][1],color=data[l][2],unique=l+s.id,void 0==color&&0==arr.colors&&(color=arr.color),arr.colors&&!color&&(colorsCounter=arr.colors.length,colorsCounter==colPosition&&(colPosition=0),color=arr.colors[colPosition],colPosition++),"multi"==arr.type&&(color="none"),void 0==lbl&&(lbl=arr.lbl),out="<div class='graphField"+s.id+"' id='graphField"+unique+"' style='position: absolute'>",out+="<div class='graphValue"+s.id+"' id='graphValue"+unique+"'>"+prefix+value+postfix+"</div>",out+="<div class='graphBar"+s.id+"' id='graphFieldBar"+unique+"' style='background-color:"+color+";position: relative; overflow: hidden;'></div>",arr.legend&&!arr.legends||(out+="<div class='graphLabel"+s.id+"' id='graphLabel"+unique+"'>"+lbl+"</div>"),out+="</div>",e(s).append(out),totalHeightBar=totalHeight-e(".graphLabel"+s.id).height()-e(".graphValue"+s.id).height(),fieldHeight=totalHeightBar*value/max,e("#graphField"+unique).css({left:fieldWidth*l,width:fieldWidth-space,"margin-left":space}),valueData instanceof Array){"multi"==arr.type?(maxe=maxMulti(data),totalHeightBar=fieldHeight=totalHeight-e(".graphLabel"+s.id).height(),e(".graphValue"+s.id).remove()):maxe=max;for(i in valueData)heig=totalHeightBar*valueData[i]/maxe,wid=parseInt((fieldWidth-space)/valueData.length),sv="",fs=0,arr.showValues&&(sv=arr.prefix+valueData[i]+arr.postfix,fs=12),o="<div class='subBars"+s.id+"' style='height:"+heig+"px; background-color: "+arr.colors[i]+"; left:"+wid*i+"px; color:"+arr.showValuesColor+"; font-size:"+fs+"px' >"+sv+"</div>",e("#graphFieldBar"+unique).prepend(o)}"multi"==arr.type&&e(".subBars"+s.id).css({width:wid,position:"absolute",bottom:0}),"bottom"==arr.position&&e(".graphField"+s.id).css("bottom",0),arr.legends||r.push([color,lbl,s.id,unique]),arr.animate?(e("#graphFieldBar"+unique).css({height:0}),e("#graphFieldBar"+unique).animate({height:fieldHeight},1e3*arr.speed)):e("#graphFieldBar"+unique).css({height:fieldHeight})}for(var c in arr.legends)r.push([arr.colors[c],arr.legends[c],s.id,c]);createLegend(r),arr.legend&&(e(s).append("<div id='legendHolder"+unique+"'></div>"),e("#legendHolder"+unique).css({width:legendWidth,"float":"right","text-align":"left"}),e("#legendHolder"+unique).append(legend),e(".legendBar"+s.id).css({"float":"left",margin:3,height:12,width:20,"font-size":0})),arr.title&&(e(s).wrap("<div id='graphHolder"+unique+"'></div>"),e("#graphHolder"+unique).prepend(arr.title).css({width:arr.width+"px","text-align":"center"}))},createLegend=function(e){legend="";for(var t in e)legend+="<div id='legend"+e[t][3]+"' style='overflow: hidden; zoom: 1;'>",legend+="<div class='legendBar"+e[t][2]+"' id='legendColor"+e[t][3]+"' style='background-color:"+e[t][0]+"'></div>",legend+="<div class='legendLabel"+e[t][2]+"' id='graphLabel"+unique+"'>"+e[t][1]+"</div>",legend+="</div>"},this.each(function(){init(this)})},e.fn.jqBarGraph.defaults={barSpace:10,width:400,height:300,color:"#000000",colors:!1,lbl:"",sort:!1,position:"bottom",prefix:"",postfix:"",animate:!0,speed:1.5,legendWidth:100,legend:!1,legends:!1,type:!1,showValues:!0,showValuesColor:"#fff",title:!1}}(jQuery),LazyLoad=function(e){function t(t,n){var o=e.createElement(t),i;for(i in n)n.hasOwnProperty(i)&&o.setAttribute(i,n[i]);return o}function n(e){var t=c[e],n,o;t&&(n=t.callback,o=t.urls,o.shift(),d=0,o.length||(n&&n.call(t.context,t.obj),c[e]=null,u[e].length&&i(e)))}function o(){var t=navigator.userAgent;r={async:e.createElement("script").async===!0},(r.webkit=/AppleWebKit\//.test(t))||(r.ie=/MSIE|Trident/.test(t))||(r.opera=/Opera/.test(t))||(r.gecko=/Gecko\//.test(t))||(r.unknown=!0)}function i(i,d,p,h,f){var m=function(){n(i)},v="css"===i,g=[],b,y,w,_,k,$;if(r||o(),d)if(d="string"==typeof d?[d]:d.concat(),v||r.async||r.gecko||r.opera)u[i].push({urls:d,callback:p,obj:h,context:f});else for(b=0,y=d.length;b<y;++b)u[i].push({urls:[d[b]],callback:b===y-1?p:null,obj:h,context:f});if(!c[i]&&(_=c[i]=u[i].shift())){for(l||(l=e.head||e.getElementsByTagName("head")[0]),k=_.urls.concat(),b=0,y=k.length;b<y;++b)$=k[b],v?w=r.gecko?t("style"):t("link",{href:$,rel:"stylesheet"}):(w=t("script",{src:$}),w.async=!1),w.className="lazyload",w.setAttribute("charset","utf-8"),r.ie&&!v&&"onreadystatechange"in w&&!("draggable"in w)?w.onreadystatechange=function(){/loaded|complete/.test(w.readyState)&&(w.onreadystatechange=null,m())}:v&&(r.gecko||r.webkit)?r.webkit?(_.urls[b]=w.href,s()):(w.innerHTML='@import "'+$+'";',a(w)):w.onload=w.onerror=m,g.push(w);for(b=0,y=g.length;b<y;++b)l.appendChild(g[b])}}function a(e){var t;try{t=!!e.sheet.cssRules}catch(o){return d+=1,void(d<200?setTimeout(function(){a(e)},50):t&&n("css"))}n("css")}function s(){var e=c.css,t;if(e){for(t=p.length;--t>=0;)if(p[t].href===e.urls[0]){n("css");break}d+=1,e&&(d<200?setTimeout(s,50):n("css"))}}var r,l,c={},d=0,u={css:[],js:[]},p=e.styleSheets;return{css:function(e,t,n,o){i("css",e,t,n,o)},js:function(e,t,n,o){i("js",e,t,n,o)}}}(this.document),function(e,t){function n(e,t){try{if("function"!=typeof e)return e;if(!e.bugsnag){var n=i();e.bugsnag=function(o){if(t&&t.eventHandler&&(_=o),k=n,!x){var i=e.apply(this,arguments);return k=null,i}try{return e.apply(this,arguments)}catch(a){throw u("autoNotify",!0)&&(w.notifyException(a,null,null,"error"),b()),a}finally{k=null}},e.bugsnag.bugsnag=e.bugsnag}return e.bugsnag}catch(o){return e}}function o(){q=!1}function i(){var e=document.currentScript||k;if(!e&&q){var t=document.scripts||document.getElementsByTagName("script");e=t[t.length-1]}return e}function a(e){var t=i();t&&(e.script={src:t.src,content:u("inlineScript",!0)?t.innerHTML:""})}function s(t){var n=u("disableLog"),o=e.console;void 0===o||void 0===o.log||n||o.log("[Bugsnag] "+t)}function r(t,n,o){if(o>=5)return encodeURIComponent(n)+"=[RECURSIVE]";o=o+1||1;try{if(e.Node&&t instanceof e.Node)return encodeURIComponent(n)+"="+encodeURIComponent(g(t));var i=[];for(var a in t)if(t.hasOwnProperty(a)&&null!=a&&null!=t[a]){var s=n?n+"["+a+"]":a,l=t[a];i.push("object"==typeof l?r(l,s,o):encodeURIComponent(s)+"="+encodeURIComponent(l))}return i.join("&")}catch(c){return encodeURIComponent(n)+"="+encodeURIComponent(""+c)}}function l(e,t){if(null==t)return e;e=e||{};for(var n in t)if(t.hasOwnProperty(n))try{t[n].constructor===Object?e[n]=l(e[n],t[n]):e[n]=t[n]}catch(o){e[n]=t[n]}return e}function c(e,t){if(e+="?"+r(t)+"&ct=img&cb="+(new Date).getTime(),"undefined"!=typeof BUGSNAG_TESTING&&w.testRequest)w.testRequest(e,t);else{var n=new Image;n.src=e}}function d(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var o=e.attributes,i=0;i<o.length;i++){var a=o[i];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];t[s]=a.value||a.nodeValue}}return t}function u(e,t){L=L||d(M);var n=void 0!==w[e]?w[e]:L[e.toLowerCase()];return"false"===n&&(n=!1),void 0!==n?n:t}function p(e){return!(!e||!e.match(T))||(s("Invalid API key '"+e+"'"),!1)}function h(t,n){var o=u("apiKey");if(p(o)&&S){S-=1;var i=u("releaseStage","production"),a=u("notifyReleaseStages");if(a){for(var r=!1,d=0;d<a.length;d++)if(i===a[d]){r=!0;break}if(!r)return}var h=[t.name,t.message,t.stacktrace].join("|");if(h!==$){$=h,_&&(n=n||{},n["Last Event"]=v(_));var f={notifierVersion:E,apiKey:o,projectRoot:u("projectRoot")||e.location.protocol+"//"+e.location.host,context:u("context")||e.location.pathname,userId:u("userId"),user:u("user"),metaData:l(l({},u("metaData")),n),releaseStage:i,appVersion:u("appVersion"),url:e.location.href,userAgent:navigator.userAgent,language:navigator.language||navigator.userLanguage,severity:t.severity,name:t.name,message:t.message,stacktrace:t.stacktrace,file:t.file,lineNumber:t.lineNumber,columnNumber:t.columnNumber,payloadVersion:"2"},m=w.beforeNotify;if("function"==typeof m){var g=m(f,f.metaData);if(g===!1)return}return 0===f.lineNumber&&/Script error\.?/.test(f.message)?s("Ignoring cross-domain script error. See https://bugsnag.com/docs/notifiers/js/cors"):void c(u("endpoint")||A,f)}}}function f(){var e,t,n=10,o="[anonymous]";try{throw new Error("")}catch(i){e="<generated>\n",t=m(i)}if(!t){e="<generated-ie>\n";var a=[];try{for(var r=arguments.callee.caller.caller;r&&a.length<n;){var l=j.test(r.toString())?RegExp.$1||o:o;a.push(l),r=r.caller}}catch(c){s(c)}t=a.join("\n")}return e+t}function m(e){return e.stack||e.backtrace||e.stacktrace}function v(e){var t={millisecondsAgo:new Date-e.timeStamp,type:e.type,which:e.which,target:g(e.target)};return t}function g(e){if(e){var t=e.attributes;if(t){for(var n="<"+e.nodeName.toLowerCase(),o=0;o<t.length;o++)t[o].value&&"null"!=t[o].value.toString()&&(n+=" "+t[o].name+'="'+t[o].value+'"');return n+">"}return e.nodeName}}function b(){C+=1,e.setTimeout(function(){C-=1})}function y(t,n,o){var i=t[n],a=o(i);t[n]=a,"undefined"!=typeof BUGSNAG_TESTING&&e.undo&&e.undo.push(function(){t[n]=i})}var w={},_,k,$,x=!0,C=0,S=10;w.noConflict=function(){return e.Bugsnag=t,w},w.refresh=function(){S=10},w.notifyException=function(e,t,n,o){t&&"string"!=typeof t&&(n=t,t=void 0),n||(n={}),a(n),h({name:t||e.name,message:e.message||e.description,stacktrace:m(e)||f(),file:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber?e.columnNumber+1:void 0,severity:o||"warning"},n)},w.notify=function(t,n,o,i){h({name:t,message:n,stacktrace:f(),file:e.location.toString(),lineNumber:1,severity:i||"warning"},o)};var q="complete"!==document.readyState;document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!0),e.addEventListener("load",o,!0)):e.attachEvent("onload",o);var T=/^[0-9a-f]{32}$/i,j=/function\s*([\w\-$]+)?\s*\(/i,I="https://notify.bugsnag.com/",A=I+"js",E="2.4.8",D=document.getElementsByTagName("script"),M=D[D.length-1],L;if(e.atob){if(e.ErrorEvent)try{0===new e.ErrorEvent("test").colno&&(x=!1)}catch(z){}}else x=!1;if(u("autoNotify",!0)){y(e,"onerror",function(t){return"undefined"!=typeof BUGSNAG_TESTING&&(w._onerror=t),function n(o,i,s,r,l){var c=u("autoNotify",!0),d={};!r&&e.event&&(r=e.event.errorCharacter),a(d),k=null,c&&!C&&h({name:l&&l.name||"window.onerror",message:o,file:i,lineNumber:s,columnNumber:r,stacktrace:l&&m(l)||f(),severity:"error"},d),"undefined"!=typeof BUGSNAG_TESTING&&(t=w._onerror),t&&t(o,i,s,r,l)}});var F=function(e){return function(t,o){if("function"==typeof t){t=n(t);var i=Array.prototype.slice.call(arguments,2);return e(function(){t.apply(this,i)},o)}return e(t,o)}};y(e,"setTimeout",F),y(e,"setInterval",F),e.requestAnimationFrame&&y(e,"requestAnimationFrame",function(e){return function(t){return e(n(t))}}),e.setImmediate&&y(e,"setImmediate",function(e){return function(t){var o=Array.prototype.slice.call(arguments);return o[0]=n(o[0]),e.apply(this,o)}}),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(t){var o=e[t]&&e[t].prototype;o&&o.hasOwnProperty&&o.hasOwnProperty("addEventListener")&&(y(o,"addEventListener",function(e){return function(t,o,i,a){try{o&&o.handleEvent&&(o.handleEvent=n(o.handleEvent,{eventHandler:!0}))}catch(r){s(r)}return e.call(this,t,n(o,{eventHandler:!0}),i,a)}}),y(o,"removeEventListener",function(e){return function(t,o,i,a){return e.call(this,t,o,i,a),e.call(this,t,n(o),i,a)}}))})}e.Bugsnag=w,"function"==typeof define&&define.amd?define([],function(){return w}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=w)}(window,window.Bugsnag),window.googleApiClientReady=function(){gapi.client.load("youtube","v3",window.onYouTubeApiLoad)},window.onYouTubeApiLoad=function(){gapi.client.setApiKey("AIzaSyCqB9V4Uu7u0C8VnlR7MLnKZlz2hpdjl1Q")},fileTree.prototype.addBranch=function(e){var t=this.folderIcon,n=this.folderOpenIcon,o=this.loadingIcon,i=this;this.count++;var a=e.id||this.count,s="folder"==e.type||!1,r=e.title||a;r+="";var l=e.path||"";l=""===l?a:l+"/"+a;var c=this.fileIcon;s===!0&&(c=this.folderIcon),c=e.icon||c;var d=e.open||!1,u="block";d===!1&&(u="none"),d===!0&&s===!0&&(c=n);var p={id:a,folder:s,title:r,path:l,icon:c,open:d},h='<li data-id="'+a+'" data-path="'+l+'" class="tree-file"><span class="tree-icon" data-open="'+d+'">'+c+'</span><span class="tree-title">'+r+"</span></li>";if(s===!0&&(h='<li data-id="'+a+'" data-path="'+l+'" class="tree-folder"><span class="tree-icon" data-open="'+d+'">'+c+'</span><span class="tree-title">'+r+'</span><ul style="display:'+u+'"></ul></li>'),l+="",l===""+a)var f=this.root.append(h);else var m=l.split("/").reverse()[1],f=this.findById(m,"ul").append(h);var v=function(){};return v=s===!0?function(){e.click&&e.click();var o=$(this).parent();i.root.find("li.selected").removeClass("selected"),o.addClass("selected"),!o.hasClass("traversed")&&i.ajax&&$.getJSON("/auth/browseFiles",{idP:i.target,folderId:a}).done(function(e){return console.log(e),1!=e.success?(jAlert(e.msg||"An unexpected error has occurred"),!1):(console.log("success"),$.each(e.data,function(e,t){i.addBranch({id:t.id,title:t.title,type:t.type,path:l})}),o.addClass("traversed"),void 0)}),$(this).parent().find("ul").slideToggle(),"true"===$(this).parent().find("> .tree-icon").attr("data-open")?($(this).parent().find("> .tree-icon").html(t),$(this).parent().find("> .tree-icon").attr("data-open","false")):($(this).parent().find("> .tree-icon").html(n),$(this).parent().find("> .tree-icon").attr("data-open","true"))}:function(){var t=$(this).parent();i.root.find("li.selected").removeClass("selected"),t.addClass("selected"),e.click&&e.click()},p.elem=this.findById(a),p.click=v,this.data.push(p),s===!0?this.findById(a,"span").click(v):this.findById(a).click(v),p},fileTree.prototype.removeBranch=function(e){this.findById(e).remove()},fileTree.prototype.openBranch=function(e){this.findById(e,"ul").slideDown(),this.findById(e).find("> span > .tree-icon").html(this.folderOpenIcon)},fileTree.prototype.closeBranch=function(e){this.findById(e,"ul").slideUp(),this.findById(e).find("> span > .tree-icon").html(this.folderIcon)},fileTree.prototype.toggleBranch=function(e){this.findById(e,"ul").slideToggle(),this.findById(e,".tree-icon").html()===this.folderOpenIcon?this.findById(e,".tree-icon").html(this.folderIcon):this.findById(e,".tree-icon").html(this.folderOpenIcon)},fileTree.prototype.isOpen=function(e){return!("none"===this.findById(e,"ul").css("display"))},fileTree.prototype.getByTitle=function(e){for(var t=[],n=0;n<this.data.length;n++)this.data[n].title===e&&t.push(this.data[n]);return t},fileTree.prototype.rename=function(e,t){this.findById(e).find(".tree-title").html(t);for(var n=0;n<this.data.length;n++)if(this.data[n].id===e)return this.data[n].title=t,this.data[n]},fileTree.prototype.findById=function(e,t){var n='[data-id="'+e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\\\$&")+'"]';return t&&(n+=" > "+t),this.root.find(n)},fileBrowser.prototype.addBranch=function(e){var t=this;this.count++;var n=e.id,o=e.folder;o||(o="folder"==e.type||!1);var i=e.title||n;i+="";var a=e.parent||"/";"/"==a?path="/"+n:path=this.data[a].path+"/"+n,this.addChild(a,n);var s=this.fileIcon;o===!0&&(s=this.folderIcon),s=e.icon||s;var r="none",l={id:n,parent:a,folder:o,title:i,path:path,icon:s,traversed:!1,children:[]},c=!0,d="";if(o===!0)d='<li data-id="'+n+'" data-path="'+path+'" class="tree-folder"><span class="tree-icon">'+s+'</span><span class="tree-title">'+i+'</span><ul style="display:'+r+'"></ul></li>';else{var u="valid";this.hasValidExtension(i)||(c=!1,u="invalid"),d='<li data-id="'+n+'" data-path="'+path+'" class="tree-file '+u+'"><span class="tree-icon">'+s+'</span><span class="tree-title">'+i+"</span></li>"}var p=this.root.append(d),h=function(){};return h=o===!0?function(){e.click&&e.click();var o=t.findById(n);t.root.find("li.selected").removeClass("selected"),o.addClass("selected"),t.openFolder(n)}:function(){e.click&&e.click();var o=t.findById(n);t.root.find("li.selected").removeClass("selected"),o.hasClass("valid")?o.addClass("selected"):jAlert("File has an invalid extension, it should be one of "+t.extensions.toString()+".")},this.findById(n).click(h),l.elem=this.findById(n),l.click=h,n in this.data||(this.data[n]=l),this.data[n]},fileBrowser.prototype.removeFolder=function(e){this.findById(e).remove(),delete this.data[e]},fileBrowser.prototype.openFolder=function(e){var t=this,n=this.data[e],o=n.path;this.root.html(this.loadingIcon),this.data[e].traversed?(this.root.empty(),$.each(this.data[e].children,function(e,n){t.addBranch(t.data[n])})):$.getJSON("/auth/browseFiles",{idP:t.target,folderId:e,identity:t.identity}).done(function(n){return n.success?(t.root.empty(),$.each(n.data,function(e,n){t.addBranch({id:n.id,title:n.title,type:n.type,parent:o.split("/").pop()})}),t.data[e].traversed=!0,void 0):(jAlert(n.msg||"An unexpected error has occurred"),!1)}),this.currentDir=e,this.dirIndicator.html(t.buildReadablePath(this.currentDir)),this.root.attr("data-current",this.currentDir),"/"==this.currentDir?this.root.parent().find(".path-info").hide():this.root.parent().find(".path-info").show()},fileBrowser.prototype.goUp=function(){id=this.root.attr("data-current");var e=this.data[id].parent||"/";this.openFolder(e)},fileBrowser.prototype.getByTitle=function(e){var t=[];for(var n in this.data)this.data[n].title===e&&t.push(this.data[n]);return t},fileBrowser.prototype.rename=function(e,t){this.findById(e).find(".tree-title").html(t);for(var n in this.data)if(this.data[n].id===e)return this.data[n].title=t,this.data[n]},fileBrowser.prototype.findById=function(e,t){var n='[data-id="'+e.replace(/(:|\.|\[|\]|,)/g,"\\$1")+'"]';return t&&(n+=" > "+t),this.root.find(n)},fileBrowser.prototype.buildReadablePath=function(e){for(var t=this.data[e].path.split("/"),n=0;n<t.length;n++)""!==t[n]&&(t[n]=this.data[t[n]].title);return t.join("/")},fileBrowser.prototype.addChild=function(e,t){this.data[e].children.indexOf(t)<0&&this.data[e].children.push(t)},fileBrowser.prototype.getExtension=function(e){var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop()},fileBrowser.prototype.hasValidExtension=function(e){if(0===this.extensions.length)return!0;var t=this.getExtension(e).toLowerCase();return!(this.extensions.indexOf(t)<0)},function(e,t){"use strict";if("function"!=typeof e.createEvent)return!1;var n="undefined"!=typeof jQuery,o=!!navigator.pointerEnabled||navigator.msPointerEnabled,i=!!("ontouchstart"in t)&&navigator.userAgent.indexOf("PhantomJS")<0||o,a=function(e){var t=e.toLowerCase(),n="MS"+e;return navigator.msPointerEnabled?n:t},s={touchstart:a("PointerDown")+" touchstart",touchend:a("PointerUp")+" touchend",touchmove:a("PointerMove")+" touchmove"},r=function(e,t,n){for(var o=t.split(" "),i=o.length;i--;)e.addEventListener(o[i],n,!1)},l=function(e){return e.targetTouches?e.targetTouches[0]:e},c=function(){return(new Date).getTime()},d=function(t,o,i,a){var s=e.createEvent("Event");if(s.originalEvent=i,a=a||{},a.x=w,a.y=_,n&&(s=$.Event(o,{originalEvent:i}),jQuery(t).trigger(s,a)),s.initEvent){for(var r in a)s[r]=a[r];s.initEvent(o,!0,!0),t.dispatchEvent(s)}t["on"+o]&&t["on"+o](s)},u=function(e){var t=l(e);k=w=t.pageX,x=_=t.pageY,S=c(),y++},p=function(e){var t=[],n=c(),o=x-_,i=k-w;if(clearTimeout(C),i<=-f&&t.push("swiperight"),i>=f&&t.push("swipeleft"),o<=-f&&t.push("swipedown"),o>=f&&t.push("swipeup"),t.length)for(var a=0;a<t.length;a++){var s=t[a];d(e.target,s,e,{distance:{x:Math.abs(i),y:Math.abs(o)}})}else k>=w-b&&k<=w+b&&x>=_-b&&x<=_+b&&(S+m-n>=0?(d(e.target,2===y&&q===e.target?"dbltap":"tap",e),q=e.target):S+g-n<=0&&(d(e.target,"longtap",e),q=e.target)),C=setTimeout(function(){y=0},v)},h=function(e){var t=l(e);w=t.pageX,_=t.pageY},f=t.SWIPE_THRESHOLD||100,m=t.TAP_THRESHOLD||150,v=t.DBL_TAP_THRESHOLD||200,g=t.LONG_TAP_THRESHOLD||1e3,b=t.TAP_PRECISION/2||30,y=0,w,_,k,x,C,S,q;r(e,s.touchstart,u),r(e,s.touchend,p),r(e,s.touchmove,h)}(document,window),function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return f({type:w.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),g=e("#"+t.containerId),g.length?g:(n&&(g=u(t)),g)}function o(e,t,n){return f({type:w.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function i(e){b=e}function a(e,t,n){return f({type:w.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function s(e,t,n){return f({type:w.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e){var t=m();g||n(t),d(e,t)||c(t)}function l(t){var o=m();return g||n(o),t&&0===e(":focus",t).length?void v(t):void(g.children().length&&g.remove())}function c(t){for(var n=g.children(),o=n.length-1;o>=0;o--)d(e(n[o]),t)}function d(t,n){return!(!t||0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){v(t)}}),!0)}function u(t){return g=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),g.appendTo(e(t.target)),g}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function h(e){b&&b(e)}function f(t){function o(t){if(!e(":focus",d).length||t)return clearTimeout(w.intervalId),d[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:function(){v(d),r.onHidden&&"hidden"!==_.state&&r.onHidden(),_.state="hidden",_.endTime=new Date,h(_)}})}function i(){(r.timeOut>0||r.extendedTimeOut>0)&&(c=setTimeout(o,r.extendedTimeOut),w.maxHideTime=parseFloat(r.extendedTimeOut),w.hideEta=(new Date).getTime()+w.maxHideTime)}function a(){clearTimeout(c),w.hideEta=0,d.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function s(){var e=(w.hideEta-(new Date).getTime())/w.maxHideTime*100;f.width(e+"%")}var r=m(),l=t.iconClass||r.iconClass;if(r.preventDuplicates){if(t.message===k)return;k=t.message}"undefined"!=typeof t.optionsOverride&&(r=e.extend(r,t.optionsOverride),l=t.optionsOverride.iconClass||l),y++,g=n(r,!0);var c=null,d=e("<div/>"),u=e("<div/>"),p=e("<div/>"),f=e("<div/>"),b=e(r.closeHtml),w={intervalId:null,hideEta:null,maxHideTime:null},_={toastId:y,state:"visible",startTime:new Date,options:r,map:t};return t.iconClass&&d.addClass(r.toastClass).addClass(l),t.title&&(u.append(t.title).addClass(r.titleClass),d.append(u)),t.message&&(p.append(t.message).addClass(r.messageClass),d.append(p)),r.closeButton&&(b.addClass("toast-close-button").attr("role","button"),d.prepend(b)),r.progressBar&&(f.addClass("toast-progress"),d.prepend(f)),d.hide(),r.newestOnTop?g.prepend(d):g.append(d),d[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown}),r.timeOut>0&&(c=setTimeout(o,r.timeOut),w.maxHideTime=parseFloat(r.timeOut),w.hideEta=(new Date).getTime()+w.maxHideTime,r.progressBar&&(w.intervalId=setInterval(s,10))),d.hover(a,i),!r.onclick&&r.tapToDismiss&&d.click(o),r.closeButton&&b&&b.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),o(!0)}),r.onclick&&d.click(function(){r.onclick(),o()}),h(_),r.debug&&console&&console.log(_),d}function m(){return e.extend({},p(),_.options)}function v(e){g||(g=n()),e.is(":visible")||(e.remove(),e=null,0===g.children().length&&g.remove())}var g,b,y=0,w={error:"error",info:"info",success:"success",warning:"warning"},_={clear:r,remove:l,error:t,getContainer:n,info:o,options:{},subscribe:i,success:a,version:"2.1.0",warning:s},k;return _}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e,t,n;return function o(e,t,n){function i(s,r){if(!t[s]){if(!e[s]){var l="function"==typeof require&&require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=t[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n?n:t)},d,d.exports,o,e,t,n)}return t[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,n){var o=e("matches-selector");t.exports=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(o(i,t))return i;i=i.parentNode}}},{"matches-selector":5}],2:[function(e,t,n){function o(e,t,n,o,a){var s=i.apply(this,arguments);return e.addEventListener(n,s,a),{destroy:function(){e.removeEventListener(n,s,a)}}}function i(e,t,n,o){return function(n){n.delegateTarget=a(n.target,t,!0),n.delegateTarget&&o.call(e,n)}}var a=e("closest");t.exports=o},{closest:1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,n){function o(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return i(e,t,n);if(r.nodeList(e))return a(e,t,n);if(r.string(e))return s(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function a(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function s(e,t,n){return l(document.body,e,t,n)}var r=e("./is"),l=e("delegate");t.exports=o},{"./is":3,delegate:2}],5:[function(e,t,n){function o(e,t){if(a)return a.call(e,t);for(var n=e.parentNode.querySelectorAll(t),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}var i=Element.prototype,a=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;t.exports=o},{}],6:[function(e,t,n){function o(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(e),n.removeAllRanges(),n.addRange(o),t=n.toString()}return t}t.exports=o},{}],7:[function(e,t,n){function o(){}o.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function o(){i.off(e,o),t.apply(n,arguments)}var i=this;return o._=t,this.on(e,o,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],i=[];if(o&&t)for(var a=0,s=o.length;a<s;a++)o[a].fn!==t&&o[a].fn._!==t&&i.push(o[a]);return i.length?n[e]=i:delete n[e],this}},t.exports=o},{}],8:[function(t,n,o){!function(i,a){if("function"==typeof e&&e.amd)e(["module","select"],a);else if("undefined"!=typeof o)a(n,t("select"));else{var s={exports:{}};a(s,i.select),i.clipboardAction=s.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(t),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){o(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function n(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},e.prototype.selectFake=function r(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="fixed",this.fakeElem.style[t?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i["default"])(this.fakeElem),this.copyText()},e.prototype.removeFake=function l(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function c(){this.selectedText=(0,i["default"])(this.target),this.copyText()},e.prototype.copyText=function d(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function u(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function p(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function h(){this.removeFake()},s(e,[{key:"action",set:function f(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];
if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function m(){return this._action}},{key:"target",set:function v(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=e}},get:function g(){return this._target}}]),e}();e.exports=r})},{select:6}],9:[function(t,n,o){!function(i,a){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],a);else if("undefined"!=typeof o)a(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var s={exports:{}};a(s,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=s.exports}}(this,function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var c=i(t),d=i(n),u=i(o),p=function(e){function t(n,o){a(this,t);var i=s(this,e.call(this));return i.resolveOptions(o),i.listenClick(n),i}return r(t,e),t.prototype.resolveOptions=function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function o(e){var t=this;this.listener=(0,u["default"])(e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function i(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function d(e){return l("action",e)},t.prototype.defaultTarget=function p(e){var t=l("target",e);if(t)return document.querySelector(t)},t.prototype.defaultText=function h(e){return l("text",e)},t.prototype.destroy=function f(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(d["default"]);e.exports=p})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),function(e){"use strict";var t={get type(){return n.get("app-type","web")},set type(e){n.set("app-type",e),o=e}},n=e.Utils.Store,o="web";t.Init=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=$("body");null!=e&&(this.type=e),$("#hamburger").on("click",function(){t.toggleClass("app-menu-open")}),$(".tip").tooltip(),"tablet"===this.type&&t.on("click","a",[],function(e){"javascript:;"!=this.href&&"#"!=this.href&&"_blank"!=this.target&&(e.preventDefault(),window.location=this.href),$(this).parents(".dropdown-menu").fadeOut("fast")}),"web"!=this.type&&t.attr("data-apptype",this.type),window.AllowOAuth=function(e){console.log("allow oauth: "+(e?"true":"false"))},window.isPhonegap=function(e){console.log("setting phonegap: "+(e?"true":"false"))}},t.closeAppMenu=function(){$("body").removeClass("app-menu-open")},t.setDialogDefaults=function(){},t.openExternalUrl=function(e){var t={task:"openurl",data:{url:e}};try{window.parent.postMessage(JSON.stringify(t),"*")}catch(n){console.error(n),window.open(e)}},t.postMessage=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n={task:e,data:t};try{window.parent.postMessage(JSON.stringify(n),"*")}catch(o){console.error(o)}},e.App=t}(window.Stormboard),function(e){"use strict";function t(e){$("#activate-error").addClass("has-error").find("span").html(e)}function n(t){var n=void 0,o=$(t).serializeArray();$("#activate-error").removeClass("has-error"),$(".activation-field").each(function(){i.hasOwnProperty(this.name)&&(i[this.name]=$.trim(this.value))}),i.guid=e.App.Start.computeDeviceGuid(),i.CSRFName=a.CSRF[0],i.CSRFToken=a.CSRF[1]}function o(){return n(".activation-body"),9==i.code.length&&""!=i.name||t("Activation Code and/or Device Name are invalid."),!s&&(s=!0,void $.post("/win/doactivation",i,function(){},"json").done(function(e){e.success?window.location="/win/app":(e.csrf&&(a.CSRF=e.csrf),t(e.msg||"Unable to load user for this device, contact Stormboard support."),s=!1)}))}var i={code:"",name:""},a={};a.CSRF={},a.Init=function(){$("#btn-activate").on("click",function(){o()});var t=e.App.Start.computeDeviceGuid();$("#device-id").html("["+t+"]")};var s=!1;e.App.Activate=a}(window.Stormboard),function(e){"use strict";function t(e){$(e).click(function(t){t.stopPropagation(),$(e).html("<img src='/images/loading-squares.gif' class='img-loading' />");var n=parseInt($(".joinstorm-id").val(),10);$.ajax({url:"/index.php",data:{task:"joinstorm",id:n,key:$(".joinstorm-key").val()},dataType:"json",success:function o(t){t.success?window.location="/storms/start/"+n:1==t.locked?window.location="/users/locked":($(e).html("Join a Storm"),jAlert(t.msg||"Unknown Error"))}})})}function n(e){$(e).click(function(e){e.stopPropagation(),$("#div-create-storm").removeClass("hide is-hidden"),$("#div-join-storm").removeClass("is-full").html('<div class="icon-merge-type"></div><div class="">Join a Storm</div>')})}function o(){k.css("left",$(window).width()/2-k.width()/2)}function i(){var e=$(".storm-link",h).length+1,t=Math.floor(h.width()/305),n=e%t;n>0&&(n=t-n),$(".storm-placeholder",h).remove();for(var o=0;o<n;o++)h.append('<div class="storm-placeholder"></div>')}function a(){$(".storm-link .dropdown-toggle").dropdown(),$(".slide-menu").on("show.bs.dropdown",function(e){r($(this))}),$(".storm-link").on("click",function(e){var t=$(e.target);if(t.hasClass("slide-menu")||t.parents(".slide-menu").length>0)return r(t),!1;$(".storm-loading",".storm-link").remove();var n=$(this).data("url");null!=n?($(this).prepend('<div class="storm-loading"><img src="/images/logo-icon-100.png" class="spin"><div>Loading...</div></div>'),window.location=n):jAlert("Sorry, we couldn't find the location of this storm. We're going to reload.","Oops!",function(){window.location="/"})}).on("mousedown touchstart",function(){$(this).addClass("clicking")}).on("mouseup touchend mouseout",function(){$(this).removeClass("clicking")})}function s(){return $(".storm-actions").length>0||void h.append('\n          <div class="storm-actions">\n            <div class="storm-action" onclick="Stormboard.App.Dashboard.createStorm();" id="div-create-storm"><div class="icon-add"></div><div class="">Create a Storm</div></div>\n            <div class="storm-action" onclick="Stormboard.App.Dashboard.joinStart();" id="div-join-storm"><div class="icon-merge-type"></div><div class="">Join a Storm</div></div>\n          </div>\n        ')}function r(e){var t=e.find("ul.dropdown-menu"),n=t.parents(".storm-link");if(0===n.length)return!1;var o=n.data("storm"),i=n.data("storm-id"),a=n.data("user-id"),s="loadStorms"===b&&0===y?"closed":"standard";switch(t.html(""),s){default:t.append('<li><a href="javascript:;" data-task="share">Share Storm</a></li>'),(a==T||o.admin)&&(t.append('<li role="separator" class="divider"></li>'),t.append('<li class="menu-danger"><a href="javascript:;" data-task="close">Close Storm</a></li>'),t.append('<li class="menu-danger"><a href="javascript:;" data-task="duplicate">Duplicate Storm</a></li>')),a!=T&&(t.append('<li role="separator" class="divider"></li>'),t.append('<li class="menu-danger"><a href="javascript:;" data-task="leave">Leave Storm</a></li>'));break;case"closed":(a==T||o.admin)&&(t.append('<li class="menu-success"><a href="javascript:;" data-task="reactivate">Re-open Storm</a></li>'),t.append('<li class="menu-danger"><a href="javascript:;" data-task="duplicate">Duplicate Storm</a></li>')),a!=T&&(""!=t.html()&&t.append('<li role="separator" class="divider"></li>'),t.append('<li class="menu-danger"><a href="javascript:;" data-task="leave">Leave Storm</a></li>'))}$("a",t).on("click",function(){var e=$(this).data("task");switch(e){case"share":S.Invite.dialog(i);break;case"close":c(i);break;case"duplicate":d(i);break;case"reactivate":u(i);break;case"leave":l(i)}})}function l(e){jConfirm("<p>Are you sure you want to leave this storm?</p><p>This storm will be removed from your active list.</p><p>Since all storms are private, if you want to regain access to this storm, a storm administrator will need to grant it to you</p>","Really?",function(t){t&&$.ajax({url:"/storms/leavestorm",data:{StormID:e},dataType:"script"})})}function c(e){jConfirm("<p>Are you sure you want to archive this storm?</p><p>This will remove access to all editing privileges for all participants</p>","Confirm Storm Closure",function(t){t&&$.ajax({url:"/storms/closestorm",data:{StormID:e},dataType:"script"})})}function d(e){jPrompt("Enter the name of the duplicate storm:","","Duplicate Storm",function(t){if(t){var n=$.ajax({url:"/storms/duplicatestorm",data:{StormID:e,newname:t},async:!1}).responseText;n&&(jAlert("Storm duplication success."),location.reload())}})}function u(e){jConfirm("<p>Are you sure you want to re-open this storm?</p>","Confirm Storm Opening",function(t){t&&$.getJSON("/storms/reactivate",{StormID:e}).done(function(t){t.status?window.location="/storm/"+e:jAlert(t.msg||"An unexpected error has occurred. Please try again.")})})}function p(){var e=$('<div class="dashboard-data-task">\n          <div class="dashboard-task-group clearfix" aria-label="Storm Type">\n            <button type="button" class="btn btn-task-activity hide" data-task="loadActivity">Activity<span class="activity-badge hide"></span></button>\n            <button type="button" class="btn btn-task-recent active" data-task="loadStorms" data-active="1">Recent</button>\n            <button type="button" class="btn btn-task-invites hide" data-task="loadInvites">Invites<span class="invite-badge hide"></span></button>\n            <button type="button" class="btn " data-task="loadStorms" data-active="0">Closed</button>\n          </div>\n        </div>');e.insertAfter($("#hamburger").parent());var t=$("#storm-search");$("button",e).click(function(){switch($(this).siblings().removeClass("active"),$(this).addClass("active"),$(".storm-placeholder",h).remove(),b=$(this).data("task"),$(this).data("task")){case"loadActivity":j.loadActivity();break;case"loadStorms":j.loadStorms($(this).data("active"),"",0);break;case"loadInvites":j.loadInvites(0)}});var n=$('<div class="toggle-search"><span class="icon-search2"></span></div>');n.appendTo($("nav")),n.click(function(){t.slideToggle("fast",function(){$(this).is(":visible")?($("#search").focus(),$(".btn-task-recent").trigger("click")):j.clearSearch()})})}var h=!1,f=!1,m=!1,v=0,g=0,b="loadStorms",y=1,w=!1,_=!1,k=!1,x=e.App,C=e.Socket,S=e.Utils,q=S.Store,T,j={};j.Init=function(t,n){var a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];x.Init(),p(),T=t,h=$("#storms-list"),w=$("#storm-search"),_=$("input#search"),_.on("keyup",function(e){if(""==$(this).val().trim()?$(this).removeClass("dirty"):$(this).addClass("dirty"),13===e.which)return j.searchStorms(),!1}),$("#btn-search").on("click",this.searchStorms),$("#btn-clear-search").on("click",this.clearSearch),j.loadStorms(),k=$(".dashboard-data-task"),$(window).on("resize",function(){o(),i()}),x.postMessage("push-alias",{alias:"User"+t}),x.postMessage("is-loaded"),a&&"undefined"!=typeof Windows&&e.Windows.sendCommand("set_api_key",{api_key:a});try{e.Socket.initDashboard({path:window.socket_path||"",room:n})}catch(s){}},j.clearSearch=function(){j.loadStorms($(".btn.active","#storm-type").data("active"),"",0),w.removeClass("searching"),_.removeClass("dirty").val("")},j.searchStorms=function(){var e=_.val();j.loadStorms($(".btn.active","#storm-type").data("active"),e,0),w.addClass("searching")},j.loadInvites=function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];g=e,h.html('<div class="alert alert-info dashboard-loading"><img src="/images/logo-icon-100.png" class="spin"><br><span>Loading...</span></div>'),$.getJSON("/users/myinvites",{start:g,results:50}).always(function(){h.html(""),s()}).done(function(e){if(e.success&&1===e.success){for(var t in e.invites){var n=e.invites[t],o=n.bg||"/documents/stormbgthumbs/800/blank.png",s=$('\n              <div class="storm-link" data-storm-id="'+n.id+'" data-user-id="'+n.user_id+'" data-url="'+n.url+'">\n                <img src="'+o+'" class="storm-bg" />\n                <div class="slide-timeago"><h4>'+n.timeago+" - "+n.user+'</h4></div>\n                <div class="slide-footer">\n                  <div class="slide-caption storm-title"><h4>'+n.title+"</h4></div>\n                </div>\n              </div>\n            ").appendTo(h);s.data("storm",n)}a(),i()}}).done(function(e){0==$(".storm-link").length&&h.prepend('<div class="alert alert-info text-center">\n              <span class="icon-warning"></span>\n              No outstanding invites\n             </div>')})},j.loadActivity=function(){if(h.find(".storm-link, .alert").remove(),f){s();for(var e in f)f[e].appendTo(h);a(),i()}},j.loadStorms=function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r="mydashboard",l={ideas:"new ideas",comments:"comments",moves:"moves",votes:"votes",chat:"chats",colors:"colors"},c={active:e,needle:t,getbg:1,output:"json",start:n,results:50,activity:!0};if(y=e,0==e&&(r="mystorms"),""!=t&&(r="stormsearch"),"mydashboard"===r&&(c={},m)){h.find(".storm-link, .alert").remove(),s();for(var d in m)m[d].appendTo(h);return a(),i(),!0}v=n,h.html('<div class="alert alert-info dashboard-loading"><img src="/images/logo-icon-100.png" class="spin"><br><span>Loading...</span></div>'),$.getJSON("/users/"+r,c).always(function(){h.html(""),s()}).done(function(e){if(e.success&&1===e.success){for(var t in e.results){var n=e.results[t],i=n.bg||"/documents/stormbgthumbs/800/blank.png",s="";if(n.activity)for(var c in l)if("badge"!=c&&n.activity[c]&&n.activity[c]>0){var d=l[c];1==n.activity[c]&&(d=d.slice(0,-1)),s+='<span class="label">'+n.activity[c]+" "+d+"</span> "}var u=$('\n              <div class="storm-link" data-storm-id="'+n.id+'" data-user-id="'+n.user_id+'" data-url="'+n.url+'">\n                <img src="'+i+'" class="storm-bg" />\n                <div class="slide-menu">\n                  <span class="icon-cog dropdown-toggle" data-toggle="dropdown"></span>\n                  <ul class="dropdown-menu"></ul>\n                </div>\n                <div class="slide-online"></div>\n                <div class="slide-footer">\n                  <div class="slide-caption"><h4>'+n.title+'</h4></div>\n                  <div class="slide-meta">'+s+"</div>\n                </div>\n              </div>\n            ").appendTo(h);if(u.data("storm",n),"mydashboard"===r&&(m===!1&&(m={}),m["storm"+n.id]=u),n.hasactivity&&(f===!1&&(f={}),f["storm"+n.id]=u),n.online)for(var p in n.online){var v=n.online[p];$(S.Avatar.html(v,!0)).attr("title",$("<textarea />").html(v.name).text()+" is online").appendTo($(".slide-online",u))}}if($(".storm-link .avatar").tooltip(),null!=e.activity){var g=$(".activity-badge");e.activity>0?(g.removeClass("hide").html(e.activity),$(".btn-task-activity").removeClass("hide"),o()):g.addClass("hide").html("")}if(null!=e.invites){var b=$(".invite-badge");e.invites>0?(b.removeClass("hide").html(e.invites),$(".btn-task-invites").removeClass("hide"),o()):b.addClass("hide").html("")}a()}}).done(function(e){""!==t&&0===$(".storm-link").length&&h.prepend('<div class="alert alert-info text-center">\n              <span class="icon-warning"></span>\n              No results found\n              <button type="button" class="btn btn-primary" id="btn-clearsearch" onclick="Stormboard.App.Dashboard.clearSearch();">Clear Search</button>\n             </div>'),i()})},j.createStorm=function(){window.location="/storms/setup"},j.joinStart=function(){var e=$("#div-join-storm");return!!e.hasClass("is-full")||(e.html('\n      <div class="storm-join">\n        <div>\n          <h4>\n            Join a Storm\n            <button type="button" class="btn btn-primary pull-right btn-join-close">\n              <span class="glyphicon glyphicon-remove"></span>\n            </button>\n          </h4>\n          <input type="text" class="form-control joinstorm-id" placeholder="Storm ID">\n          <input type="text" class="form-control joinstorm-key" placeholder="Storm Key">\n          <button type="button" class="btn btn-primary btn-block btn-join-submit">Join</button>\n        </div>\n      </div>\n    '),$(".storm-join input:first").focus(),$("#div-create-storm").addClass("is-hidden hide"),e.addClass("is-full"),n(e.find(".btn-join-close")),void t(e.find(".btn-join-submit")))},e.App.Dashboard=j}(window.Stormboard),function(e){"use strict";var t=e.Wall,n={};n.dataWasRead=function(t){var o=window.location.pathname;o.indexOf("/win/app")>=0?e.App.Start.MyStorms(t):(n.addUserToStorm(t),$(".nfc-listener").trigger("nfc-data-read",[t]))},n.addUserToStorm=function(n){var o=t.config();$.post("/storms/joinbykey",{key:n,storm:o.FlowID}).done(function(t){t.success?(e.Storm.User.add(t.user),e.Storm.User.voteCounts()):e.Utils.Toast.error(t.msg||"Unable to find a user with those credentials")}).fail(function(){e.Utils.Toast.error("Unable to find a user with those credentials")})},e.App.NFC=n}(window.Stormboard),function(e){"use strict";function t(){var e,t={CSRFName:csrf[0],CSRFToken:csrf[1]};e=l.computeDeviceGuid(),$("#device-id").html("["+e+"]"),t.guid=e,$.post("/win/loginbyguid",t,function(){},"json").done(function(e){e.success?($("button").removeAttr("disabled").removeClass("disabled"),e.storm&&Number(e.storm.id)>0&&($("#storm-id").val(e.storm.id),$("#storm-key").val(e.storm.key)),""!=window.api_key&&l.MyStorms(api_key)):window.location="/win/activate"}).fail(function(){a("An unexpected error occurred. Please try again.")})}function n(){$.post("/win/logoutguiduser",[],function(){},"json")}function o(e){$(".sub-title",".panel-login").addClass("error-text").html(e),$("#btn-mystorms").html("LOGIN")}function i(e){$(".sub-title",".panel-join").addClass("error-text").html(e),$("#btn-join").html("JOIN")}function a(e){$("#device-id-error").html(e)}var s=e.App,r=e.Utils.Store,l={};l.Init=function(){var e=this;s.type="uwp-surfacehub",$(".ooa-container").addClass("start"),t(),$("#btn-join").click(function(){e.Join()}),$("#storm-id").keypress(function(e){var t=parseInt(e.keyCode||e.which);if(13===t)return $("#storm-key").focus(),e.preventDefault(),!1}).on("change",function(){this.value=this.value.replace(" ","")}),$("#storm-key").keypress(function(t){var n=parseInt(t.keyCode||t.which);if(13===n)return e.Join(),t.preventDefault(),!1}).on("change",function(){this.value=this.value.replace(" ","")}),$("#btn-quickstorm").click(function(){e.QuickStorm()}),$("#btn-mystorms").click(function(){e.MyStorms()}),$("#btn-logout").click(function(){e.MyStormsLogout()}),$("#auth-username").on("change",function(){this.value=this.value.replace(" ","")}),$("#auth-password").keypress(function(t){var n=parseInt(t.keyCode||t.which);if(13===n)return e.MyStorms(),t.preventDefault(),!1}).on("change",function(){this.value=this.value.replace(" ","")}),$("#storm-search-bar").find(".btn-search").click(function(){e.searchStorms()}),$("#storm-list-search").keypress(function(t){var n=parseInt(t.keyCode||t.which);if(13===n)return e.searchStorms(),t.preventDefault(),!1}),"undefined"!=typeof Windows&&$(".nfc").css("display","block")},l.computeDeviceGuid=function(){var e,t,n=0,o,i,a,s,l="",c="",d="",u="";return"undefined"!=typeof Windows?(t=Windows.Networking.Connectivity.NetworkInformation.getHostNames(),e=t[0].canonicalName):e=r.get("surface-hub-guid","_surfacehub_"+(new Date).getTime()+"_"),r.set("surface-hub-guid",e),e},l.Join=function(){var e=parseInt($("#storm-id").val()),t=$("#storm-key").val();return e&&t?($("#btn-join").html("<img src='/images/loading-wide.gif'>"),void $.getJSON("/storms/joinStormByIdAndKey",{StormID:parseInt(e),StormKey:$.trim(t)}).done(function(t){t.success?window.location="/storm/"+e:i(t.msg)}).fail(function(){i("An unexpected error occurred. Please try again.")})):(i("Storm ID must be numeric and Storm Key cannot be blank"),!1)},l.QuickStorm=function(){$("#btn-quickstorm").html("<img src='/images/loading-wide.gif'>"),window.location="/win/quickstorm"},l.searchStorms=function(){var e=$("#storm-scroller"),t=$.trim($("#storm-list-search").val()),n={needle:t,results:51,getbg:1,output:"json"};e.html("<img style='display: block;margin: 10px auto;' src='/images/loading-wide.gif'>"),$.getJSON("/users/stormsearch",n).done(function(t){if(e.html(""),1===t.success&&t.results.length>0){var n;for(var i in t.results)n=t.results[i],e.append('\n            <div class="storm-link" data-url="'+n.inviteurl+'">\n              <img src="'+n.bg+'" class="storm-bg">\n              <div class="slide-footer">\n                <div class="slide-caption"><h4>'+n.title+'</h4></div>\n                <div class="slide-meta"><span class="label">5 new ideas</span> <span class="label">6 comments</span> <span class="label">24 moves</span> <span class="label">4 colors</span> </div>\n              </div>\n            </div>');$(".storm-link").on("click",function(){$(".storm-loading",".storm-link").remove(),$(this).prepend('<div class="storm-loading"><img src="/images/logo-icon-100.png" class="spin"><div>Loading...</div></div>'),window.location.href=$(this).data("url")}).on("mousedown touchstart",function(){$(this).addClass("clicking")}).on("mouseup touchend mouseout",function(){$(this).removeClass("clicking")})}else o(1===t.success&&0===t.results.length?"No Results Found. Please Try Again!":t.msg)})},l.MyStorms=function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],n=$.trim($("#auth-username").val()),i=$.trim($("#auth-password").val()),a=$("#storm-scroller"),s;if(t)s={key:t};else{if(!n||!i)return o("Username and Password cannot be blank"),!1;s={Username:n,Password:i}}a.html(""),$("#btn-mystorms").html("<img src='/images/loading-wide.gif'>"),$.post("/win/userstormslist",s,function(){},"json").done(function(t){if(1===t.success){var n=t.user;$("#user-fullname").html(n.fullname),$(".avatar").replaceWith(e.Storm.User.getAvatarHtml(n.id,n.avatar,null,!0)),$(".panel-login").animate({right:"-450px"},400,"easeInOutCubic",function(){$("#btn-mystorms").html("LOGIN");var e;for(var n in t.storms)e=t.storms[n],a.append('<div class="storm-link" data-url="'+e.inviteurl+'">\n                <img src="'+e.bg+'" class="storm-bg">\n                <div class="slide-footer">\n                  <div class="slide-caption"><h4>'+e.title+'</h4></div>\n                  <div class="slide-meta"><span class="label">5 new ideas</span> <span class="label">6 comments</span> <span class="label">24 moves</span> <span class="label">4 colors</span> </div>\n                </div>\n              </div>');$(".storm-link").on("click",function(e){$(".storm-loading",".storm-link").remove(),$(this).prepend('<div class="storm-loading"><img src="/images/logo-icon-100.png" class="spin"><div>Loading...</div></div>'),window.location=$(this).data("url")}).on("mousedown touchstart",function(){$(this).addClass("clicking")}).on("mouseup touchend mouseout",function(){$(this).removeClass("clicking")}),$("#auth-username").val(""),$("#auth-password").val(""),$(".panel-mystorms").animate({right:"-0px"},400,"easeInOutCubic")})}else o(t.msg)}).fail(function(){o("An unexpected error occurred. Please try again.")})},l.MyStormsLogout=function(){$(".panel-mystorms").animate({right:"-450px"},400,"easeInOutCubic",function(){$("#auth-username").val(""),$("#auth-password").val(""),$(".panel-login").animate({right:"-0px"},400,"easeInOutCubic")}),n()},e.App.Start=l}(window.Stormboard);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"use strict";function t(){var e=$(this).data("idp");e&&n.postMessage("oauth2",{provider:e})}var n=e.App,o=e.Utils.Store,i={};i.InitLogin=function(i){var a=this;$("#carousel-tour").carousel({interval:5e3}),$(".pane."+i).addClass("active"),$(".login-signin, .login-register, .forgot-pw").click(function(){$(".pane.active").removeClass("active"),$(".pane."+$(this).data("pane")).addClass("active")}),$(".backtostart").click(function(){$(".pane.active").removeClass("active"),$(".pane.start").addClass("active")}),$(".backtosignin").click(function(){a.backToSignin()});var s=o.get("app-user",!1);"object"===("undefined"==typeof s?"undefined":_typeof(s))&&($("#uname").val(s.uname||""),$("#upw").val(s.upw||""),$("#remember-me").prop("checked",!0),$(".pane").removeClass("active"),$(".pane.signin").addClass("active")),$("#btn-forgotpw").on("click",this.resetPassword),$("#btn-email-signup").on("click",this.emailSignup),n.postMessage("is-loaded"),"tablet"===n.type&&(window.OAuthCallback=function(t){t.hasOwnProperty("key")?window.location="https://"+window.location.hostname+"/app/login?type="+n.type+"&ssokey="+t.key:e.Utils.Toast.error("Sorry, we were unable to log you in that way.")},$(".goog").removeClass("hide"),$("button",".auth-providers").on("click",t))},i.backToSignin=function(){$(".pane.active").removeClass("active"),$(".pane.signin").addClass("active"),setTimeout(function(){$("#forgotpw-needle").val(""),$("#msg-forgotpw").html("").css("display","none"),$("#btn-forgotpw").html("Submit").css("display","")},500)},i.beforeLogin=function(){var e=$("#uname"),t=$("#upw");if(""===e.val().trim()||""===t.val().trim())return jAlert("Enter both your username and password to login."),!1;var n=!1;return $("#remember-me").is(":checked")&&(n={uname:e.val(),upw:t.val()}),o.set("app-user",n),!0},i.emailSignup=function(){var e=$("#btn-forgotpw"),t=$("#msg-forgotpw");t.html("").slideUp("fast"),e.html("<img src='/images/loading-squares.gif' class='img-loading' />");var n={email:$("#email-signup").val(),k:$("#email-signup-k").val(),"app-type":"tablet"};$.post("/main/doemailregister",n).always(function(){e.html("Sign Up")}).done(function(e){if(e.success){try{_gaq.push(["_trackEvent","Users","Signup",$("#email-signup").val()])}catch(n){}setTimeout(function(){window.location=e.url},700)}else t.slideDown(300).html(e.msg)})},i.resetPassword=function(){var e=$("#btn-forgotpw"),t=$("#msg-forgotpw");t.html("").slideUp("fast"),e.html("<img src='/images/loading-squares.gif' class='img-loading' />"),$.post("/main/resetpw",{needle:$("#forgotpw-needle").val()}).always(function(){e.html("Submit")}).done(function(n){n.success?e.slideUp(300,function(){t.html('\n                <div class="alert alert-success">\n                  <p>We have sent an email to the address on file. If it doesn\'t arrive in a few minutes check your junk mail folder.</p>\n                  <p class="clearfix">\n                    <a href="javascript:;" class="btn btn-success" onclick="Stormboard.App.Tablet.backToSignin()"><span class="glyphicon glyphicon-chevron-left"></span> Login</a>\n                  </p>\n                </div>').slideDown(300)}):t.html('\n                <div class="alert alert-danger">\n                  <p>'+(n.msg||"An unknown error has occurred. Please try again in a moment.")+"</p>\n                </div>").slideDown(300)})},e.App.Tablet=i}(window.Stormboard),window.Bugsnag.apiKey="60c4193109a5ab1c4019a3ae830758e5",window.Bugsnag.notifyReleaseStages=["production"];var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(Stormboard){"use strict";function initDashboard(e){__socket__&&Socket.destroy(),__socket__=io.connect(e),__socket__.on("connect",function(){__socket__.emit("dashboardinit",socket_params,function(e){})}),__socket__.on("ImOnline",function(e){var t=$("<textarea />").html(e.name).text(),n=e.storm_id+"|"+e.user_id;online_toasts[n]&&clearTimeout(online_toasts[n]),[49999,5e4].indexOf(parseInt(e.storm_id))===-1&&(online_toasts[n]=setTimeout(function(){Toast.success("<b>"+t+"</b> just entered <b>"+e.storm_title+"</b>",{closeButton:"Enter Storm",onclick:function o(){window.location="/storm/"+e.storm_id}}),delete online_toasts[n]},200));var o=$('.storm-link[data-storm-id="'+e.storm_id+'"]');0==o.find('.avatar[user_id="'+e.user_id+'"]').length&&$(Utils.Avatar.html(e,!0)).attr("title",t+" is online").appendTo(o.find(".slide-online"))}),__socket__.on("ImOffline",function(e){$('.avatar[user_id="'+e.user_id+'"]','.storm-link[data-storm-id="'+e.storm_id+'"]').remove()})}function initStorm(hostname){__socket__&&Socket.destroy(),__socket__=io.connect(hostname),__socket__.on("connect",function(){__socket__.emit("wallinit",socket_params,function(e){socket_user_id=e.user.user_id,socket_user_hash=e.user.hash,socket_client_url=e.url;try{Storm.User.resetAllActive()}catch(t){console.log(t)}})}),__socket__.on("Kill",function(e){parseInt(e.id,10)===parseInt(socket_user_id,10)&&e.hash!==socket_user_hash&&$.ajax({url:"/index.php",data:{option:"users",task:"destroy"},dataType:"html",success:function t(e){e&&(Socket.emit("disconnect"),Stormboard.Utils.QuickReg.dialog(socket_params.id,0,1,"You were logged out.<br>Your account can only be logged in in one location or browser at one time."))}})}),__socket__.on("Presenter",function(e){if(!test_socket_url())return!1;var t=e.task||"";switch(t){case"setFeatures":$("#boundary").wall("setFeatures",e.disabled,!0)}}),__socket__.on("PushGrowl",function(obj){if(obj.ch&&obj.ch===StormChannel&&(1==obj.global||parseInt(obj.user_id)===parseInt(user.id)))switch(obj=$.extend({msg:"",title:"Alert",type:"growl",timeout:1e4,callback:""},obj),obj.type){default:case"growl":Toast.info(obj);break;case"alert":jAlert(obj.msg,obj.title,function(){eval(obj.callback)});break;case"confirm":jConfirm(obj.msg,obj.title,function(confirmed){eval(obj.callback)})}}),__socket__.on("UpdateLegend",function(e){if(!test_socket_url())return!1;var t=e.title;t.match(/^(AES:)/)&&(t=$("#boundary").wall("decrypt",t)),$("#legendul li[colour='"+e.colour+"']").find("div:last").html(t),$(".idea[colour='"+e.colour+"']").find(".idea-legend").html(t)}),__socket__.on("ChangeTemplate",function(e){if(!test_socket_url())return!1;if(e.section&&e.FlowID)try{var t=e.section.block,n=$(".template-block[block='"+t+"']",".boundary[stormid='"+e.FlowID+"']");n.length&&($(".template-block-digit",n).html(e.section.digit),$(".template-block-title",n).html(e.section.title),$(".template-block-desc",n).html(e.section.description)),e.viewfinderhtml&&$("#vfbackground").replaceWith(e.viewfinderhtml)}catch(o){}if((e.wall||0===e.wall)&&($("#imgbgstorm",".boundary.active").remove(),$("#template",".boundary.active").remove(),""!=e.wall&&0!=e.wall)){$(".boundary.active").css({width:e.width+"px",height:e.height+"px"}),"xml"===e.wall.split(".").pop()?$("#boundary").wall("_xmlBackground",e.wall,e.width,e.height):$(".boundary.active").prepend('<img src="'+e.wall+'" style="width:'+(e.width||4e3)+"px;height:"+(e.height||3e3)+'px;" align="absmiddle" border="0" alt="" id="imgbgstorm">'),$(window).trigger("resize");var i=Stormboard.Wall.config();i.vf_ratio_w=e.width/200*1.005,i.vf_ratio_h=e.height/150,i.vfnode_wh=200===i.nodesize?16:11,i.width=e.width,i.height=e.height,1!=i.ZoomLevel&&$("#boundary").wall("handleZoomChange",parseInt($("#zoom-slider").attr("slidervalue"))),
Stormboard.Viewfinder.ideas()}(e.viewscreen||0===e.viewscreen)&&(""===e.viewscreen||0===e.viewscreen?$("#vfbackground").remove():0===$("#vfbackground").length?$("#viewscreen").prepend(e.viewscreen):$("#vfbackground").replaceWith(e.viewscreen))}),__socket__.on("DraggingIdea",function(e){if(!test_socket_url())return!1;var t=!0;if($(".search-overlay").length>0&&(t=!1),e.multi)for(var n in e.arr){var o=e.arr[n];parseInt(socket_user_id)!=parseInt(e.user_id)&&($(".boundarynode[node_id='"+o.n+"']",".boundary.active").css({left:o.x,top:o.y,"z-index":o.z}).addClass("drag-shadow"),Stormboard.Wall.Connector.move(o.n,o.x,o.y),o.z>zindex&&(zindex=o.z)),t&&Stormboard.Viewfinder.moveIdea(o.n,o.x,o.y)}else e.animate?(parseInt(socket_user_id)!=parseInt(e.user_id)&&($(".boundarynode[node_id='"+e.node_id+"']",".boundary.active").animate({left:e.x,top:e.y,"z-index":e.z},500),Stormboard.Wall.Connector.move(e.node_id,e.x,e.y),e.z>zindex&&(zindex=e.z)),t&&Stormboard.Viewfinder.moveIdea(e.node_id,e.x,e.y)):(parseInt(socket_user_id)!=parseInt(e.user_id)&&($(".boundarynode[node_id='"+e.node_id+"']",".boundary.active").css({left:e.x,top:e.y,"z-index":e.z}),Stormboard.Wall.Connector.move(e.node_id,e.x,e.y),e.z>zindex&&(zindex=e.z)),t&&Stormboard.Viewfinder.moveIdea(e.node_id,e.x,e.y))}),__socket__.on("DraggingIdeaStart",function(e){if(!test_socket_url())return!1;if(parseInt(socket_user_id)!=parseInt(e.user_id)){var t=$(".boundarynode[node_id='"+e.node_id+"']",".boundary.active"),n="dragtag_"+t.attr("colour"),o=e.avatar||"??";t.hasClass("imgnode")?n="dragtag_img":t.hasClass("vidnode")&&(n="dragtag_vid"),o=o.length>=1&&o.length<=2?"<div class='char'>"+o+"</div>":"<img src='"+o+"' />",t.addClass("drag-shadow").append("<div class='draggingtag "+n+"'><div class='avatar avatar-24'>"+o+"</div> <div class='draggingtitle'>"+e.fullname+"<br>is dragging...</div></div>").find(".draggingtag").animate({bottom:"-15px",opacity:1},250)}Storm.User.setStatus(e,"users-active")}),__socket__.on("DraggingIdeaStop",function(e){return!!test_socket_url()&&($(".boundarynode[node_id='"+e.node_id+"']",".boundary.active").find(".draggingtag").animate({bottom:"0px",opacity:0},250,function(){$(this).remove()}),void(e.nodes?$(".drag-shadow").each(function(){$.inArray($(this).attr("node_id"),e.nodes)>=0&&$(this).removeClass("drag-shadow")}):$("*").removeClass("drag-shadow")))}),__socket__.on("ResetVotes",function(e){return!!test_socket_url()&&void Storm.Vote.doReset()}),__socket__.on("SetVotes",function(e){return!!test_socket_url()&&(Stormboard.Idea.Vote.set.call($("#node"+e.node_id),e.votes),Stormboard.Idea.Vote.set.call($(".indexcardidea[data-node_id='"+e.node_id+"']"),e.votes),void(e.notify&&e.notify.user_id&&Storm.User.setStatus({id:e.notify.user_id,name:""},"users-active")))}),__socket__.on("NewComment",function(e){if(!test_socket_url())return!1;if(setTimeout(function(){$("#node"+e.node_id).idea("resetCommentStatus"),$(".indexcardidea[data-node_id='"+e.node_id+"']").idea("resetCommentStatus",null,e.node_id)},500),e.user_id&&Storm.User.setStatus({id:e.user_id,name:""},"users-active"),e.hasOwnProperty("comment")){var t=$(".comment-list","#dg_comments_"+e.node_id);t.length>0&&Stormboard.Idea.Comments.addToDialog(t,e.comment)}e.hasOwnProperty("notify")&&Stormboard.Panel.Activity.add(e.notify)}),__socket__.on("DeleteIdea",function(e){return!!test_socket_url()&&(Storm.Vote.getAvailable(),$(".boundarynode[node_id='"+e.node_id+"']").animate({width:"+=200px",height:"+=200px",top:"-=100px",left:"-=100px",opacity:0},300,"swing",function(){$(this).remove()}),$(".indexcardidea[data-node_id='"+e.node_id+"']").slideUp(function(){$(this).remove()}),void $("#boundary").wall("cleanupIdea",e.node_id))}),__socket__.on("SetColor",function(e){}),__socket__.on("UpdateIdea",function(e){if(!test_socket_url())return!1;var t;t=e.task?e.task:"updatetext";var n=Stormboard.Wall.config(),o=$(".boundarynode[node_id='"+e.node_id+"']"),i,a;switch(t){case"full":if(e.z&&o.css("z-index",e.z||1),e.x&&e.y){o.animate({left:e.x,top:e.y},500);var s=$("#boundary").wall("get_vf_ratios"),r=e.x/s.w+s.wo,l=e.y/s.h+s.ho;$(".vfnode[node_id='"+e.node_id+"']").css({left:r,top:l})}if(e.colour){o.removeClass("nodeyellow").removeClass("nodepink").removeClass("nodegreen").removeClass("nodeblue").removeClass("nodepurple").removeClass("nodegrey").addClass("node"+e.colour).attr("colour",e.colour);var c=$("li[colour='"+e.colour+"'] .legendname","#legendul").html();$(".idea-legend",o).html(c)}if("undefined"!=typeof e.lock&&setTimeout(function(){o.idea("lockSet",e.node_id,parseInt(e.lock))},800),!e.txt)break;case"updatetext":var d=e.txt;n.encrypted&&(d=$("#boundary").wall("decrypt",d)),d=Utils.Helpers.replaceURLWithHTMLLinks(d),d=Utils.Helpers.nl2br(d),$(".phototitle[node_id='"+e.node_id+"']").find("div:first").html(d),o.find(".txtindexcardcell").html(d),o.find(".txtnodecell").html(d),o.idea("setEdited"),a=$(".indexcardidea[data-node_id='"+e.node_id+"']"),e.datavalue&&a.length&&(a.find(".indexcardidea-content:first").html(d),a.idea("setdata",e.datavalue,e.txt));break;case"updateannotation":o.idea("updateAnnotation",e.hash);break;case"updatesketchtext":o.attr("fulltext",e.text.replace("\n"," "));break;case"updatesketch":o.idea("updateSketch",{hash:e.hash});break;case"maketitle":if(o.find(".txtnodecell").addClass("titlenode"),o.idea("addExpandable"),a=$(".indexcardidea[data-node_id='"+e.node_id+"']"),a.length){var u=a.data("idea");u.type=5,a.data("idea",u)}break;case"makesketch":$(".txtnodecell, .titlenodecell",o).replaceWith("<div class='sketchnodecell' wall-route='openSketch'><img src='/sketch/"+e.node_id+"/"+e.hash+"' wall-route='openSketch' /></div>"),o.addClass("sketchnode").attr("hash",e.hash).attr("fulltext","");break;case"makeregular":var p=$("li.indexcardidea[data-node_id='"+e.node_id+"']");if(p.length&&($(".bullet",p).html("•").removeClass("closed opened"),$(".preview-icon",p).removeClass("icon-indexcard").addClass("icon-sticky"),$(".indexcardideas",p).remove()),o.find(".txtnodecell").removeClass("titlenode"),o.hasClass("stacknode")){if(o.removeClass("indexcardnode stacknode twisted").addClass("textnode").attr("stackflowid",!1).css({width:"",height:""}),o.find(".stackstyle").length){var h=idea.find(".meta, .footer-bar, .color-bar, .content").detach();$(".stackstyle, .stackcount",idea).remove(),$(h).each(function(){var e=($(this).attr("class")+"").split(" ");0===o.find("."+e[0]).length&&o.append(this)})}}else o.hasClass("sketchnode")&&(o.removeClass("sketchnode"),o.find(".content").html("<div class='txtnodecell'>"+e.text+"</div>"));if(a=$(".indexcardidea[data-node_id='"+e.node_id+"']"),a.length){var f=a.data("idea");f.type=1,a.data("idea",f)}break;case"zIndex":o.css("z-index",e.zIndex||1),e.zIndex>zindex&&(zindex=e.zIndex);break;case"allZIndexes":var m=1;for(var v in e.nodes)m=e.nodes[v].z||1,$(".boundarynode[node_id='"+e.nodes[v].id+"']").css("z-index",m);zindex=m;break;case"allEdited":for(var g in e.nodes)$(".boundarynode[node_id='"+e.nodes[g]+"']").addClass("edited");break;case"indexcardaddidea":if(i=$(".boundarynode[node_id='"+e.indexcard_node_id+"']"),i.length){$(".indexcardidea[data-node_id='"+e.node_id+"']").remove();var b=$(".indexcardideas[data-storm='"+e.notify.flow_id+"']",i),y=$("> ul",b);y&&(i.idea("addindexcardli",e,y,e.order||[]),i.idea("indexcarddraggable"))}break;case"indexcardremoveidea":e.node_id&&$(".indexcardidea[data-node_id='"+e.node_id+"']").remove();break;case"indexcardorder":i=$(".boundarynode[node_id='"+e.node_id+"']"),1==i.length&&e.order&&e.order.length&&i.idea("setindexcardorder",e);break;case"ideasize":$(".boundarynode[node_id='"+e.node_id+"']").animate({width:parseInt(e.width)+"px",height:parseInt(e.height)+"px"},300,function(){Stormboard.Viewfinder.changes([{n:e.node_id}])});break;case"commenttyping":Stormboard.Idea.Comments.userIsTyping(e);break;case"deletecomment":Stormboard.Idea.Comments.socketDelete(e)}}),__socket__.on("NewIdea",function(e){if("object"===("undefined"==typeof e?"undefined":_typeof(e))&&"object"===_typeof(e[0])&&(e=e[0]),!test_socket_url())return!1;var t=!1;if("undefined"==typeof e.notify||socket_params.id==e.notify.flow_id){if(e.update)switch(e.update){default:t=$("#boundary").wall("addIdea",e);break;case"updatecolor":var n=$(".mynode[node_id='"+e.node_id+"']");n.removeClass("nodeyellow").removeClass("nodepink").removeClass("nodegreen").removeClass("nodeblue").removeClass("nodepurple").removeClass("nodegrey").addClass("node"+e.colour).attr("colour",e.colour),$(".indexcardidea[data-node_id='"+e.node_id+"']").removeClass("colour-yellow").removeClass("colour-green").removeClass("colour-pink").removeClass("colour-purple").removeClass("colour-blue").removeClass("colour-grey").removeClass("colour-purple").addClass("colour-"+e.colour);var o=$("li[colour='"+newcolor+"'] .legendname","#legendul").html();$(".idea-legend",n).html(o),Stormboard.Viewfinder.ideas()}else t=$("#boundary").wall("addIdea",e);try{Stormboard.Panel.Activity.add(e.notify)}catch(i){}}t!==!1&&(Stormboard.Viewfinder.addIdea({node_id:e.node_id,top:$(t).attr("newtop"),left:$(t).attr("newleft"),colour:e.colour}),$("#node"+e.node_id,".boundary.active").css({display:"block",opacity:0}).animate({top:$(t).attr("newtop"),left:$(t).attr("newleft"),opacity:1},450),$("#node"+e.node_id,".boundary.active").attr("newtop",null).attr("newleft",null))}),__socket__.on("LockIdea",function(e){return!!test_socket_url()&&void $("#node"+e.node_id).idea("lockSet",e.node_id,e.lock)}),__socket__.on("UpdateWall",function(e){if(!test_socket_url())return!1;var t=e.task||"moveideas";switch(t){default:case"moveideas":var n=e;for(var o in n)n[o].n&&$("#node"+n[o].n).idea("move",n[o]);setTimeout(function(){Stormboard.Viewfinder.ideas()},500);break;case"connector":Stormboard.Wall.Connector.handleSocket(e)}}),__socket__.on("UpdateAvatar",function(e){if(e.ch&&e.ch==StormChannel){var t=Storm.User.getAvatarHtml(e.user_id,e.avatarsrc,null,!0);$(".position-avatar[user_id='"+e.user_id+"']").html(t),$(".participant[user_id='"+e.user_id+"']").html(t),$(".idea[user_id='"+e.user_id+"'] .avatar").replaceWith(t);var n=t;$(n).addClass("chatavatar").attr("user_id",e.user_id),$(".chatavatar[user_id='"+e.user_id+"']").html(n)}}),__socket__.on("ReloadMe",function(e){if(e.ch&&e.ch==StormChannel){var t=e.task||"reload";("reload"==t&&e.user_id==user.id||"maintenance"==t||"cse"==t)&&$("#boundary").wall("reloadMe",e)}}),__socket__.on("NewStormUser",function(e){if(!test_socket_url())return!1;if(e.ch&&e.ch==StormChannel&&(socket_connected++,Storm.User.add({id:e.user_id,av:e.avatar,name:e.user_fullname,username:e.username,flow_id:e.flow_id||0,type:e.type||0,mobile:e.mobile||0,status:2}),e.user_id!=user.id)){var t="A Guest";if(e.fullname?t=e.fullname:e.user_fullname&&(t=e.user_fullname),0==e.user_id||"number"!=typeof e.user_id&&0===e.user_id.indexOf("g")){return!1;t="A Guest"}if(e.user_id>0&&"undefined"!=typeof leave_messages[e.user_id])return clearTimeout(leave_messages[e.user_id]),delete leave_messages[e.user_id],!1;Stormboard.Windows.toastMessage(t+"<br />has just entered the storm.")}}),__socket__.on("StormUserEnteredStack",function(e){return!!test_socket_url()&&void(e.ch&&e.ch==StormChannel&&e.user_id&&e.user_fullname&&(stack_messages[e.user_id]=!0,Storm.User.remove(e.user_id),Stormboard.Windows.toastMessage(e.user_fullname+" just entered the substorm: <b>"+e.stack+"</b>")))}),__socket__.on("RemoveStormUser",function(e){if(!test_socket_url())return!1;if(e.ch&&e.ch==StormChannel){if(socket_connected--,e.user_id!=user.id&&null!=e.user_fullname){var t="A Guest";if(e.fullname?t=e.fullname:e.user_fullname&&(t=e.user_fullname),0==e.user_id||"number"!=typeof e.user_id&&0===e.user_id.indexOf("g"))return Storm.User.remove(e.user_id),!1;if("undefined"==typeof stack_messages[e.user_id]){if(e.user_id>0)return leave_messages[e.user_id]=setTimeout(function(){Stormboard.Windows.toastMessage(t+"<br />has just left the storm."),Storm.User.remove(e.user_id);try{delete leave_messages[e.user_id]}catch(n){}},5e3),!1;Stormboard.Windows.toastMessage(t+"<br />has just left the storm.")}else delete stack_messages[e.user_id]}Storm.User.remove(e.user_id)}}),__socket__.on("DeleteStormUser",function(e){var t=Stormboard.Wall.config();e.ch&&e.ch==StormChannel&&(parseInt(e.user_id)==parseInt(t.user.id)&&$("#boundary").wall("removeMe",e),Storm.User.remove(e.user_id,!0))}),__socket__.on("AccessRequest",function(e){if(!test_socket_url())return!1;if(e.ch&&e.ch==StormChannel){$("#boundary").wall("AccessRequest",e);var t=Stormboard.Wall.config();t.user.a&&1==t.user.a&&Toast.info(e.fullname+"<br />just requested access to this storm.")}}),__socket__.on("UpdateStorm",function(e){return!!test_socket_url()&&void $("#boundary").wall("updateStormConfig",e)}),__socket__.on("StormClaimed",function(e){if(!test_socket_url())return!1;var t=Stormboard.Wall.config();t.claimable=e.claimable||!1,t.claimable||$(".app-action.claim").remove()}),__socket__.on("newChatMessage",function(e){return!!test_socket_url()&&void(socket_params.id==e.flow_id&&Stormboard.Panel.Chat.additem(e,1))}),__socket__.on("ChatTyping",function(e){socket_params.id==e.flow_id&&Stormboard.Panel.Chat.userIsTyping(e)}),__socket__.on("Notification",function(e){if(!test_socket_url())return!1;if("undefined"==typeof e.notify||socket_params.id==e.notify.flow_id){var t="object"==_typeof(e.notify)?e.notify:e;try{Stormboard.Panel.Activity.add(t)}catch(n){}}}),__socket__.on("FollowMe",function(e){return!!test_socket_url()&&void $("#boundary").wall("setScreenFocusPosition",e)}),__socket__.on("MyPosition",function(e){return!!test_socket_url()&&($("#boundary").wall("setScreenPositions",e),void(e.ch&&e.ch==StormChannel&&parseInt(socket_user_id)!=parseInt(e.user_id)&&Storm.User.add({id:e.user_id,av:e.avatar||"",name:e.user_fullname,username:e.username,flow_id:e.flow_id,type:e.type||0,mobile:e.mobile||0,status:2})))}),__socket__.on("SendMeYourPositions",function(){if(test_socket_url()){var e=$(".boundary.active").parent(),t={left:Math.round(e.scrollLeft()+e.width()/2),top:Math.round(e.parent().scrollTop()+e.height()/2)-100,flow_id:parseInt(socket_params.id),user_id:parseInt(user.id),user_fullname:user.name,avatar:user.avatar,username:user.username,type:parseInt(user.type||0)};if(t.left<0||t.top<0)return!1;user.anon&&(t.anon=1),Socket.emit("MyPosition",t)}}),__socket__.on("MakeStack",function(e){var t=$(".indexcardidea[data-node_id='"+e.node_id+"']");if(t.length){try{delete e.notify}catch(n){}var o=t.parents(".idea:first");o.idea("addindexcardli",e,t.parents("ul:first"),"replace"),o.idea("indexcarddraggable")}else{$("#node"+e.node_id,".boundary").remove();var i=$("#boundary").wall("addIdea",e);i!==!1&&(Stormboard.Viewfinder.addIdea({node_id:e.node_id,top:$(i).attr("newtop"),left:$(i).attr("newleft"),colour:e.colour}),$(".idea[node_id='"+e.node_id+"']").css({display:"block",top:$(i).attr("newtop")+"px",left:$(i).attr("newleft")+"px",opacity:1}).attr("newtop",null).attr("newleft",null).idea("resetCommentStatus"))}}),__socket__.on("AddToStack",function(e){$(".boundarynode[node_id='"+e.node_id+"']").remove(),$("#boundary").wall("cleanupIdea",e.node_id)}),__socket__.on("StackCounts",function(e){var t=$(".idea[node_id='"+e.node_id+"']");e.count&&t.idea("setStackCount",e.count)}),$(window).unload(function(){test_socket_url()&&Socket.emit("RemoveStormUser",{user_id:socket_params.user_id})})}function test_socket_url(){return["storms/sort","mobile/storms"].indexOf(socket_client_url)>=0}var __socket__=!1,leave_messages={},socket_connected=0,stack_messages={},socket_params=null,socket_user_id=0,socket_user_hash="",socket_client_url="",Socket=Stormboard.Socket,Storm=Stormboard.Storm,Utils=Stormboard.Utils,Toast=Utils.Toast;if("undefined"==typeof io)return!1;Socket.initDashboard=function(e){!socket_params&&e&&(socket_params=e),initDashboard(socket_params.path||"https://realtime2.stormboard.com")},Socket.initStorm=function(e){!socket_params&&e&&(socket_params=e),initStorm(socket_params.path||"https://realtime2.stormboard.com")},Socket.reconnect=function(){initStorm(socket_params.path||"https://realtime2.stormboard.com")},Socket.changeRoom=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];t&&(socket_params.id=t),this.emit("ChangeRoom",{room:e,emit:!0}),setTimeout(function(){Storm.User.resetAllActive()},500)},Socket.emit=function(e,t){this.isConnected()&&__socket__.emit(e,t)},Socket.join=function(e){this.isConnected()&&__socket__.join(e)},Socket.destroy=function(){__socket__&&(__socket__.disconnect(),__socket__.destroy(),__socket__=!1)},Socket.isConnected=function(){return __socket__&&__socket__.connected};var online_toasts={}}(window.Stormboard),function(e){"use strict";var t={},n=e.Utils.Helpers,o={};t.attach=function(e,n,o){o=$.extend({appendTo:"#app-container",allowInk:!0,size:"standard",switcher:"right",position:"left bottom",my:!1,move:!0,cancel:!0,"return":!0,returntitle:"return"},o);var i=$(n),a=$("<div id='keyboard"+Date.now()+"' class='dg-keyboard'></div>").appendTo($(o.appendTo));if(null!=i.data("keyboard"))return console.error("Keyboard already attached"),!1;var s=this.init(i,a,o);"small"==o.size&&a.addClass("keyboard-sm"),s.on("detach destroy",function(){t.detach($(this))});var r=o.my||o.position;return o.my||("small"===o.size?(r=r.replace("bottom","top+5"),r=r.replace("left","left-118")):r=r.replace("bottom","top+5")),a.position({of:n,my:r,at:o.position}).fadeIn(500),i.data("keyboard",s),s.data("textbox",i),s.data("options",o),s.data("size",o.size),o.allowInk&&t.moveInkControl(s,a),o.move&&a.draggable({handle:".keyboard-move",scaled:!1,drag:function l(e,n){t.moveInkControl(s,a)},stop:function c(){setTimeout(function(){t.moveInkControl(s,a)},100)},cursorAt:{left:0,top:-10}}),s},t.detach=function(e){var n=e.data("textbox");n.data("keyboard",null),t.cancelInkControl(e),e.parents(".dg-keyboard").fadeOut(500,function(){$(this).remove()})},t.init=function(t,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];o=$.extend({allowInk:!0,size:"standard",switcher:"right","return":!0,returntitle:"return"},o);var i=!1,a=!1,s,r,l=window.JST["windows/templates/_keyboard.html"](),c=t.get(0).nodeName.toLowerCase();return r=$('<div class="keyboard-container"></div>').appendTo(n),s=$('<ul class="keyboard has-ink"></ul>').appendTo(r),s.append(l),s.find("li.return").html(o.returntitle),s.data("textbox",t),s.data("size","standard"),s.data("options",o),e.Windows.isApp()&&o.allowInk||(s.removeClass("has-ink"),$("li.space",s).addClass("listitem"),$("li.keyboard-switcher",s).remove()),$("li",s).click(function(){var e=$(this),n,r,l=e.html();if(e.hasClass("keyboard-switcher"))return!1;if(e.hasClass("left-shift")||e.hasClass("right-shift"))return $(".letter, .shift").toggleClass("uppercase"),$(".symbol span").toggle(),i=i!==!0,a=!1,!1;if(e.hasClass("capslock"))return $(".letter, .shift").toggleClass("uppercase"),a=!0,!1;if(e.hasClass("delete"))return n=t.val(),r=t.get(0).selectionStart,t.val(n.substring(0,r-1)+n.substring(r)),t.get(0).setSelectionRange(r-1,r-1),!1;if(e.hasClass("symbol")&&(l=$("span:visible",e).html()),e.hasClass("space")&&(l=" "),e.hasClass("tab")&&(l="\t"),e.hasClass("return")){if(l="","function"==typeof o["return"])return o["return"].call(s,l),!0;"textarea"===c&&(l="\n"),t.trigger("keydown",{keyCode:13})}e.hasClass("uppercase")&&(l=l.toUpperCase()),i===!0&&($(".symbol span").toggle(),a===!1&&$(".letter, .shift").toggleClass("uppercase"),i=!1),n=t.val(),r=t.get(0).selectionStart,t.val(n.substring(0,r)+l+n.substring(r)),t.get(0).setSelectionRange(r+1,r+1),t.trigger("keystroke",{"char":l,value:t.val()})}),o.allowInk&&this.initInkControl(s,n),this.initButtons(s,n),s},t.initButtons=function(n,o){var i=n.data("options");if(i.cancel){var a=$("<div class='keyboard-cancel keyboard-cancel-"+i.switcher+"' keyboard='ink'><span class=\"icon-close\"></span></div>").appendTo(n.parent());a.on("click",function(){t.detach(n)})}if(i.move&&$("<div class='keyboard-move keyboard-move-"+i.switcher+"' keyboard='ink'><span class=\"glyphicon glyphicon-move\"></span></div>").appendTo(n.parent()),e.Windows.isApp()&&i.allowInk){var s=$("li.keyboard-switcher",n);s.on("click switch-keyboard",function(){"ink"==$(this).data("keyboard")?($(this).data("keyboard","type"),t.cancelInkControl(n)):($(this).data("keyboard","ink"),t.openInkControl(n,o))})}},t.initInkControl=function(t,n){return e.Windows.isApp()?void this.openInkControl(t,n):(t.parent().addClass("keyboard-type-standard"),console.error("No Ink Control - Windows not available"),!1)},t.openInkControl=function(t,i){if(!e.Windows.isApp())return console.error("No Ink Control - Windows not available"),!1;var a=e.Windows.inkCanvasId++,s=i.offset(),r=$(".keyboard-container",i);t.addClass("covered"),t.parent().removeClass("keyboard-type-standard").addClass("keyboard-type-ink"),t.dialog_id=a,i.data("dialog_id",a),o[a]=t;var l={dialog_id:a,x:s.left,y:s.top+r.position().top,width:r.width()-1,height:r.height()+10,pad_type:"control"};"small"===t.data("size")&&(l.width*=.82,l.height*=.8),l.width<400&&(l.width=400),l.height<100&&(l.height=100),e.Windows.sendCommand("open_ink_pad",l);var c={dialog_id:a,size:2,r:n.componentToHex(parseInt(236)),g:n.componentToHex(parseInt(236)),b:n.componentToHex(parseInt(236))};e.Windows.sendCommand("change_ink_pad_pen",c)},t.moveInkControl=function(t,n){if(!e.Windows.isApp()||null==t.dialog_id)return console.error("No Ink Control"),!1;var o=t.dialog_id,i=n.offset(),a=$(".keyboard-container",n),s={dialog_id:o,x:i.left,y:i.top+a.position().top,width:a.width()-1,height:a.height()+10};"small"===t.data("size")&&(s.width*=.82,s.height*=.8),e.Windows.sendCommand("move_ink_pad",s)},t.cancelInkControl=function(t){if(t.removeClass("covered"),t.parent().addClass("keyboard-type-standard").removeClass("keyboard-type-ink"),!e.Windows.isApp()||null==t.dialog_id)return console.error("No Ink Control"),!1;try{o[t.dialog_id]&&delete o[t.dialog_id]}catch(n){}e.Windows.sendCommand("cancel_ink_pad",{dialog_id:t.dialog_id})},t.inkTextAppended=function(e,t){var n,i;if(e=parseInt(e),o[e]){var a="",s=o[e].data("textbox"),r=s.val(),l=s.get(0).selectionStart;if(" "===t||13===t.charCodeAt(0)){var c=s.data("pending-text");t=(c||"")+t}else a="";s.data("pending-text",""),s.val(r.substring(0,l)+t+r.substring(l));var d=s.val().length;s.get(0).setSelectionRange(d,d);try{if(n=s.data("keyboard"),null!=n&&(i=n.data("options"),t.charCodeAt(0)&&"function"==typeof i["return"]))return i["return"].call(n,t),!0}catch(u){}}},t.inkTextChanged=function(e,t){if(e=parseInt(e),o[e]){var n=o[e].data("textbox");n.data("pending-text",t)}},t.inkTextDeleted=function(e){if(e=parseInt(e),o[e]){var t=o[e].data("textbox"),n=t.val(),i=t.get(0).selectionStart;""===t.data("pending-text")&&(t.val(n.substring(0,i-1)+n.substring(i)),t.get(0).setSelectionRange(i-1,i-1)),t.data("pending-text","")}},e.Keyboard=t}(window.Stormboard);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"use strict";function t(t){var o=e.Wall.config();if(1===o.claimable){var i=$('<div class="app-action claim"><div class="app-button"><div class="icon-checkmark"></div></div>Claim</div>').prependTo($(".storm-actions","#app-footer"));i.click(function(){n.claimStormDialog()})}}var n=e.Windows,o=e.Storm,i=e.Wall,a=e.Utils;n.inkCanvasId=0,n._isWindows=!1,n._isApp=!1,n.PointerPrefix="",n.zoomOrigin=!1,n.zoomMinimum=.5,n.uploader=null,n.sketchDialogIds=[],n.TouchCapabilities=function(e){this._isApp=!0},n.isApp=function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=i.config();return!!("undefined"!=typeof Windows||"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.bigscreen||this._isApp)&&(!e||a.Store.get("app-type",!1)===e)},n.isWindows=function(){return this._isWindows},n.isEdgeOrIE=function(){return!!/Edge\/\d./i.test(navigator.userAgent)||(!!/rv:11.0/i.test(navigator.userAgent)||!(!/MSIE 9/i.test(navigator.userAgent)&&!/MSIE 10/i.test(navigator.userAgent)))},n.Init=function(){return this.setupLegend(),!!this.isApp()&&(this._isWindows=!0,e.Panel.Join.init(),"uwp-desktop"!==a.Store.get("app-type",!1)&&setTimeout(function(){$(".users-active").on("pointerdown",".participant",[],function(t){null!=t.originalEvent.pointerType&&"pen"==t.originalEvent.pointerType&&e.Storm.User.setIdentity(t,this)}),t()},2e3),$("body").removeClass("page-loading").addClass("windows-app"),$("#app-container").on("pointerdown",".boundary.active",[],function(t){if(n.isApp("uwp-desktop")&&$(":input").blur(),t.originalEvent&&"pen"===t.originalEvent.pointerType){if($(t.target).parents(".idea").length>0)return!0;$(this).blur(),e.Idea.Dialog.open(t),o.Help.closeCreator(),t.stopPropagation(),t.preventDefault()}return!0}),document.getElementsByTagName("body")[0].addEventListener("MSHoldVisual",function(e){e.preventDefault()},!1),void document.getElementsByTagName("body")[0].addEventListener("contextmenu",function(e){e.preventDefault()},!1))},n.setupDemoAbility=function(){var e=this;if(!0){var t=$('<div class="app-action"><div class="app-button action"><div class="icon-arrow-up"></div></div>Demo</div>').appendTo($("#app-storm-actions"));t.click(function(){e.addDemoData()})}},n.addDemoData=function(){a.Toast.info("Adding users"),$.post("/win/demo",{storm:i.config().FlowID}).done(function(t){e.Storm.User.getAll(!0)})},n.updateIdentity=function(e,t){return!!this.isApp()&&void $(".idea-creator-avatar").each(function(){$(this).data("identity_hash")===e&&$(this).html(o.User.getAvatarHtml(t.id,t.av||t.avatar,null,!0))})},n.updateRecognizedText=function(e,t,n){try{$(".draw[dialog_id='"+e+"']").parent().find(".sketch-text").html(t||"")}catch(o){console.error("Error With RecoText Text (text, event)",t,o)}},n.sketchFinished=function(e){3===e.length?$(".draw[dialog_id='"+e[0]+"']").parent().trigger("save-sketch",e):(this.toastMessage("Unable to save sketch... please try again."),console.error("Sketch Finished Error",e))},n.StackInit=function(){var e=$(".boundary.active").parent();return 1===e.data("MSStackInit")||void e.data("MSStackInit",1)},n.BoundaryTouchInit=function(){var t=i.config(),o=$(".boundary.active"),a=o.parent(),s,r;return"undefined"!=typeof a[0].msContentZoomFactor&&(1===a.data("MSZoomingInit")||void a.on("MSContentZoom",function(){n.zoomOrigin||(t.ZoomLevel=this.msContentZoomFactor,s=this.msContentZoomFactor>=1?100*this.msContentZoomFactor:2*(this.msContentZoomFactor-n.zoomMinimum)*100,e.Wall.Zoom.setSliderValue(s),e.Wall.Zoom.save(),$(window).trigger("resize")),n.zoomOrigin=!1}).data("MSZoomingInit",1))},n.setZoom=function(e){n.zoomOrigin="setZoom",$(".boundary.active").parent().get(0).msContentZoomFactor=e},n.setZoomMinimum=function(e){var t=$(".boundary.active").parent();this.zoomMinimum=parseFloat(e),t.css("-ms-content-zoom-limit",100*e+"% 200%")},n.setupLegend=function(){var e=$("#legend-container"),t=a.Store.get("legend-open",!0);t&&e.addClass("legend-open"),$(".legend-toggle-button").click(function(){e.toggleClass("legend-open"),a.Store.set("legend-open",e.hasClass("legend-open"))})},n.initIdeaGestures=function(t){var n=i.config();$(t).on("pointerup",function(e){var t=parseInt(e.pageX)+parseInt(e.pageY);Math.abs($(this).attr("xy")-t)<5&&!$(this).hasClass("touch-selected")&&!$(this).hasClass("lock")&&$(".idea.ui-selected").length>0&&$(this).toggleClass("ui-selected"),$("*").removeClass("touch-selected")}),t.addEventListener("MSInertiaStart",function(e){var t=$(".boundary.active");this.inertia=!$(this).hasClass("lock"),this.max={left:t.width()-205,top:t.height()-205},this.gestures=0,this.pos={left:$(this).position().left/n.ZoomLevel,top:$(this).position().top/n.ZoomLevel},this.bounce={left:!1,top:!1},this.ZoomLevel=n.ZoomLevel});var o=!1;t.addEventListener("MSGestureChange",function(t){var n,i;if(this.inertia&&(this.pos.left<5?(this.pos.left=5,this.bounce.left=!0):this.pos.left>this.max.left&&(this.pos.left=this.max.left,this.bounce.left=!0),this.pos.top<5?(this.pos.top=5,this.bounce.top=!0):this.pos.top>this.max.top&&(this.pos.top=this.max.top,this.bounce.top=!0),this.bounce.left?this.pos.left-=parseFloat(t.translationX/5):this.pos.left+=parseFloat(t.translationX),this.bounce.top?this.pos.top-=parseFloat(t.translationY/5):this.pos.top+=parseFloat(t.translationY),this.style.left=this.pos.left+"px",this.style.top=this.pos.top+"px",0==Math.floor(this.pos.left%10)||0==Math.floor(this.pos.top%10))){var a=$(this).attr("node_id");e.Wall.Connector.move(a,this.pos.left,this.pos.top),o&&clearTimeout(o),n=this.pos.left,i=this.pos.top,o=setTimeout(function(){e.Socket.emit("DraggingIdea",{multi:!1,node_id:a,x:n,y:i}),o=!1},40)}}),t.addEventListener("MSGestureEnd",function(t){if(this.inertia=!1,delete this.gestures,delete this.ZoomLevel,delete this.bounce,!$(this).hasClass("lock")){var o={left:$(this).position().left/n.ZoomLevel,top:$(this).position().top/n.ZoomLevel},i=$(this).attr("node_id");$("#boundary").wall("change",$(this).attr("node_id"),o.left,o.top,$(this).css("z-index"),$(this).attr("colour")),$("#boundary").wall("save"),e.Wall.Connector.move(i,o.left,o.top)}}),t.addEventListener("MSGestureHold",function(e){$(this).hasClass("lock")||1!==e.detail||$(t).toggleClass("ui-selected touch-selected")})},n.claimStormDialog=function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],s=i.config(),r=window.JST["windows/templates/_claim_dialog.html"]({alert:t?'<div class="alert alert-info">This storm has no owner, if you exit you will lose any changes you have made to this storm. Select a user below, or exit without claiming.<p class="text-right"><button type="button" class="btn btn-primary" onclick="Stormboard.Utils.Helpers.exitStorm(true)">Exit without claiming</button></p></div>':""}),l=$(r),c,d="instorm",u=[];l.dialog({title:"Claim Storm",modal:!0,width:600,height:600,position:{my:"center",at:"center",of:window},create:function p(i){l.parent().find(".ui-dialog-titlebar:first .ui-button").removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close").addClass("btn btn-primary").html('<span class="glyphicon glyphicon-remove"></span>'),l.parent().find(".btn-idea-dialog").blur(),l.parents(".ui-dialog").addClass("windialog"),l.find(".nfc-listener").on("nfc-data-read",function(e,t){n.saveStorm(t)}),c=l.find(".table-users tbody"),c.html('<tr><td class="text-center" colspan="2"><img src="/images/logo-icon-100.png" class="spin"><br>Loading...</td></tr>');var r=l.find(".claim-filter");r.on("keyup",function(){var e=new RegExp(this.value,"gi");$("tr",c).each(function(){var t=$(this).data("user"),n=t.fullname,o=n.match(e);!o||"instorm"===d&&u.indexOf(t.id)<0?$(this).addClass("hide"):$(this).removeClass("hide")})}),l.find(".btn-clear-search").on("click",function(){r.val("").trigger("keyup")}),l.find(".btn-type-filter").on("click",function(){$(".btn-type-filter").removeClass("active"),$(this).addClass("active"),d=$(this).data("type"),r.trigger("keyup")}),$.getJSON("/win/claimUsers",{storm:s.FlowID}).done(function(i){if(c.html(""),i.success){for(var r in i.users)$('<tr data-user="'+i.users[r].id+'">\n                    <td class="claim-avatar">'+o.User.getAvatarHtml(i.users[r].id,i.users[r].avatar)+'</td>\n                    <td class="claim-fullname">'+i.users[r].fullname+'</td>\n                    <td><button type="button" class="btn btn-primary">Claim</button></td>\n                   </tr>').data("user",i.users[r]).appendTo(c);u=i.instorm,$(".btn-type-filter[data-type='"+(u.length>0?"instorm":"team")+"']").trigger("click"),c.find(".btn").on("click",function(){var o=$(this).parents("tr:first").data("user");o&&$.getJSON("/win/claimstorm",{storm:s.FlowID,user:o.id}).done(function(o){o.success?(e.Socket.emit("StormClaimed",{storm_id:o.storm_id}),s.claimable=!1,$(".app-action.claim").remove(),t?(n.toastMessage("Storm has been claimed, exiting storm now."),setTimeout(function(){a.Helpers.exitStorm()},2e3)):a.Toast.success(o.msg||"Storm has been claimed")):a.Toast.error(o.msg);
}).always(function(){l.dialog("destroy").remove()})})}else a.Toast.error(i.msg||null)})},open:function h(){l.find(".scrollable").css({top:$(".table-users-header").position().top+$(".table-users-header").height()+"px"})},close:function f(){$(this).dialog("destroy").remove()}})},n.saveStorm=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=i.config(),n=$(".btn-save",".save-dialog"),o={};o.storm=t.FlowID,e?o.key=e:(o.username=$("#save-username").val(),o.password=$("#save-password").val()),n.html("<img src='/images/loading-wide.gif'>"),$.post("/win/claimStorm",o).done(function(e){var t="";e.success?($(".save-dialog").dialog("destroy").remove(),t="You have claimed this storm and is now attached to your account.",$(".app-action.save").remove()):(t=e.msg||"Unable to claim this storm",n.html("Claim")),a.Toast.info(t)})},n.toastMessage=function(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(t=e.Utils.Helpers.stripTags(t.replace(/<br\s*[\/]?>/gi,"\n").replace("&nbsp"," ")),"undefined"!=typeof Windows){var o=a.Store.get("app-type",!1),s=!1;if((t.indexOf("just entered")>0||t.indexOf("just left")>0)&&(s=!0,"uwp-surfacehub"===o))return!0;var r=Windows.UI.Notifications,l=r.ToastNotificationManager,c=1,d=l.getTemplateContent(r.ToastTemplateType[c]),u=d.getElementsByTagName("image");if(u[0].setAttribute("src",n||"https://www.stormboard.com/images/logo-icon-100.png"),"uwp-desktop"===o&&s){var p={task:"loadstorm",id:i.config().TopFlowID,title:i.config().title};d.getElementsByTagName("toast")[0].setAttribute("launch","sbtoast://"+JSON.stringify(p))}var h=d.getElementsByTagName("text");h.forEach(function(e,n){e.appendChild(d.createTextNode(t))});var f=new r.ToastNotification(d);return l.createToastNotifier().show(f),!0}return a.Toast.info(t),!1};var s=!1;n.getMessenger=function(){return s?s:s=window.external},n.sendCommand=function(e,t){var n=this.getMessenger(),o={name:e,payload:t};console.log("sending command: ",o);try{n.notify(JSON.stringify(o))}catch(i){}},n.moveStormActions=function(){},n.sizeSelector=function(){},e.Windows=n}(window.Stormboard);
//# sourceMappingURL=../../../assets/sourcemaps/site.min.js.map
